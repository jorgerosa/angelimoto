window.ajaxManager=new function(){this.makeRequest=function(parameters){if(typeof parameters=='object'){var ajaxRequestObject=new AjaxRequest(parameters);ajaxRequestObject.makeRequest();}};};window.AjaxRequest=function(parameters){var status=null;var failureDelay=20000;var failureCheckTimeOut=null;var XMLHttpResource=null;var requestURL=false;var requestXML=false;var requestType=false;var contentType=false;var successCallBack=false;var failCallBack=false;var progressCallBack=false;var postParameters=false;var overrideMimeType=false;var getParameters=false;var formData=false;var init=function(){if(typeof parameters.requestXML!=='undefined'){requestXML=parameters.requestXML;}else{requestXML=false;}
if(typeof parameters.requestURL!=='undefined'){requestURL=parameters.requestURL;}else{requestURL=false;}
if(typeof parameters.requestType!=='undefined'){requestType=parameters.requestType.toUpperCase();}else{requestType='POST';}
if(typeof parameters.contentType!=='undefined'){contentType=parameters.contentType;}else{contentType='multipart/form-data';}
if(typeof parameters.postParameters==='object'){postParameters=parameters.postParameters;}else{postParameters={};}
if(typeof parameters.getParameters==='object'){getParameters=parameters.getParameters;}else{getParameters={};}
if(typeof parameters.successCallBack==='function'){successCallBack=parameters.successCallBack;}else{successCallBack=false;}
if(typeof parameters.failureDelay!=='undefined'){failureDelay=parameters.failureDelay;}
if(typeof parameters.formData!=='undefined'){formData=parameters.formData;}
if(typeof parameters.overrideMimeType!=='undefined'){overrideMimeType=parameters.overrideMimeType;}
if(typeof parameters.failCallBack==='function'){failCallBack=parameters.failCallBack;}else{failCallBack=false;}
if(typeof parameters.progressCallBack==='function'){progressCallBack=parameters.progressCallBack;}else{progressCallBack=false;}
XMLHttpResource=getXMLHttpRequestObject();};this.makeRequest=function(){if(requestType==='POST'){if(formData){sendRequest();}else{var converter=new AjaxRequestDataConverter(postParameters,sendRequest,contentType);converter.preparePostData();}}else{if(typeof getParameters==='object'){var urlParameters='';for(var name in getParameters){var value=getParameters[name];urlParameters+=name+'='+value+'&';}
if(urlParameters&&(requestURL.indexOf('?')===-1)){requestURL+='?';}}
sendRequest();}};var sendRequest=function(headers,postBody){if(progressCallBack){window.eventsManager.addHandler(XMLHttpResource.upload,'progress',progressCallBack);}
if(overrideMimeType&&XMLHttpResource.overrideMimeType){XMLHttpResource.overrideMimeType(overrideMimeType);}
if(failureDelay!==false){failureCheckTimeOut=window.setTimeout(requestTimeOutHandler,failureDelay);}
if(requestType==='POST'){XMLHttpResource.open('POST',requestURL,true);for(var header in headers){XMLHttpResource.setRequestHeader(header,headers[header]);}
XMLHttpResource.onreadystatechange=catchRequestAnswer;if(formData){XMLHttpResource.send(formData);}else if(typeof postBody!==undefined){XMLHttpResource.send(postBody);}}else{XMLHttpResource.open('GET',requestURL,true);XMLHttpResource.onreadystatechange=catchRequestAnswer;if(formData){XMLHttpResource.send(formData);}else{XMLHttpResource.send();}}};var catchRequestAnswer=function(){if(status==null){if(XMLHttpResource.readyState===4){window.clearTimeout(failureCheckTimeOut);if(XMLHttpResource.status===200){status='success';if(successCallBack){var callBackArgument=false;if(requestXML){callBackArgument=XMLHttpResource.responseXML;}else{callBackArgument=XMLHttpResource.responseText;}
successCallBack(callBackArgument);}}else{status='failure';if(failCallBack){failCallBack();}}}}};var requestTimeOutHandler=function(){status='timeout';if(failCallBack){failCallBack();}};var formatNumber=function(number,decimals){number=number.toString();if(number.length<decimals){for(var a=decimals-number.length;a>0;a--){number='0'+number;}}
return number;};var getXMLHttpRequestObject=function(){var result=false;if(window.XMLHttpRequest){result=new XMLHttpRequest();}else if(window.ActiveXObject){try{result=new ActiveXObject('Msxml2.XMLHTTP');}catch(e){try{result=new ActiveXObject('Microsoft.XMLHTTP');}catch(E){result=false;}}}
return result;};init();};window.AjaxRequestDataConverter=function(postParameters,callBack,contentType){this.preparePostData=function(){if(contentType==='multipart/form-data'&&typeof window.FormData==='undefined'){for(var name in postParameters){var value=postParameters[name];if(typeof value==='object'&&value.name&&value.size&&value.type){fileContents[name]=false;var reader=new FileReader();reader.onload=function(fieldName){return function(event){getFileContents(event,fieldName);};}(name);reader.readAsBinaryString(value);}}
checkFilesPreload();}else{generateContentBody();}};var getFileContents=function(event,name){fileContents[name]=event.target.result;checkFilesPreload();};var checkFilesPreload=function(){var loaded=true;for(var i in fileContents){if(fileContents[i]===false){loaded=false;break;}}
if(loaded){generateContentBody();}};var generateContentBody=function(){var contentBody='';var headers={};if(contentType==='application/x-www-form-urlencoded'){for(var name in postParameters){contentBody=contentBody+name+'='+postParameters[name]+'&';}
contentBody=encodeURI(contentBody);headers['Content-type']='application/x-www-form-urlencoded';}else if(contentType==='multipart/form-data'){if(typeof window.FormData!=='undefined'){contentBody=new FormData();for(var name in postParameters){contentBody.append(name,postParameters[name]);}}else{var boundary='---------------------------';boundary+=Math.floor(Math.random()*32768);boundary+=Math.floor(Math.random()*32768);boundary+=Math.floor(Math.random()*32768);headers['Content-type']='multipart/form-data; boundary='+boundary;for(var name in postParameters){var value=postParameters[name];if(typeof value==='object'&&value.name&&value.size&&value.type){contentBody+='--'+boundary+'\r\n'+'Content-Disposition: form-data; name="'+name+'"; filename="'+value.name+'"';contentBody+='\r\n'+'Content-Type: "'+value.type+'"';contentBody+='\r\n\r\n';contentBody+=fileContents[name];contentBody+='\r\n';}else{contentBody+='--'+boundary+'\r\n'+'Content-Disposition: form-data; name="'+name+'"';contentBody+='\r\n\r\n';contentBody+=value;contentBody+='\r\n';}}
contentBody+='--'+boundary+'--';}}
callBack(headers,contentBody);};var fileContents={};};;(function(d,f){'use strict';var h=function(d){if('object'!==typeof d.document){throw Error('Cookies.js requires a `window` with a `document` object');}
var b=function(a,e,c){return 1===arguments.length?b.get(a):b.set(a,e,c);};b._document=d.document;b._cacheKeyPrefix='cookey.';b._maxExpireDate=new Date('Fri, 31 Dec 9999 23:59:59 UTC');b.defaults={path:'/',secure:!1};b.get=function(a){b._cachedDocumentCookie!==b._document.cookie&&b._renewCache();a=b._cache[b._cacheKeyPrefix+a];return a===f?f:decodeURIComponent(a);};b.set=function(a,e,c){c=b._getExtendedOptions(c);c.expires=b._getExpiresDate(e===f?-1:c.expires);b._document.cookie=b._generateCookieString(a,e,c);return b;};b.expire=function(a,e){return b.set(a,f,e);};b._getExtendedOptions=function(a){return{path:a&&a.path||b.defaults.path,domain:a&&a.domain||b.defaults.domain,expires:a&&a.expires||b.defaults.expires,secure:a&&a.secure!==f?a.secure:b.defaults.secure,};};b._isValidDate=function(a){return'[object Date]'===Object.prototype.toString.call(a)&&!isNaN(a.getTime());};b._getExpiresDate=function(a,e){e=e||new Date;'number'===typeof a?a=Infinity===a?b._maxExpireDate:new Date(e.getTime()+1E3*a):'string'===typeof a&&(a=new Date(a));if(a&&!b._isValidDate(a)){throw Error('`expires` parameter cannot be converted to a valid Date instance');}
return a;};b._generateCookieString=function(a,b,c){a=a.replace(/[^#$&+\^`|]/g,encodeURIComponent);a=a.replace(/\(/g,'%28').replace(/\)/g,'%29');b=(b+'').replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent);c=c||{};a=a+'='+b+(c.path?';path='+
c.path:'');a+=c.domain?';domain='+c.domain:'';a+=c.expires?';expires='+c.expires.toUTCString():'';return a+=c.secure?';secure':'';};b._getCacheFromString=function(a){var e={};a=a?a.split('; '):[];for(var c=0;c<a.length;c++){var d=b._getKeyValuePairFromCookieString(a[c]);e[b._cacheKeyPrefix+d.key]===f&&(e[b._cacheKeyPrefix+d.key]=d.value);}
return e;};b._getKeyValuePairFromCookieString=function(a){var b=a.indexOf('='),b=0>b?a.length:b,c=a.substr(0,b),d;try{d=decodeURIComponent(c);}catch(k){console&&'function'===typeof console.error&&console.error('Could not decode cookie with key "'+c+'"',k);}
return{key:d,value:a.substr(b+1)};};b._renewCache=function(){b._cache=b._getCacheFromString(b._document.cookie);b._cachedDocumentCookie=b._document.cookie;};b._areEnabled=function(){var a='1'===b.set('cookies.js',1).get('cookies.js');b.expire('cookies.js');return a;};b.enabled=b._areEnabled();return b;},g=d&&'object'===typeof d.document?h(d):h;'function'===typeof define&&define.amd?define(function(){return g;}):'object'===typeof exports?('object'===typeof module&&'object'===typeof module.exports&&(exports=module.exports=g),exports.Cookies=g):d.Cookies=g;})('undefined'===typeof window?this:window);;window.domHelper=new function(){this.setTextContent=function(element,text){if(typeof element=='object'&&typeof text!=='undefined'){while(element.firstChild){element.removeChild(element.firstChild);}
var textNode=document.createTextNode(text);element.appendChild(textNode);}};this.formatNumber=function(number,decimals){number=number.toString();if(number.length<decimals){for(var a=decimals-number.length;a>0;a--){number='0'+number;}}
return number;};this.roundNumber=function(number,precision){return(Math.round(number*100)/ 100).toFixed(precision);};this.addClass=function(element,className){if(element){var elementClassName=element.className+'';if(-1==elementClassName.indexOf(className)){if(elementClassName==''){element.className=className;}else{element.className+=' '+className;}}}};this.removeClass=function(element,className){if(element){var elementClassName=element.className+'';if(-1!=elementClassName.indexOf(className)){if(-1!=elementClassName.indexOf(className+' ')){className+=' ';}else if(-1!=elementClassName.indexOf(' '+className)){className=' '+className;}
elementClassName=elementClassName.replace(className,'');element.className=elementClassName;}}};this.getElementPositions=function(domElement){var elementLeft=0;var elementTop=0;if(domElement.offsetParent){elementLeft=domElement.offsetLeft;elementTop=domElement.offsetTop;while(domElement=domElement.offsetParent){if(domElement.tagName!='body'&&domElement.tagName!='BODY'){elementLeft+=domElement.offsetLeft-domElement.scrollLeft;elementTop+=domElement.offsetTop-domElement.scrollTop;}else{elementLeft+=domElement.offsetLeft;elementTop+=domElement.offsetTop;}}}
return{x:elementLeft,y:elementTop};};this.isAChildOf=function(_parent,_child){if(_parent===_child){return false;}
while(_child&&_child!==_parent){_child=_child.parentNode;}
return _child===_parent;};this.hasClass=function(element,cls){return(' '+element.className+' ').indexOf(' '+cls+' ')>-1;};};;var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c,d,e,f,g=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=g.prototype.setRatio},h=_gsScope._gsDefine.globals,i={},j=g.prototype=new a("css");j.constructor=g,g.version="1.20.4",g.API=2,g.defaultTransformPerspective=0,g.defaultSkewType="compensated",g.defaultSmoothOrigin=!0,j="px",g.suffixMap={top:j,right:j,bottom:j,left:j,width:j,height:j,fontSize:j,padding:j,margin:j,perspective:j,lineHeight:""};var k,l,m,n,o,p,q,r,s=/(?:\-|\.|\b)(\d|\.|e\-)+/g,t=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,u=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,v=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/i,y=/opacity:([^;]*)/i,z=/alpha\(opacity *=.+?\)/i,A=/^(rgb|hsl)/,B=/([A-Z])/g,C=/-([a-z])/gi,D=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,E=function(a,b){return b.toUpperCase()},F=/(?:Left|Right|Width)/i,G=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,H=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,I=/,(?=[^\)]*(?:\(|$))/gi,J=/[\s,\(]/i,K=Math.PI/180,L=180/Math.PI,M={},N={style:{}},O=_gsScope.document||{createElement:function(){return N}},P=function(a,b){return O.createElementNS?O.createElementNS(b||"http://www.w3.org/1999/xhtml",a):O.createElement(a)},Q=P("div"),R=P("img"),S=g._internals={_specialProps:i},T=(_gsScope.navigator||{}).userAgent||"",U=function(){var a=T.indexOf("Android"),b=P("a");return m=-1!==T.indexOf("Safari")&&-1===T.indexOf("Chrome")&&(-1===a||parseFloat(T.substr(a+8,2))>3),o=m&&parseFloat(T.substr(T.indexOf("Version/")+8,2))<6,n=-1!==T.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(T)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(T))&&(p=parseFloat(RegExp.$1)),b?(b.style.cssText="top:1px;opacity:.55;",/^0.55/.test(b.style.opacity)):!1}(),V=function(a){return x.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},W=function(a){_gsScope.console&&console.log(a)},X="",Y="",Z=function(a,b){b=b||Q;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(Y=3===d?"ms":c[d],X="-"+Y.toLowerCase()+"-",Y+a):null},$=O.defaultView?O.defaultView.getComputedStyle:function(){},_=g.getStyle=function(a,b,c,d,e){var f;return U||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||$(a))?f=c[b]||c.getPropertyValue(b)||c.getPropertyValue(b.replace(B,"-$1").toLowerCase()):a.currentStyle&&(f=a.currentStyle[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):V(a)},aa=S.convertToPixels=function(a,c,d,e,f){if("px"===e||!e&&"lineHeight"!==c)return d;if("auto"===e||!d)return 0;var h,i,j,k=F.test(c),l=a,m=Q.style,n=0>d,o=1===d;if(n&&(d=-d),o&&(d*=100),"lineHeight"!==c||e)if("%"===e&&-1!==c.indexOf("border"))h=d/100*(k?a.clientWidth:a.clientHeight);else{if(m.cssText="border:0 solid red;position:"+_(a,"position")+";line-height:0;","%"!==e&&l.appendChild&&"v"!==e.charAt(0)&&"rem"!==e)m[k?"borderLeftWidth":"borderTopWidth"]=d+e;else{if(l=a.parentNode||O.body,-1!==_(l,"display").indexOf("flex")&&(m.position="absolute"),i=l._gsCache,j=b.ticker.frame,i&&k&&i.time===j)return i.width*d/100;m[k?"width":"height"]=d+e}l.appendChild(Q),h=parseFloat(Q[k?"offsetWidth":"offsetHeight"]),l.removeChild(Q),k&&"%"===e&&g.cacheWidths!==!1&&(i=l._gsCache=l._gsCache||{},i.time=j,i.width=h/d*100),0!==h||f||(h=aa(a,c,d,e,!0))}else i=$(a).lineHeight,a.style.lineHeight=d,h=parseFloat($(a).lineHeight),a.style.lineHeight=i;return o&&(h/=100),n?-h:h},ba=S.calculateOffset=function(a,b,c){if("absolute"!==_(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=_(a,"margin"+d,c);return a["offset"+d]-(aa(a,b,parseFloat(e),e.replace(w,""))||0)},ca=function(a,b){var c,d,e,f={};if(b=b||$(a,null))if(c=b.length)for(;--c>-1;)e=b[c],(-1===e.indexOf("-transform")||Da===e)&&(f[e.replace(C,E)]=b.getPropertyValue(e));else for(c in b)(-1===c.indexOf("Transform")||Ca===c)&&(f[c]=b[c]);else if(b=a.currentStyle||a.style)for(c in b)"string"==typeof c&&void 0===f[c]&&(f[c.replace(C,E)]=b[c]);return U||(f.opacity=V(a)),d=Ra(a,b,!1),f.rotation=d.rotation,f.skewX=d.skewX,f.scaleX=d.scaleX,f.scaleY=d.scaleY,f.x=d.x,f.y=d.y,Fa&&(f.z=d.z,f.rotationX=d.rotationX,f.rotationY=d.rotationY,f.scaleZ=d.scaleZ),f.filters&&delete f.filters,f},da=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&-1===g.indexOf("Origin")&&("number"==typeof f||"string"==typeof f)&&(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(v,"")?f:0:ba(a,g),void 0!==j[g]&&(h=new sa(j,g,j[g],h)));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},ea={width:["Left","Right"],height:["Top","Bottom"]},fa=["marginLeft","marginRight","marginTop","marginBottom"],ga=function(a,b,c){if("svg"===(a.nodeName+"").toLowerCase())return(c||$(a))[b]||0;if(a.getCTM&&Oa(a))return a.getBBox()[b]||0;var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=ea[b],f=e.length;for(c=c||$(a,null);--f>-1;)d-=parseFloat(_(a,"padding"+e[f],c,!0))||0,d-=parseFloat(_(a,"border"+e[f]+"Width",c,!0))||0;return d},ha=function(a,b){if("contain"===a||"auto"===a||"auto auto"===a)return a+" ";(null==a||""===a)&&(a="0 0");var c,d=a.split(" "),e=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":d[0],f=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":d[1];if(d.length>3&&!b){for(d=a.split(", ").join(",").split(","),a=[],c=0;c<d.length;c++)a.push(ha(d[c]));return a.join(",")}return null==f?f="center"===e?"50%":"0":"center"===f&&(f="50%"),("center"===e||isNaN(parseFloat(e))&&-1===(e+"").indexOf("="))&&(e="50%"),a=e+" "+f+(d.length>2?" "+d[2]:""),b&&(b.oxp=-1!==e.indexOf("%"),b.oyp=-1!==f.indexOf("%"),b.oxr="="===e.charAt(1),b.oyr="="===f.charAt(1),b.ox=parseFloat(e.replace(v,"")),b.oy=parseFloat(f.replace(v,"")),b.v=a),b||a},ia=function(a,b){return"function"==typeof a&&(a=a(r,q)),"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)||0},ja=function(a,b){return"function"==typeof a&&(a=a(r,q)),null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2))+b:parseFloat(a)||0},ka=function(a,b,c,d){var e,f,g,h,i,j=1e-6;return"function"==typeof a&&(a=a(r,q)),null==a?h=b:"number"==typeof a?h=a:(e=360,f=a.split("_"),i="="===a.charAt(1),g=(i?parseInt(a.charAt(0)+"1",10)*parseFloat(f[0].substr(2)):parseFloat(f[0]))*(-1===a.indexOf("rad")?1:L)-(i?0:b),f.length&&(d&&(d[c]=b+g),-1!==a.indexOf("short")&&(g%=e,g!==g%(e/2)&&(g=0>g?g+e:g-e)),-1!==a.indexOf("_cw")&&0>g?g=(g+9999999999*e)%e-(g/e|0)*e:-1!==a.indexOf("ccw")&&g>0&&(g=(g-9999999999*e)%e-(g/e|0)*e)),h=b+g),j>h&&h>-j&&(h=0),h},la={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ma=function(a,b,c){return a=0>a?a+1:a>1?a-1:a,255*(1>6*a?b+(c-b)*a*6:.5>a?c:2>3*a?b+(c-b)*(2/3-a)*6:b)+.5|0},na=g.parseColor=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(a)if("number"==typeof a)c=[a>>16,a>>8&255,255&a];else{if(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),la[a])c=la[a];else if("#"===a.charAt(0))4===a.length&&(d=a.charAt(1),e=a.charAt(2),f=a.charAt(3),a="#"+d+d+e+e+f+f),a=parseInt(a.substr(1),16),c=[a>>16,a>>8&255,255&a];else if("hsl"===a.substr(0,3))if(c=m=a.match(s),b){if(-1!==a.indexOf("="))return a.match(t)}else g=Number(c[0])%360/360,h=Number(c[1])/100,i=Number(c[2])/100,e=.5>=i?i*(h+1):i+h-i*h,d=2*i-e,c.length>3&&(c[3]=Number(c[3])),c[0]=ma(g+1/3,d,e),c[1]=ma(g,d,e),c[2]=ma(g-1/3,d,e);else c=a.match(s)||la.transparent;c[0]=Number(c[0]),c[1]=Number(c[1]),c[2]=Number(c[2]),c.length>3&&(c[3]=Number(c[3]))}else c=la.black;return b&&!m&&(d=c[0]/255,e=c[1]/255,f=c[2]/255,j=Math.max(d,e,f),k=Math.min(d,e,f),i=(j+k)/2,j===k?g=h=0:(l=j-k,h=i>.5?l/(2-j-k):l/(j+k),g=j===d?(e-f)/l+(f>e?6:0):j===e?(f-d)/l+2:(d-e)/l+4,g*=60),c[0]=g+.5|0,c[1]=100*h+.5|0,c[2]=100*i+.5|0),c},oa=function(a,b){var c,d,e,f=a.match(pa)||[],g=0,h="";if(!f.length)return a;for(c=0;c<f.length;c++)d=f[c],e=a.substr(g,a.indexOf(d,g)-g),g+=e.length+d.length,d=na(d,b),3===d.length&&d.push(1),h+=e+(b?"hsla("+d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:"rgba("+d.join(","))+")";return h+a.substr(g)},pa="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(j in la)pa+="|"+j+"\\b";pa=new RegExp(pa+")","gi"),g.colorStringFilter=function(a){var b,c=a[0]+" "+a[1];pa.test(c)&&(b=-1!==c.indexOf("hsl(")||-1!==c.indexOf("hsla("),a[0]=oa(a[0],b),a[1]=oa(a[1],b)),pa.lastIndex=0},b.defaultStringFilter||(b.defaultStringFilter=g.colorStringFilter);var qa=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(pa)||[""])[0]:"",g=a.split(f).join("").match(u)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=-1!==a.indexOf(" ")?" ":",",k=g.length,l=k>0?g[0].replace(s,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;else if(d&&I.test(a)){for(o=a.replace(I,"|").split("|"),n=0;n<o.length;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(pa)||[f])[0],m=a.split(b).join("").match(u)||[],n=m.length,k>n--)for(;++n<k;)m[n]=c?m[(n-1)/2|0]:g[n];return h+m.join(j)+j+b+i+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&I.test(a)){for(f=a.replace(I,"|").split("|"),m=0;m<f.length;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(u)||[],m=b.length,k>m--)for(;++m<k;)b[m]=c?b[(m-1)/2|0]:g[m];return h+b.join(j)+i}:function(a){return a}},ra=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;4>i;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},sa=(S._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f,g=this.data,h=g.proxy,i=g.firstMPT,j=1e-6;i;)b=h[i.v],i.r?b=Math.round(b):j>b&&b>-j&&(b=0),i.t[i.p]=b,i=i._next;if(g.autoRotate&&(g.autoRotate.rotation=g.mod?g.mod(h.rotation,this.t):h.rotation),1===a||0===a)for(i=g.firstMPT,f=1===a?"e":"b";i;){if(c=i.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;d<c.l;d++)e+=c["xn"+d]+c["xs"+(d+1)];c[f]=e}}else c[f]=c.s+c.xs0;i=i._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),ta=(S._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=M;for(c._transform=null,M=b,d=k=c.parse(a,b,d,e),M=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(d.type<=1&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new sa(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new sa(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},S.CSSPropTween=function(a,b,d,e,g,h,i,j,k,l,m){this.t=a,this.p=b,this.s=d,this.c=e,this.n=i||b,a instanceof ta||f.push(this.n),this.r=j,this.type=h||0,k&&(this.pr=k,c=!0),this.b=void 0===l?d:l,this.e=void 0===m?d+e:m,g&&(this._next=g,g._prev=this)}),ua=function(a,b,c,d,e,f){var g=new ta(a,b,c,d-c,e,-1,f);return g.b=c,g.e=g.xs0=d,g},va=g.parseComplex=function(a,b,c,d,e,f,h,i,j,l){c=c||f||"","function"==typeof d&&(d=d(r,q)),h=new ta(a,b,0,0,h,l?2:1,null,!1,i,c,d),d+="",e&&pa.test(d+c)&&(d=[c,d],g.colorStringFilter(d),c=d[0],d=d[1]);var m,n,o,p,u,v,w,x,y,z,A,B,C,D=c.split(", ").join(",").split(" "),E=d.split(", ").join(",").split(" "),F=D.length,G=k!==!1;for((-1!==d.indexOf(",")||-1!==c.indexOf(","))&&(-1!==(d+c).indexOf("rgb")||-1!==(d+c).indexOf("hsl")?(D=D.join(" ").replace(I,", ").split(" "),E=E.join(" ").replace(I,", ").split(" ")):(D=D.join(" ").split(",").join(", ").split(" "),E=E.join(" ").split(",").join(", ").split(" ")),F=D.length),F!==E.length&&(D=(f||"").split(" "),F=D.length),h.plugin=j,h.setRatio=l,pa.lastIndex=0,m=0;F>m;m++)if(p=D[m],u=E[m],x=parseFloat(p),x||0===x)h.appendXtra("",x,ia(u,x),u.replace(t,""),G&&-1!==u.indexOf("px"),!0);else if(e&&pa.test(p))B=u.indexOf(")")+1,B=")"+(B?u.substr(B):""),C=-1!==u.indexOf("hsl")&&U,z=u,p=na(p,C),u=na(u,C),y=p.length+u.length>6,y&&!U&&0===u[3]?(h["xs"+h.l]+=h.l?" transparent":"transparent",h.e=h.e.split(E[m]).join("transparent")):(U||(y=!1),C?h.appendXtra(z.substr(0,z.indexOf("hsl"))+(y?"hsla(":"hsl("),p[0],ia(u[0],p[0]),",",!1,!0).appendXtra("",p[1],ia(u[1],p[1]),"%,",!1).appendXtra("",p[2],ia(u[2],p[2]),y?"%,":"%"+B,!1):h.appendXtra(z.substr(0,z.indexOf("rgb"))+(y?"rgba(":"rgb("),p[0],u[0]-p[0],",",!0,!0).appendXtra("",p[1],u[1]-p[1],",",!0).appendXtra("",p[2],u[2]-p[2],y?",":B,!0),y&&(p=p.length<4?1:p[3],h.appendXtra("",p,(u.length<4?1:u[3])-p,B,!1))),pa.lastIndex=0;else if(v=p.match(s)){if(w=u.match(t),!w||w.length!==v.length)return h;for(o=0,n=0;n<v.length;n++)A=v[n],z=p.indexOf(A,o),h.appendXtra(p.substr(o,z-o),Number(A),ia(w[n],A),"",G&&"px"===p.substr(z+A.length,2),0===n),o=z+A.length;h["xs"+h.l]+=p.substr(o)}else h["xs"+h.l]+=h.l||h["xs"+h.l]?" "+u:u;if(-1!==d.indexOf("=")&&h.data){for(B=h.xs0+h.data.s,m=1;m<h.l;m++)B+=h["xs"+m]+h.data["xn"+m];h.e=B+h["xs"+m]}return h.l||(h.type=-1,h.xs0=h.e),h.xfirst||h},wa=9;for(j=ta.prototype,j.l=j.pr=0;--wa>0;)j["xn"+wa]=0,j["xs"+wa]="";j.xs0="",j._next=j._prev=j.xfirst=j.data=j.plugin=j.setRatio=j.rxp=null,j.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&(h||g["xs"+h])?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new ta(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var xa=function(a,b){b=b||{},this.p=b.prefix?Z(a)||a:a,i[a]=i[this.p]=this,this.format=b.formatter||qa(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},ya=S._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;d<f.length;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new xa(f[d],b)},za=S._registerPluginProp=function(a){if(!i[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";ya(a,{parser:function(a,c,d,e,f,g,j){var k=h.com.greensock.plugins[b];return k?(k._cssRegister(),i[d].parse(a,c,d,e,f,g,j)):(W("Error: "+b+" js file not loaded."),f)}})}};j=xa.prototype,j.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(I.test(c)||I.test(b)?(h=b.replace(I,"|").split("|"),i=c.replace(I,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;j>g;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(-1===l?h[g]=h[g].split(m).join(""):-1===k&&(h[g]+=" "+m)));b=h.join(", "),c=i.join(", ")}return va(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},j.parse=function(a,b,c,d,f,g,h){return this.parseComplex(a.style,this.format(_(a,this.p,e,!1,this.dflt)),this.format(b),f,g)},g.registerSpecialProp=function(a,b,c){ya(a,{parser:function(a,d,e,f,g,h,i){var j=new ta(a,e,0,0,g,2,e,!1,c);return j.plugin=h,j.setRatio=b(a,d,f._tween,e),j},priority:c})},g.useSVGTransformAttr=!0;var Aa,Ba="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ca=Z("transform"),Da=X+"transform",Ea=Z("transformOrigin"),Fa=null!==Z("perspective"),Ga=S.Transform=function(){this.perspective=parseFloat(g.defaultTransformPerspective)||0,this.force3D=g.defaultForce3D!==!1&&Fa?g.defaultForce3D||"auto":!1},Ha=_gsScope.SVGElement,Ia=function(a,b,c){var d,e=O.createElementNS("http://www.w3.org/2000/svg",a),f=/([a-z])([A-Z])/g;for(d in c)e.setAttributeNS(null,d.replace(f,"$1-$2").toLowerCase(),c[d]);return b.appendChild(e),e},Ja=O.documentElement||{},Ka=function(){var a,b,c,d=p||/Android/i.test(T)&&!_gsScope.chrome;return O.createElementNS&&!d&&(a=Ia("svg",Ja),b=Ia("rect",a,{width:100,height:50,x:100}),c=b.getBoundingClientRect().width,b.style[Ea]="50% 50%",b.style[Ca]="scaleX(0.5)",d=c===b.getBoundingClientRect().width&&!(n&&Fa),Ja.removeChild(a)),d}(),La=function(a,b,c,d,e,f){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a._gsTransform,w=Qa(a,!0);v&&(t=v.xOrigin,u=v.yOrigin),(!d||(h=d.split(" ")).length<2)&&(n=a.getBBox(),0===n.x&&0===n.y&&n.width+n.height===0&&(n={x:parseFloat(a.hasAttribute("x")?a.getAttribute("x"):a.hasAttribute("cx")?a.getAttribute("cx"):0)||0,y:parseFloat(a.hasAttribute("y")?a.getAttribute("y"):a.hasAttribute("cy")?a.getAttribute("cy"):0)||0,width:0,height:0}),b=ha(b).split(" "),h=[(-1!==b[0].indexOf("%")?parseFloat(b[0])/100*n.width:parseFloat(b[0]))+n.x,(-1!==b[1].indexOf("%")?parseFloat(b[1])/100*n.height:parseFloat(b[1]))+n.y]),c.xOrigin=k=parseFloat(h[0]),c.yOrigin=l=parseFloat(h[1]),d&&w!==Pa&&(m=w[0],n=w[1],o=w[2],p=w[3],q=w[4],r=w[5],s=m*p-n*o,s&&(i=k*(p/s)+l*(-o/s)+(o*r-p*q)/s,j=k*(-n/s)+l*(m/s)-(m*r-n*q)/s,k=c.xOrigin=h[0]=i,l=c.yOrigin=h[1]=j)),v&&(f&&(c.xOffset=v.xOffset,c.yOffset=v.yOffset,v=c),e||e!==!1&&g.defaultSmoothOrigin!==!1?(i=k-t,j=l-u,v.xOffset+=i*w[0]+j*w[2]-i,v.yOffset+=i*w[1]+j*w[3]-j):v.xOffset=v.yOffset=0),f||a.setAttribute("data-svg-origin",h.join(" "))},Ma=function(a){var b,c=P("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),d=this.parentNode,e=this.nextSibling,f=this.style.cssText;if(Ja.appendChild(c),c.appendChild(this),this.style.display="block",a)try{b=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Ma}catch(g){}else this._originalGetBBox&&(b=this._originalGetBBox());return e?d.insertBefore(this,e):d.appendChild(this),Ja.removeChild(c),this.style.cssText=f,b},Na=function(a){try{return a.getBBox()}catch(b){return Ma.call(a,!0)}},Oa=function(a){return!(!Ha||!a.getCTM||a.parentNode&&!a.ownerSVGElement||!Na(a))},Pa=[1,0,0,1,0,0],Qa=function(a,b){var c,d,e,f,g,h,i=a._gsTransform||new Ga,j=1e5,k=a.style;if(Ca?d=_(a,Da,null,!0):a.currentStyle&&(d=a.currentStyle.filter.match(G),d=d&&4===d.length?[d[0].substr(4),Number(d[2].substr(4)),Number(d[1].substr(4)),d[3].substr(4),i.x||0,i.y||0].join(","):""),c=!d||"none"===d||"matrix(1, 0, 0, 1, 0, 0)"===d,!Ca||!(h=!$(a)||"none"===$(a).display)&&a.parentNode||(h&&(f=k.display,k.display="block"),a.parentNode||(g=1,Ja.appendChild(a)),d=_(a,Da,null,!0),c=!d||"none"===d||"matrix(1, 0, 0, 1, 0, 0)"===d,f?k.display=f:h&&Va(k,"display"),g&&Ja.removeChild(a)),(i.svg||a.getCTM&&Oa(a))&&(c&&-1!==(k[Ca]+"").indexOf("matrix")&&(d=k[Ca],c=0),e=a.getAttribute("transform"),c&&e&&(e=a.transform.baseVal.consolidate().matrix,d="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")",c=0)),c)return Pa;for(e=(d||"").match(s)||[],wa=e.length;--wa>-1;)f=Number(e[wa]),e[wa]=(g=f-(f|=0))?(g*j+(0>g?-.5:.5)|0)/j+f:f;return b&&e.length>6?[e[0],e[1],e[4],e[5],e[12],e[13]]:e},Ra=S.getTransform=function(a,c,d,e){if(a._gsTransform&&d&&!e)return a._gsTransform;var f,h,i,j,k,l,m=d?a._gsTransform||new Ga:new Ga,n=m.scaleX<0,o=2e-5,p=1e5,q=Fa?parseFloat(_(a,Ea,c,!1,"0 0 0").split(" ")[2])||m.zOrigin||0:0,r=parseFloat(g.defaultTransformPerspective)||0;if(m.svg=!(!a.getCTM||!Oa(a)),m.svg&&(La(a,_(a,Ea,c,!1,"50% 50%")+"",m,a.getAttribute("data-svg-origin")),Aa=g.useSVGTransformAttr||Ka),f=Qa(a),f!==Pa){if(16===f.length){var s,t,u,v,w,x=f[0],y=f[1],z=f[2],A=f[3],B=f[4],C=f[5],D=f[6],E=f[7],F=f[8],G=f[9],H=f[10],I=f[12],J=f[13],K=f[14],M=f[11],N=Math.atan2(D,H);m.zOrigin&&(K=-m.zOrigin,I=F*K-f[12],J=G*K-f[13],K=H*K+m.zOrigin-f[14]),m.rotationX=N*L,N&&(v=Math.cos(-N),w=Math.sin(-N),s=B*v+F*w,t=C*v+G*w,u=D*v+H*w,F=B*-w+F*v,G=C*-w+G*v,H=D*-w+H*v,M=E*-w+M*v,B=s,C=t,D=u),N=Math.atan2(-z,H),m.rotationY=N*L,N&&(v=Math.cos(-N),w=Math.sin(-N),s=x*v-F*w,t=y*v-G*w,u=z*v-H*w,G=y*w+G*v,H=z*w+H*v,M=A*w+M*v,x=s,y=t,z=u),N=Math.atan2(y,x),m.rotation=N*L,N&&(v=Math.cos(N),w=Math.sin(N),s=x*v+y*w,t=B*v+C*w,u=F*v+G*w,y=y*v-x*w,C=C*v-B*w,G=G*v-F*w,x=s,B=t,F=u),m.rotationX&&Math.abs(m.rotationX)+Math.abs(m.rotation)>359.9&&(m.rotationX=m.rotation=0,m.rotationY=180-m.rotationY),N=Math.atan2(B,C),m.scaleX=(Math.sqrt(x*x+y*y+z*z)*p+.5|0)/p,m.scaleY=(Math.sqrt(C*C+D*D)*p+.5|0)/p,m.scaleZ=(Math.sqrt(F*F+G*G+H*H)*p+.5|0)/p,x/=m.scaleX,B/=m.scaleY,y/=m.scaleX,C/=m.scaleY,Math.abs(N)>o?(m.skewX=N*L,B=0,"simple"!==m.skewType&&(m.scaleY*=1/Math.cos(N))):m.skewX=0,m.perspective=M?1/(0>M?-M:M):0,m.x=I,m.y=J,m.z=K,m.svg&&(m.x-=m.xOrigin-(m.xOrigin*x-m.yOrigin*B),m.y-=m.yOrigin-(m.yOrigin*y-m.xOrigin*C))}else if(!Fa||e||!f.length||m.x!==f[4]||m.y!==f[5]||!m.rotationX&&!m.rotationY){var O=f.length>=6,P=O?f[0]:1,Q=f[1]||0,R=f[2]||0,S=O?f[3]:1;m.x=f[4]||0,m.y=f[5]||0,i=Math.sqrt(P*P+Q*Q),j=Math.sqrt(S*S+R*R),k=P||Q?Math.atan2(Q,P)*L:m.rotation||0,l=R||S?Math.atan2(R,S)*L+k:m.skewX||0,m.scaleX=i,m.scaleY=j,m.rotation=k,m.skewX=l,Fa&&(m.rotationX=m.rotationY=m.z=0,m.perspective=r,m.scaleZ=1),m.svg&&(m.x-=m.xOrigin-(m.xOrigin*P+m.yOrigin*R),m.y-=m.yOrigin-(m.xOrigin*Q+m.yOrigin*S))}Math.abs(m.skewX)>90&&Math.abs(m.skewX)<270&&(n?(m.scaleX*=-1,m.skewX+=m.rotation<=0?180:-180,m.rotation+=m.rotation<=0?180:-180):(m.scaleY*=-1,m.skewX+=m.skewX<=0?180:-180)),m.zOrigin=q;for(h in m)m[h]<o&&m[h]>-o&&(m[h]=0)}return d&&(a._gsTransform=m,m.svg&&(Aa&&a.style[Ca]?b.delayedCall(.001,function(){Va(a.style,Ca)}):!Aa&&a.getAttribute("transform")&&b.delayedCall(.001,function(){a.removeAttribute("transform")}))),m},Sa=function(a){var b,c,d=this.data,e=-d.rotation*K,f=e+d.skewX*K,g=1e5,h=(Math.cos(e)*d.scaleX*g|0)/g,i=(Math.sin(e)*d.scaleX*g|0)/g,j=(Math.sin(f)*-d.scaleY*g|0)/g,k=(Math.cos(f)*d.scaleY*g|0)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,o,q=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,t="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,u=d.x+q*d.xPercent/100,v=d.y+r*d.yPercent/100;if(null!=d.ox&&(n=(d.oxp?q*d.ox*.01:d.ox)-q/2,o=(d.oyp?r*d.oy*.01:d.oy)-r/2,u+=n-(n*h+o*i),v+=o-(n*j+o*k)),s?(n=q/2,o=r/2,t+=", Dx="+(n-(n*h+o*i)+u)+", Dy="+(o-(n*j+o*k)+v)+")"):t+=", sizingMethod='auto expand')",-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?l.filter=b.replace(H,t):l.filter=t+" "+b,(0===a||1===a)&&1===h&&0===i&&0===j&&1===k&&(s&&-1===t.indexOf("Dx=0, Dy=0")||x.test(b)&&100!==parseFloat(RegExp.$1)||-1===b.indexOf(b.indexOf("Alpha"))&&l.removeAttribute("filter")),!s){var y,z,A,B=8>p?1:-1;for(n=d.ieOffsetX||0,o=d.ieOffsetY||0,d.ieOffsetX=Math.round((q-((0>h?-h:h)*q+(0>i?-i:i)*r))/2+u),d.ieOffsetY=Math.round((r-((0>k?-k:k)*r+(0>j?-j:j)*q))/2+v),wa=0;4>wa;wa++)z=fa[wa],y=m[z],c=-1!==y.indexOf("px")?parseFloat(y):aa(this.t,z,parseFloat(y),y.replace(w,""))||0,A=c!==d[z]?2>wa?-d.ieOffsetX:-d.ieOffsetY:2>wa?n-d.ieOffsetX:o-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===wa||2===wa?1:B)))+"px"}}},Ta=S.set3DTransformRatio=S.setTransformRatio=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,o,p,q,r,s,t,u,v,w,x,y,z=this.data,A=this.t.style,B=z.rotation,C=z.rotationX,D=z.rotationY,E=z.scaleX,F=z.scaleY,G=z.scaleZ,H=z.x,I=z.y,J=z.z,L=z.svg,M=z.perspective,N=z.force3D,O=z.skewY,P=z.skewX;if(O&&(P+=O,B+=O),((1===a||0===a)&&"auto"===N&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!N)&&!J&&!M&&!D&&!C&&1===G||Aa&&L||!Fa)return void(B||P||L?(B*=K,x=P*K,y=1e5,c=Math.cos(B)*E,f=Math.sin(B)*E,d=Math.sin(B-x)*-F,g=Math.cos(B-x)*F,x&&"simple"===z.skewType&&(b=Math.tan(x-O*K),b=Math.sqrt(1+b*b),d*=b,g*=b,O&&(b=Math.tan(O*K),b=Math.sqrt(1+b*b),c*=b,f*=b)),L&&(H+=z.xOrigin-(z.xOrigin*c+z.yOrigin*d)+z.xOffset,I+=z.yOrigin-(z.xOrigin*f+z.yOrigin*g)+z.yOffset,Aa&&(z.xPercent||z.yPercent)&&(q=this.t.getBBox(),H+=.01*z.xPercent*q.width,I+=.01*z.yPercent*q.height),q=1e-6,q>H&&H>-q&&(H=0),q>I&&I>-q&&(I=0)),u=(c*y|0)/y+","+(f*y|0)/y+","+(d*y|0)/y+","+(g*y|0)/y+","+H+","+I+")",L&&Aa?this.t.setAttribute("transform","matrix("+u):A[Ca]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix(":"matrix(")+u):A[Ca]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix(":"matrix(")+E+",0,0,"+F+","+H+","+I+")");if(n&&(q=1e-4,q>E&&E>-q&&(E=G=2e-5),q>F&&F>-q&&(F=G=2e-5),!M||z.z||z.rotationX||z.rotationY||(M=0)),B||P)B*=K,r=c=Math.cos(B),s=f=Math.sin(B),P&&(B-=P*K,r=Math.cos(B),s=Math.sin(B),"simple"===z.skewType&&(b=Math.tan((P-O)*K),b=Math.sqrt(1+b*b),r*=b,s*=b,z.skewY&&(b=Math.tan(O*K),b=Math.sqrt(1+b*b),c*=b,f*=b))),d=-s,g=r;else{if(!(D||C||1!==G||M||L))return void(A[Ca]=(z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) translate3d(":"translate3d(")+H+"px,"+I+"px,"+J+"px)"+(1!==E||1!==F?" scale("+E+","+F+")":""));c=g=1,d=f=0}k=1,e=h=i=j=l=m=0,o=M?-1/M:0,p=z.zOrigin,q=1e-6,v=",",w="0",B=D*K,B&&(r=Math.cos(B),s=Math.sin(B),i=-s,l=o*-s,e=c*s,h=f*s,k=r,o*=r,c*=r,f*=r),B=C*K,B&&(r=Math.cos(B),s=Math.sin(B),b=d*r+e*s,t=g*r+h*s,j=k*s,m=o*s,e=d*-s+e*r,h=g*-s+h*r,k*=r,o*=r,d=b,g=t),1!==G&&(e*=G,h*=G,k*=G,o*=G),1!==F&&(d*=F,g*=F,j*=F,m*=F),1!==E&&(c*=E,f*=E,i*=E,l*=E),(p||L)&&(p&&(H+=e*-p,I+=h*-p,J+=k*-p+p),L&&(H+=z.xOrigin-(z.xOrigin*c+z.yOrigin*d)+z.xOffset,I+=z.yOrigin-(z.xOrigin*f+z.yOrigin*g)+z.yOffset),q>H&&H>-q&&(H=w),q>I&&I>-q&&(I=w),q>J&&J>-q&&(J=0)),u=z.xPercent||z.yPercent?"translate("+z.xPercent+"%,"+z.yPercent+"%) matrix3d(":"matrix3d(",u+=(q>c&&c>-q?w:c)+v+(q>f&&f>-q?w:f)+v+(q>i&&i>-q?w:i),u+=v+(q>l&&l>-q?w:l)+v+(q>d&&d>-q?w:d)+v+(q>g&&g>-q?w:g),C||D||1!==G?(u+=v+(q>j&&j>-q?w:j)+v+(q>m&&m>-q?w:m)+v+(q>e&&e>-q?w:e),u+=v+(q>h&&h>-q?w:h)+v+(q>k&&k>-q?w:k)+v+(q>o&&o>-q?w:o)+v):u+=",0,0,0,0,1,0,",u+=H+v+I+v+J+v+(M?1+-J/M:1)+")",A[Ca]=u};j=Ga.prototype,j.x=j.y=j.z=j.skewX=j.skewY=j.rotation=j.rotationX=j.rotationY=j.zOrigin=j.xPercent=j.yPercent=j.xOffset=j.yOffset=0,j.scaleX=j.scaleY=j.scaleZ=1,ya("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(a,b,c,d,f,h,i){if(d._lastParsedTransform===i)return f;d._lastParsedTransform=i;var j,k=i.scale&&"function"==typeof i.scale?i.scale:0;"function"==typeof i[c]&&(j=i[c],i[c]=b),k&&(i.scale=k(r,a));var l,m,n,o,p,s,t,u,v,w=a._gsTransform,x=a.style,y=1e-6,z=Ba.length,A=i,B={},C="transformOrigin",D=Ra(a,e,!0,A.parseTransform),E=A.transform&&("function"==typeof A.transform?A.transform(r,q):A.transform);if(D.skewType=A.skewType||D.skewType||g.defaultSkewType,d._transform=D,E&&"string"==typeof E&&Ca)m=Q.style,m[Ca]=E,m.display="block",m.position="absolute",O.body.appendChild(Q),l=Ra(Q,null,!1),"simple"===D.skewType&&(l.scaleY*=Math.cos(l.skewX*K)),D.svg&&(s=D.xOrigin,t=D.yOrigin,l.x-=D.xOffset,l.y-=D.yOffset,(A.transformOrigin||A.svgOrigin)&&(E={},La(a,ha(A.transformOrigin),E,A.svgOrigin,A.smoothOrigin,!0),s=E.xOrigin,t=E.yOrigin,l.x-=E.xOffset-D.xOffset,l.y-=E.yOffset-D.yOffset),(s||t)&&(u=Qa(Q,!0),l.x-=s-(s*u[0]+t*u[2]),l.y-=t-(s*u[1]+t*u[3]))),O.body.removeChild(Q),l.perspective||(l.perspective=D.perspective),null!=A.xPercent&&(l.xPercent=ja(A.xPercent,D.xPercent)),null!=A.yPercent&&(l.yPercent=ja(A.yPercent,D.yPercent));else if("object"==typeof A){if(l={scaleX:ja(null!=A.scaleX?A.scaleX:A.scale,D.scaleX),scaleY:ja(null!=A.scaleY?A.scaleY:A.scale,D.scaleY),scaleZ:ja(A.scaleZ,D.scaleZ),x:ja(A.x,D.x),y:ja(A.y,D.y),z:ja(A.z,D.z),xPercent:ja(A.xPercent,D.xPercent),yPercent:ja(A.yPercent,D.yPercent),perspective:ja(A.transformPerspective,D.perspective)},p=A.directionalRotation,null!=p)if("object"==typeof p)for(m in p)A[m]=p[m];else A.rotation=p;"string"==typeof A.x&&-1!==A.x.indexOf("%")&&(l.x=0,l.xPercent=ja(A.x,D.xPercent)),"string"==typeof A.y&&-1!==A.y.indexOf("%")&&(l.y=0,l.yPercent=ja(A.y,D.yPercent)),l.rotation=ka("rotation"in A?A.rotation:"shortRotation"in A?A.shortRotation+"_short":"rotationZ"in A?A.rotationZ:D.rotation,D.rotation,"rotation",B),Fa&&(l.rotationX=ka("rotationX"in A?A.rotationX:"shortRotationX"in A?A.shortRotationX+"_short":D.rotationX||0,D.rotationX,"rotationX",B),l.rotationY=ka("rotationY"in A?A.rotationY:"shortRotationY"in A?A.shortRotationY+"_short":D.rotationY||0,D.rotationY,"rotationY",B)),l.skewX=ka(A.skewX,D.skewX),l.skewY=ka(A.skewY,D.skewY)}for(Fa&&null!=A.force3D&&(D.force3D=A.force3D,o=!0),n=D.force3D||D.z||D.rotationX||D.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,n||null==A.scale||(l.scaleZ=1);--z>-1;)v=Ba[z],E=l[v]-D[v],(E>y||-y>E||null!=A[v]||null!=M[v])&&(o=!0,f=new ta(D,v,D[v],E,f),v in B&&(f.e=B[v]),f.xs0=0,f.plugin=h,d._overwriteProps.push(f.n));return E=A.transformOrigin,D.svg&&(E||A.svgOrigin)&&(s=D.xOffset,t=D.yOffset,La(a,ha(E),l,A.svgOrigin,A.smoothOrigin),f=ua(D,"xOrigin",(w?D:l).xOrigin,l.xOrigin,f,C),f=ua(D,"yOrigin",(w?D:l).yOrigin,l.yOrigin,f,C),(s!==D.xOffset||t!==D.yOffset)&&(f=ua(D,"xOffset",w?s:D.xOffset,D.xOffset,f,C),f=ua(D,"yOffset",w?t:D.yOffset,D.yOffset,f,C)),E="0px 0px"),(E||Fa&&n&&D.zOrigin)&&(Ca?(o=!0,v=Ea,E=(E||_(a,v,e,!1,"50% 50%"))+"",f=new ta(x,v,0,0,f,-1,C),f.b=x[v],f.plugin=h,Fa?(m=D.zOrigin,E=E.split(" "),D.zOrigin=(E.length>2&&(0===m||"0px"!==E[2])?parseFloat(E[2]):m)||0,f.xs0=f.e=E[0]+" "+(E[1]||"50%")+" 0px",f=new ta(D,"zOrigin",0,0,f,-1,f.n),f.b=m,f.xs0=f.e=D.zOrigin):f.xs0=f.e=E):ha(E+"",D)),o&&(d._transformType=D.svg&&Aa||!n&&3!==this._transformType?2:3),j&&(i[c]=j),k&&(i.scale=k),f},prefix:!0}),ya("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),ya("borderRadius",{defaultValue:"0px",parser:function(a,b,c,f,g,h){b=this.format(b);var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],z=a.style;for(q=parseFloat(a.offsetWidth),r=parseFloat(a.offsetHeight),i=b.split(" "),j=0;j<y.length;j++)this.p.indexOf("border")&&(y[j]=Z(y[j])),m=l=_(a,y[j],e,!1,"0px"),-1!==m.indexOf(" ")&&(l=m.split(" "),m=l[0],l=l[1]),n=k=i[j],o=parseFloat(m),t=m.substr((o+"").length),u="="===n.charAt(1),u?(p=parseInt(n.charAt(0)+"1",10),n=n.substr(2),p*=parseFloat(n),s=n.substr((p+"").length-(0>p?1:0))||""):(p=parseFloat(n),s=n.substr((p+"").length)),""===s&&(s=d[c]||t),s!==t&&(v=aa(a,"borderLeft",o,t),w=aa(a,"borderTop",o,t),"%"===s?(m=v/q*100+"%",l=w/r*100+"%"):"em"===s?(x=aa(a,"borderLeft",1,"em"),m=v/x+"em",l=w/x+"em"):(m=v+"px",l=w+"px"),u&&(n=parseFloat(m)+p+s,k=parseFloat(l)+p+s)),g=va(z,y[j],m+" "+l,n+" "+k,!1,"0px",g);return g},prefix:!0,formatter:qa("0px 0px 0px 0px",!1,!0)}),ya("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(a,b,c,d,f,g){return va(a.style,c,this.format(_(a,c,e,!1,"0px 0px")),this.format(b),!1,"0px",f)},prefix:!0,formatter:qa("0px 0px",!1,!0)}),ya("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,f,g){var h,i,j,k,l,m,n="background-position",o=e||$(a,null),q=this.format((o?p?o.getPropertyValue(n+"-x")+" "+o.getPropertyValue(n+"-y"):o.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(-1!==q.indexOf("%")!=(-1!==r.indexOf("%"))&&r.split(",").length<2&&(m=_(a,"backgroundImage").replace(D,""),m&&"none"!==m)){for(h=q.split(" "),i=r.split(" "),R.setAttribute("src",m),j=2;--j>-1;)q=h[j],k=-1!==q.indexOf("%"),k!==(-1!==i[j].indexOf("%"))&&(l=0===j?a.offsetWidth-R.width:a.offsetHeight-R.height,h[j]=k?parseFloat(q)/100*l+"px":parseFloat(q)/l*100+"%");q=h.join(" ")}return this.parseComplex(a.style,q,r,f,g)},formatter:ha}),ya("backgroundSize",{defaultValue:"0 0",formatter:function(a){return a+="",ha(-1===a.indexOf(" ")?a+" "+a:a)}}),ya("perspective",{defaultValue:"0px",prefix:!0}),ya("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),ya("transformStyle",{prefix:!0}),ya("backfaceVisibility",{prefix:!0}),ya("userSelect",{prefix:!0}),ya("margin",{parser:ra("marginTop,marginRight,marginBottom,marginLeft")}),ya("padding",{parser:ra("paddingTop,paddingRight,paddingBottom,paddingLeft")}),ya("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,f,g){var h,i,j;return 9>p?(i=a.currentStyle,j=8>p?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format(_(a,this.p,e,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,f,g)}}),ya("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),ya("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),ya("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,f,g){var h=_(a,"borderTopWidth",e,!1,"0px"),i=this.format(b).split(" "),j=i[0].replace(w,"");return"px"!==j&&(h=parseFloat(h)/aa(a,"borderTopWidth",1,j)+j),this.parseComplex(a.style,this.format(h+" "+_(a,"borderTopStyle",e,!1,"solid")+" "+_(a,"borderTopColor",e,!1,"#000")),i.join(" "),f,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(pa)||["#000"])[0]}}),ya("borderWidth",{parser:ra("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),ya("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e,f){var g=a.style,h="cssFloat"in g?"cssFloat":"styleFloat";return new ta(g,h,0,0,e,-1,c,!1,0,g[h],b)}});var Ua=function(a){var b,c=this.t,d=c.filter||_(this.data,"filter")||"",e=this.s+this.c*a|0;100===e&&(-1===d.indexOf("atrix(")&&-1===d.indexOf("radient(")&&-1===d.indexOf("oader(")?(c.removeAttribute("filter"),b=!_(this.data,"filter")):(c.filter=d.replace(z,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity="+e+")"),-1===d.indexOf("pacity")?0===e&&this.xn1||(c.filter=d+" alpha(opacity="+e+")"):c.filter=d.replace(x,"opacity="+e))};ya("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,f,g){var h=parseFloat(_(a,"opacity",e,!1,"1")),i=a.style,j="autoAlpha"===c;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),j&&1===h&&"hidden"===_(a,"visibility",e)&&0!==b&&(h=0),U?f=new ta(i,"opacity",h,b-h,f):(f=new ta(i,"opacity",100*h,100*(b-h),f),f.xn1=j?1:0,i.zoom=1,f.type=2,f.b="alpha(opacity="+f.s+")",f.e="alpha(opacity="+(f.s+f.c)+")",f.data=a,f.plugin=g,f.setRatio=Ua),j&&(f=new ta(i,"visibility",0,0,f,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),f.xs0="inherit",d._overwriteProps.push(f.n),d._overwriteProps.push(c)),f}});var Va=function(a,b){b&&(a.removeProperty?(("ms"===b.substr(0,2)||"webkit"===b.substr(0,6))&&(b="-"+b),a.removeProperty(b.replace(B,"-$1").toLowerCase())):a.removeAttribute(b))},Wa=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.setAttribute("class",0===a?this.b:this.e);for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Va(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};ya("className",{parser:function(a,b,d,f,g,h,i){var j,k,l,m,n,o=a.getAttribute("class")||"",p=a.style.cssText;if(g=f._classNamePT=new ta(a,d,0,0,g,2),g.setRatio=Wa,g.pr=-11,c=!0,g.b=o,k=ca(a,e),l=a._gsClassPT){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(new RegExp("(?:\\s|^)"+b.substr(2)+"(?![\\w-])"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),a.setAttribute("class",g.e),j=da(a,k,ca(a),i,m),a.setAttribute("class",o),g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=f.parse(a,j.difs,g,h)}});var Xa=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,d,e,f,g=this.t.style,h=i.transform.parse;if("all"===this.e)g.cssText="",e=!0;else for(b=this.e.split(" ").join("").split(","),d=b.length;--d>-1;)c=b[d],i[c]&&(i[c].parse===h?e=!0:c="transformOrigin"===c?Ea:i[c].p),Va(g,c);e&&(Va(g,Ca),f=this.t._gsTransform,f&&(f.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(ya("clearProps",{parser:function(a,b,d,e,f){return f=new ta(a,d,0,0,f,2),f.setRatio=Xa,f.e=b,f.pr=-10,f.data=e._tween,c=!0,f}}),j="bezier,throwProps,physicsProps,physics2D".split(","),wa=j.length;wa--;)za(j[wa]);j=g.prototype,j._firstPT=j._lastParsedTransform=j._transform=null,j._onInitTween=function(a,b,h,j){if(!a.nodeType)return!1;this._target=q=a,this._tween=h,this._vars=b,r=j,k=b.autoRound,c=!1,d=b.suffixMap||g.suffixMap,e=$(a,""),f=this._overwriteProps;var n,p,s,t,u,v,w,x,z,A=a.style;if(l&&""===A.zIndex&&(n=_(a,"zIndex",e),("auto"===n||""===n)&&this._addLazySet(A,"zIndex",0)),"string"==typeof b&&(t=A.cssText,n=ca(a,e),A.cssText=t+";"+b,n=da(a,n,ca(a)).difs,!U&&y.test(b)&&(n.opacity=parseFloat(RegExp.$1)),b=n,A.cssText=t),b.className?this._firstPT=p=i.className.parse(a,b.className,"className",this,null,null,b):this._firstPT=p=this.parse(a,b,null),this._transformType){for(z=3===this._transformType,Ca?m&&(l=!0,""===A.zIndex&&(w=_(a,"zIndex",e),("auto"===w||""===w)&&this._addLazySet(A,"zIndex",0)),o&&this._addLazySet(A,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(z?"visible":"hidden"))):A.zoom=1,s=p;s&&s._next;)s=s._next;x=new ta(a,"transform",0,0,null,2),this._linkCSSP(x,null,s),x.setRatio=Ca?Ta:Sa,x.data=this._transform||Ra(a,e,!0),x.tween=h,x.pr=-1,f.pop()}if(c){for(;p;){for(v=p._next,s=t;s&&s.pr>p.pr;)s=s._next;(p._prev=s?s._prev:u)?p._prev._next=p:t=p,(p._next=s)?s._prev=p:u=p,p=v}this._firstPT=t}return!0},j.parse=function(a,b,c,f){var g,h,j,l,m,n,o,p,s,t,u=a.style;for(g in b){if(n=b[g],"function"==typeof n&&(n=n(r,q)),h=i[g])c=h.parse(a,n,g,this,c,f,b);else{if("--"===g.substr(0,2)){this._tween._propLookup[g]=this._addTween.call(this._tween,a.style,"setProperty",$(a).getPropertyValue(g)+"",n+"",g,!1,g);continue}m=_(a,g,e)+"",s="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||-1!==g.indexOf("Color")||s&&A.test(n)?(s||(n=na(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=va(u,g,m,n,!0,"transparent",c,0,f)):s&&J.test(n)?c=va(u,g,m,n,!0,null,c,0,f):(j=parseFloat(m),o=j||0===j?m.substr((j+"").length):"",(""===m||"auto"===m)&&("width"===g||"height"===g?(j=ga(a,g,e),o="px"):"left"===g||"top"===g?(j=ba(a,g,e),o="px"):(j="opacity"!==g?0:1,o="")),t=s&&"="===n.charAt(1),t?(l=parseInt(n.charAt(0)+"1",10),n=n.substr(2),l*=parseFloat(n),p=n.replace(w,"")):(l=parseFloat(n),p=s?n.replace(w,""):""),""===p&&(p=g in d?d[g]:o),n=l||0===l?(t?l+j:l)+p:b[g],o!==p&&(""!==p||"lineHeight"===g)&&(l||0===l)&&j&&(j=aa(a,g,j,o),"%"===p?(j/=aa(a,g,100,"%")/100,b.strictUnits!==!0&&(m=j+"%")):"em"===p||"rem"===p||"vw"===p||"vh"===p?j/=aa(a,g,1,p):"px"!==p&&(l=aa(a,g,l,p),p="px"),t&&(l||0===l)&&(n=l+j+p)),t&&(l+=j),!j&&0!==j||!l&&0!==l?void 0!==u[g]&&(n||n+""!="NaN"&&null!=n)?(c=new ta(u,g,l||j||0,0,c,-1,g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&-1===g.indexOf("Style")?n:m):W("invalid "+g+" tween value: "+b[g]):(c=new ta(u,g,j,l-j,c,0,g,k!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p))}f&&c&&!c.plugin&&(c.plugin=f)}return c},j.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=Math.round(b):f>b&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else-1===e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;){if(2!==e.type)if(e.r&&-1!==e.type)if(b=Math.round(e.s+e.c),e.type){if(1===e.type){for(d=e.l,c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}}else e.t[e.p]=b+e.xs0;else e.t[e.p]=e.e;else e.setRatio(a);e=e._next}},j._enableTransforms=function(a){this._transform=this._transform||Ra(this._target,e,!0),this._transformType=this._transform.svg&&Aa||!a&&3!==this._transformType?2:3};var Ya=function(a){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};j._addLazySet=function(a,b,c){var d=this._firstPT=new ta(a,b,0,0,this._firstPT,2);d.e=c,d.setRatio=Ya,d.data=this},j._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,d=!0),c?c._next=a:d||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=c),a},j._mod=function(a){for(var b=this._firstPT;b;)"function"==typeof a[b.p]&&a[b.p]===Math.round&&(b.r=1),b=b._next},j._kill=function(b){var c,d,e,f=b;if(b.autoAlpha||b.alpha){f={};for(d in b)f[d]=b[d];f.opacity=1,f.autoAlpha&&(f.visibility=1)}for(b.className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),c=this._firstPT;c;)c.plugin&&c.plugin!==d&&c.plugin._kill&&(c.plugin._kill(b),d=c.plugin),c=c._next;return a.prototype._kill.call(this,f)};var Za=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)Za(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(ca(f)),c&&c.push(f)),1!==g&&9!==g&&11!==g||!f.childNodes.length||Za(f,b,c)};return g.cascadeTo=function(a,c,d){var e,f,g,h,i=b.to(a,c,d),j=[i],k=[],l=[],m=[],n=b._internals.reservedProps;for(a=i._targets||i.target,Za(a,k,m),i.render(c,!0,!0),Za(a,l),i.render(0,!0,!0),i._enabled(!0),e=m.length;--e>-1;)if(f=da(m[e],k[e],l[e]),f.firstMPT){f=f.difs;for(g in d)n[g]&&(f[g]=d[g]);h={};for(g in f)h[g]=k[e][g];j.push(b.fromTo(m[e],c,h,f))}return j},a.activate([g]),g},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(a){"use strict";var b=function(){return(_gsScope.GreenSockGlobals||_gsScope)[a]};"undefined"!=typeof module&&module.exports?(require("../TweenLite.min.js"),module.exports=b()):"function"==typeof define&&define.amd&&define(["TweenLite"],b)}("CSSPlugin");;var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var a=(_gsScope.document||{}).documentElement,b=_gsScope,c=function(c,d){var e="x"===d?"Width":"Height",f="scroll"+e,g="client"+e,h=document.body;return c===b||c===a||c===h?Math.max(a[f],h[f])-(b["inner"+e]||a[g]||h[g]):c[f]-c["offset"+e]},d=function(a){return"string"==typeof a&&(a=TweenLite.selector(a)),a.length&&a!==b&&a[0]&&a[0].style&&!a.nodeType&&(a=a[0]),a===b||a.nodeType&&a.style?a:null},e=function(c,d){var e="scroll"+("x"===d?"Left":"Top");return c===b&&(null!=c.pageXOffset?e="page"+d.toUpperCase()+"Offset":c=null!=a[e]?a:document.body),function(){return c[e]}},f=function(c,f){var g=d(c).getBoundingClientRect(),h=!f||f===b||f===document.body,i=(h?a:f).getBoundingClientRect(),j={x:g.left-i.left,y:g.top-i.top};return!h&&f&&(j.x+=e(f,"x")(),j.y+=e(f,"y")()),j},g=function(a,b,d){var e=typeof a;return isNaN(a)?"number"===e||"string"===e&&"="===a.charAt(1)?a:"max"===a?c(b,d):Math.min(c(b,d),f(a,b)[d]):parseFloat(a)},h=_gsScope._gsDefine.plugin({propName:"scrollTo",API:2,global:!0,version:"1.9.0",init:function(a,c,d){return this._wdw=a===b,this._target=a,this._tween=d,"object"!=typeof c?(c={y:c},"string"==typeof c.y&&"max"!==c.y&&"="!==c.y.charAt(1)&&(c.x=c.y)):c.nodeType&&(c={y:c,x:c}),this.vars=c,this._autoKill=c.autoKill!==!1,this.getX=e(a,"x"),this.getY=e(a,"y"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=c.x?(this._addTween(this,"x",this.x,g(c.x,a,"x")-(c.offsetX||0),"scrollTo_x",!0),this._overwriteProps.push("scrollTo_x")):this.skipX=!0,null!=c.y?(this._addTween(this,"y",this.y,g(c.y,a,"y")-(c.offsetY||0),"scrollTo_y",!0),this._overwriteProps.push("scrollTo_y")):this.skipY=!0,!0},set:function(a){this._super.setRatio.call(this,a);var d=this._wdw||!this.skipX?this.getX():this.xPrev,e=this._wdw||!this.skipY?this.getY():this.yPrev,f=e-this.yPrev,g=d-this.xPrev,i=h.autoKillThreshold;this.x<0&&(this.x=0),this.y<0&&(this.y=0),this._autoKill&&(!this.skipX&&(g>i||-i>g)&&d<c(this._target,"x")&&(this.skipX=!0),!this.skipY&&(f>i||-i>f)&&e<c(this._target,"y")&&(this.skipY=!0),this.skipX&&this.skipY&&(this._tween.kill(),this.vars.onAutoKill&&this.vars.onAutoKill.apply(this.vars.onAutoKillScope||this._tween,this.vars.onAutoKillParams||[]))),this._wdw?b.scrollTo(this.skipX?d:this.x,this.skipY?e:this.y):(this.skipY||(this._target.scrollTop=this.y),this.skipX||(this._target.scrollLeft=this.x)),this.xPrev=this.x,this.yPrev=this.y}}),i=h.prototype;h.max=c,h.getOffset=f,h.buildGetter=e,h.autoKillThreshold=7,i._kill=function(a){return a.scrollTo_x&&(this.skipX=!0),a.scrollTo_y&&(this.skipY=!0),this._super._kill.call(this,a)}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(a){"use strict";var b=function(){return(_gsScope.GreenSockGlobals||_gsScope)[a]};"undefined"!=typeof module&&module.exports?(require("../TweenLite.min.js"),module.exports=b()):"function"==typeof define&&define.amd&&define(["TweenLite"],b)}("ScrollToPlugin");;!function(a,b){"use strict";var c={},d=a.document,e=a.GreenSockGlobals=a.GreenSockGlobals||a;if(!e.TweenLite){var f,g,h,i,j,k=function(a){var b,c=a.split("."),d=e;for(b=0;b<c.length;b++)d[c[b]]=d=d[c[b]]||{};return d},l=k("com.greensock"),m=1e-10,n=function(a){var b,c=[],d=a.length;for(b=0;b!==d;c.push(a[b++]));return c},o=function(){},p=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return null!=c&&(c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b)}}(),q={},r=function(d,f,g,h){this.sc=q[d]?q[d].sc:[],q[d]=this,this.gsClass=null,this.func=g;var i=[];this.check=function(j){for(var l,m,n,o,p=f.length,s=p;--p>-1;)(l=q[f[p]]||new r(f[p],[])).gsClass?(i[p]=l.gsClass,s--):j&&l.sc.push(this);if(0===s&&g){if(m=("com.greensock."+d).split("."),n=m.pop(),o=k(m.join("."))[n]=this.gsClass=g.apply(g,i),h)if(e[n]=c[n]=o,"undefined"!=typeof module&&module.exports)if(d===b){module.exports=c[b]=o;for(p in c)o[p]=c[p]}else c[b]&&(c[b][n]=o);else"function"==typeof define&&define.amd&&define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+d.split(".").pop(),[],function(){return o});for(p=0;p<this.sc.length;p++)this.sc[p].check()}},this.check(!0)},s=a._gsDefine=function(a,b,c,d){return new r(a,b,c,d)},t=l._class=function(a,b,c){return b=b||function(){},s(a,[],function(){return b},c),b};s.globals=e;var u=[0,0,1,1],v=t("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?u.concat(b):u},!0),w=v.map={},x=v.register=function(a,b,c,d){for(var e,f,g,h,i=b.split(","),j=i.length,k=(c||"easeIn,easeOut,easeInOut").split(",");--j>-1;)for(f=i[j],e=d?t("easing."+f,null,!0):l.easing[f]||{},g=k.length;--g>-1;)h=k[g],w[f+"."+h]=w[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(h=v.prototype,h._calcEnd=!1,h.getRatio=function(a){if(this._func)return this._params[0]=a,this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:.5>a?d/2:1-d/2},f=["Linear","Quad","Cubic","Quart","Quint,Strong"],g=f.length;--g>-1;)h=f[g]+",Power"+g,x(new v(null,null,1,g),h,"easeOut",!0),x(new v(null,null,2,g),h,"easeIn"+(0===g?",easeNone":"")),x(new v(null,null,3,g),h,"easeInOut");w.linear=l.easing.Linear.easeIn,w.swing=l.easing.Quad.easeInOut;var y=t("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});h=y.prototype,h.addEventListener=function(a,b,c,d,e){e=e||0;var f,g,h=this._listeners[a],k=0;for(this!==i||j||i.wake(),null==h&&(this._listeners[a]=h=[]),g=h.length;--g>-1;)f=h[g],f.c===b&&f.s===c?h.splice(g,1):0===k&&f.pr<e&&(k=g+1);h.splice(k,0,{c:b,s:c,up:d,pr:e})},h.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},h.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,b>1&&(e=e.slice(0)),c=this._eventTarget;--b>-1;)d=e[b],d&&(d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c))};var z=a.requestAnimationFrame,A=a.cancelAnimationFrame,B=Date.now||function(){return(new Date).getTime()},C=B();for(f=["ms","moz","webkit","o"],g=f.length;--g>-1&&!z;)z=a[f[g]+"RequestAnimationFrame"],A=a[f[g]+"CancelAnimationFrame"]||a[f[g]+"CancelRequestAnimationFrame"];t("Ticker",function(a,b){var c,e,f,g,h,k=this,l=B(),n=b!==!1&&z?"auto":!1,p=500,q=33,r="tick",s=function(a){var b,d,i=B()-C;i>p&&(l+=i-q),C+=i,k.time=(C-l)/1e3,b=k.time-h,(!c||b>0||a===!0)&&(k.frame++,h+=b+(b>=g?.004:g-b),d=!0),a!==!0&&(f=e(s)),d&&k.dispatchEvent(r)};y.call(k),k.time=k.frame=0,k.tick=function(){s(!0)},k.lagSmoothing=function(a,b){return arguments.length?(p=a||1/m,void(q=Math.min(b,p,0))):1/m>p},k.sleep=function(){null!=f&&(n&&A?A(f):clearTimeout(f),e=o,f=null,k===i&&(j=!1))},k.wake=function(a){null!==f?k.sleep():a?l+=-C+(C=B()):k.frame>10&&(C=B()-p+5),e=0===c?o:n&&z?z:function(a){return setTimeout(a,1e3*(h-k.time)+1|0)},k===i&&(j=!0),s(2)},k.fps=function(a){return arguments.length?(c=a,g=1/(c||60),h=this.time+g,void k.wake()):c},k.useRAF=function(a){return arguments.length?(k.sleep(),n=a,void k.fps(c)):n},k.fps(a),setTimeout(function(){"auto"===n&&k.frame<5&&"hidden"!==(d||{}).visibilityState&&k.useRAF(!1)},1500)}),h=l.Ticker.prototype=new l.events.EventDispatcher,h.constructor=l.Ticker;var D=t("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,X){j||i.wake();var c=this.vars.useFrames?W:X;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});i=D.ticker=new l.Ticker,h=D.prototype,h._dirty=h._gc=h._initted=h._paused=!1,h._totalTime=h._time=0,h._rawPrevTime=-1,h._next=h._last=h._onUpdate=h._timeline=h.timeline=null,h._paused=!1;var E=function(){j&&B()-C>2e3&&("hidden"!==(d||{}).visibilityState||!i.lagSmoothing())&&i.wake();var a=setTimeout(E,2e3);a.unref&&a.unref()};E(),h.play=function(a,b){return null!=a&&this.seek(a,b),this.reversed(!1).paused(!1)},h.pause=function(a,b){return null!=a&&this.seek(a,b),this.paused(!0)},h.resume=function(a,b){return null!=a&&this.seek(a,b),this.paused(!1)},h.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},h.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},h.reverse=function(a,b){return null!=a&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},h.render=function(a,b,c){},h.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},h.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime(!0))>=c&&a<c+this.totalDuration()/this._timeScale-1e-7},h._enabled=function(a,b){return j||i.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},h._kill=function(a,b){return this._enabled(!1,!1)},h.kill=function(a,b){return this._kill(a,b),this},h._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},h._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},h._callback=function(a){var b=this.vars,c=b[a],d=b[a+"Params"],e=b[a+"Scope"]||b.callbackScope||this,f=d?d.length:0;switch(f){case 0:c.call(e);break;case 1:c.call(e,d[0]);break;case 2:c.call(e,d[0],d[1]);break;default:c.apply(e,d)}},h.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=p(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},h.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},h.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},h.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},h.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},h.totalTime=function(a,b,c){if(j||i.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==a||0===this._duration)&&(J.length&&Z(),this.render(a,b,!1),J.length&&Z())}return this},h.progress=h.totalProgress=function(a,b){var c=this.duration();return arguments.length?this.totalTime(c*a,b):c?this._time/c:this.ratio},h.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},h.endTime=function(a){return this._startTime+(0!=a?this.totalDuration():this.duration())/this._timeScale},h.timeScale=function(a){if(!arguments.length)return this._timeScale;var b,c;for(a=a||m,this._timeline&&this._timeline.smoothChildTiming&&(b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime(),this._startTime=c-(c-this._startTime)*this._timeScale/a),this._timeScale=a,c=this.timeline;c&&c.timeline;)c._dirty=!0,c.totalDuration(),c=c.timeline;return this},h.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},h.paused=function(a){if(!arguments.length)return this._paused;var b,c,d=this._timeline;return a!=this._paused&&d&&(j||a||i.wake(),b=d.rawTime(),c=b-this._pauseTime,!a&&d.smoothChildTiming&&(this._startTime+=c,this._uncache(!1)),this._pauseTime=a?b:null,this._paused=a,this._active=this.isActive(),!a&&0!==c&&this._initted&&this.duration()&&(b=d.smoothChildTiming?this._totalTime:(b-this._startTime)/this._timeScale,this.render(b,b===this._totalTime,!0))),this._gc&&!a&&this._enabled(!0,!1),this};var F=t("core.SimpleTimeline",function(a){D.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});h=F.prototype=new D,h.constructor=F,h.kill()._gc=!1,h._first=h._last=h._recent=null,h._sortChildren=!1,h.add=h.insert=function(a,b,c,d){var e,f;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),e=this._last,this._sortChildren)for(f=a._startTime;e&&e._startTime>f;)e=e._prev;return e?(a._next=e._next,e._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=e,this._recent=a,this._timeline&&this._uncache(!0),this},h._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),a._next=a._prev=a.timeline=null,a===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},h.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused&&!e._gc)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},h.rawTime=function(){return j||i.wake(),this._totalTime};var G=t("TweenLite",function(b,c,d){if(D.call(this,c,d),this.render=G.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:G.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?V[G.defaultOverwrite]:"number"==typeof i?i>>0:V[i],(h||b instanceof Array||b.push&&p(b))&&"number"!=typeof b[0])for(this._targets=g=n(b),this._propLookup=[],this._siblings=[],e=0;e<g.length;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(n(f))):(this._siblings[e]=$(f,this,!1),1===i&&this._siblings[e].length>1&&aa(f,this,null,1,this._siblings[e])):(f=g[e--]=G.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=$(b,this,!1),1===i&&this._siblings.length>1&&aa(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-m,this.render(Math.min(0,-this._delay)))},!0),H=function(b){return b&&b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},I=function(a,b){var c,d={};for(c in a)U[c]||c in b&&"transform"!==c&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!R[c]||R[c]&&R[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};h=G.prototype=new D,h.constructor=G,h.kill()._gc=!1,h.ratio=0,h._firstPT=h._targets=h._overwrittenProps=h._startAt=null,h._notifyPluginsOfEnabled=h._lazy=!1,G.version="1.20.4",G.defaultEase=h._ease=new v(null,null,1,1),G.defaultOverwrite="auto",G.ticker=i,G.autoSleep=120,G.lagSmoothing=function(a,b){i.lagSmoothing(a,b)},G.selector=a.$||a.jQuery||function(b){var c=a.$||a.jQuery;return c?(G.selector=c,c(b)):"undefined"==typeof d?b:d.querySelectorAll?d.querySelectorAll(b):d.getElementById("#"===b.charAt(0)?b.substr(1):b)};var J=[],K={},L=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,M=/[\+-]=-?[\.\d]/,N=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.blob?1===a&&null!=this.end?this.end:a?this.join(""):this.start:c.c*a+c.s,c.m?b=c.m(b,this._target||c.t):d>b&&b>-d&&!c.blob&&(b=0),c.f?c.fp?c.t[c.p](c.fp,b):c.t[c.p](b):c.t[c.p]=b,c=c._next},O=function(a,b,c,d){var e,f,g,h,i,j,k,l=[],m=0,n="",o=0;for(l.start=a,l.end=b,a=l[0]=a+"",b=l[1]=b+"",c&&(c(l),a=l[0],b=l[1]),l.length=0,e=a.match(L)||[],f=b.match(L)||[],d&&(d._next=null,d.blob=1,l._firstPT=l._applyPT=d),i=f.length,h=0;i>h;h++)k=f[h],j=b.substr(m,b.indexOf(k,m)-m),n+=j||!h?j:",",m+=j.length,o?o=(o+1)%5:"rgba("===j.substr(-5)&&(o=1),k===e[h]||e.length<=h?n+=k:(n&&(l.push(n),n=""),g=parseFloat(e[h]),l.push(g),l._firstPT={_next:l._firstPT,t:l,p:l.length-1,s:g,c:("="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*parseFloat(k.substr(2)):parseFloat(k)-g)||0,f:0,m:o&&4>o?Math.round:0}),m+=k.length;return n+=b.substr(m),n&&l.push(n),l.setRatio=N,M.test(b)&&(l.end=null),l},P=function(a,b,c,d,e,f,g,h,i){"function"==typeof d&&(d=d(i||0,a));var j,k=typeof a[b],l="function"!==k?"":b.indexOf("set")||"function"!=typeof a["get"+b.substr(3)]?b:"get"+b.substr(3),m="get"!==c?c:l?g?a[l](g):a[l]():a[b],n="string"==typeof d&&"="===d.charAt(1),o={t:a,p:b,s:m,f:"function"===k,pg:0,n:e||b,m:f?"function"==typeof f?f:Math.round:0,pr:0,c:n?parseInt(d.charAt(0)+"1",10)*parseFloat(d.substr(2)):parseFloat(d)-m||0};return("number"!=typeof m||"number"!=typeof d&&!n)&&(g||isNaN(m)||!n&&isNaN(d)||"boolean"==typeof m||"boolean"==typeof d?(o.fp=g,j=O(m,n?parseFloat(o.s)+o.c+(o.s+"").replace(/[0-9\-\.]/g,""):d,h||G.defaultStringFilter,o),o={t:j,p:"setRatio",s:0,c:1,f:2,pg:0,n:e||b,pr:0,m:0}):(o.s=parseFloat(m),n||(o.c=parseFloat(d)-o.s||0))),o.c?((o._next=this._firstPT)&&(o._next._prev=o),this._firstPT=o,o):void 0},Q=G._internals={isArray:p,isSelector:H,lazyTweens:J,blobDif:O},R=G._plugins={},S=Q.tweenLookup={},T=0,U=Q.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},V={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},W=D._rootFramesTimeline=new F,X=D._rootTimeline=new F,Y=30,Z=Q.lazyRender=function(){var a,b=J.length;for(K={};--b>-1;)a=J[b],a&&a._lazy!==!1&&(a.render(a._lazy[0],a._lazy[1],!0),a._lazy=!1);J.length=0};X._startTime=i.time,W._startTime=i.frame,X._active=W._active=!0,setTimeout(Z,1),D._updateRoot=G.render=function(){var a,b,c;if(J.length&&Z(),X.render((i.time-X._startTime)*X._timeScale,!1,!1),W.render((i.frame-W._startTime)*W._timeScale,!1,!1),J.length&&Z(),i.frame>=Y){Y=i.frame+(parseInt(G.autoSleep,10)||120);for(c in S){for(b=S[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete S[c]}if(c=X._first,(!c||c._paused)&&G.autoSleep&&!W._first&&1===i._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||i.sleep()}}},i.addEventListener("tick",D._updateRoot);var $=function(a,b,c){var d,e,f=a._gsTweenID;if(S[f||(a._gsTweenID=f="t"+T++)]||(S[f]={target:a,tweens:[]}),b&&(d=S[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return S[f].tweens},_=function(a,b,c,d){var e,f,g=a.vars.onOverwrite;return g&&(e=g(a,b,c,d)),g=G.onOverwrite,g&&(f=g(a,b,c,d)),e!==!1&&f!==!1},aa=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;i>f;f++)if((h=e[f])!==b)h._gc||h._kill(null,a,b)&&(g=!0);else if(5===d)break;return g}var j,k=b._startTime+m,l=[],n=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(j=j||ba(b,0,o),0===ba(h,j,o)&&(l[n++]=h)):h._startTime<=k&&h._startTime+h.totalDuration()/h._timeScale>k&&((o||!h._initted)&&k-h._startTime<=2e-10||(l[n++]=h)));for(f=n;--f>-1;)if(h=l[f],2===d&&h._kill(c,a,b)&&(g=!0),2!==d||!h._firstPT&&h._initted){if(2!==d&&!_(h,b))continue;h._enabled(!1,!1)&&(g=!0)}return g},ba=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2*m>f-b?m:(f+=a.totalDuration()/a._timeScale/e)>b+m?0:f-b-m};h._init=function(){var a,b,c,d,e,f,g=this.vars,h=this._overwrittenProps,i=this._duration,j=!!g.immediateRender,k=g.ease;if(g.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),e={};for(d in g.startAt)e[d]=g.startAt[d];if(e.data="isStart",e.overwrite=!1,e.immediateRender=!0,e.lazy=j&&g.lazy!==!1,e.startAt=e.delay=null,e.onUpdate=g.onUpdate,e.onUpdateParams=g.onUpdateParams,e.onUpdateScope=g.onUpdateScope||g.callbackScope||this,this._startAt=G.to(this.target,0,e),j)if(this._time>0)this._startAt=null;else if(0!==i)return}else if(g.runBackwards&&0!==i)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(j=!1),c={};for(d in g)U[d]&&"autoCSS"!==d||(c[d]=g[d]);if(c.overwrite=0,c.data="isFromStart",c.lazy=j&&g.lazy!==!1,c.immediateRender=j,this._startAt=G.to(this.target,0,c),j){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=k=k?k instanceof v?k:"function"==typeof k?new v(k,g.easeParams):w[k]||G.defaultEase:G.defaultEase,g.easeParams instanceof Array&&k.config&&(this._ease=k.config.apply(k,g.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(f=this._targets.length,a=0;f>a;a++)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],h?h[a]:null,a)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,h,0);if(b&&G._onPluginEvent("_onInitAllProps",this),h&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),g.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=g.onUpdate,this._initted=!0},h._initProps=function(b,c,d,e,f){var g,h,i,j,k,l;if(null==b)return!1;K[b._gsTweenID]&&Z(),this.vars.css||b.style&&b!==a&&b.nodeType&&R.css&&this.vars.autoCSS!==!1&&I(this.vars,b);for(g in this.vars)if(l=this.vars[g],U[g])l&&(l instanceof Array||l.push&&p(l))&&-1!==l.join("").indexOf("{self}")&&(this.vars[g]=l=this._swapSelfInParams(l,this));else if(R[g]&&(j=new R[g])._onInitTween(b,this.vars[g],this,f)){for(this._firstPT=k={_next:this._firstPT,t:j,p:"setRatio",s:0,c:1,f:1,n:g,pg:1,pr:j._priority,m:0},h=j._overwriteProps.length;--h>-1;)c[j._overwriteProps[h]]=this._firstPT;(j._priority||j._onInitAllProps)&&(i=!0),(j._onDisable||j._onEnable)&&(this._notifyPluginsOfEnabled=!0),k._next&&(k._next._prev=k)}else c[g]=P.call(this,b,g,"get",l,g,0,null,this.vars.stringFilter,f);return e&&this._kill(e,b)?this._initProps(b,c,d,e,f):this._overwrite>1&&this._firstPT&&d.length>1&&aa(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e,f)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(K[b._gsTweenID]=!0),i)},h.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration,j=this._rawPrevTime;if(a>=i-1e-7&&a>=0)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete",c=c||this._timeline.autoRemoveChildren),0===i&&(this._initted||!this.vars.lazy||c)&&(this._startTime===this._timeline._duration&&(a=0),(0>j||0>=a&&a>=-1e-7||j===m&&"isPause"!==this.data)&&j!==a&&(c=!0,j>m&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a||j===a?a:m);else if(1e-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&j>0)&&(e="onReverseComplete",d=this._reversed),0>a&&(this._active=!1,0===i&&(this._initted||!this.vars.lazy||c)&&(j>=0&&(j!==m||"isPause"!==this.data)&&(c=!0),this._rawPrevTime=g=!b||a||j===a?a:m)),(!this._initted||this._startAt&&this._startAt.progress())&&(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,l=this._easeType,n=this._easePower;(1===l||3===l&&k>=.5)&&(k=1-k),3===l&&(k*=2),1===n?k*=k:2===n?k*=k*k:3===n?k*=k*k*k:4===n&&(k*=k*k*k*k),1===l?this.ratio=1-k:2===l?this.ratio=k:.5>a/i?this.ratio=k/2:this.ratio=1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!c&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=h,this._rawPrevTime=j,J.push(this),void(this._lazy=[a,b]);this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,!0,c):e||(e="_dummyGS")),this.vars.onStart&&(0!==this._time||0===i)&&(b||this._callback("onStart"))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&a!==-1e-4&&this._startAt.render(a,!0,c),b||(this._time!==h||d||c)&&this._callback("onUpdate")),e&&(!this._gc||c)&&(0>a&&this._startAt&&!this._onUpdate&&a!==-1e-4&&this._startAt.render(a,!0,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this._callback(e),0===i&&this._rawPrevTime===m&&g!==m&&(this._rawPrevTime=0))}},h._kill=function(a,b,c){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._lazy=!1,this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:G.selector(b)||b;var d,e,f,g,h,i,j,k,l,m=c&&this._time&&c._startTime===this._startTime&&this._timeline===c._timeline;if((p(b)||H(b))&&"number"!=typeof b[0])for(d=b.length;--d>-1;)this._kill(a,b[d],c)&&(i=!0);else{if(this._targets){for(d=this._targets.length;--d>-1;)if(b===this._targets[d]){h=this._propLookup[d]||{},this._overwrittenProps=this._overwrittenProps||[],e=this._overwrittenProps[d]=a?this._overwrittenProps[d]||{}:"all";break}}else{if(b!==this.target)return!1;h=this._propLookup,e=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(h){if(j=a||h,k=a!==e&&"all"!==e&&a!==h&&("object"!=typeof a||!a._tempKill),c&&(G.onOverwrite||this.vars.onOverwrite)){for(f in j)h[f]&&(l||(l=[]),l.push(f));if((l||!a)&&!_(this,c,b,l))return!1}for(f in j)(g=h[f])&&(m&&(g.f?g.t[g.p](g.s):g.t[g.p]=g.s,i=!0),g.pg&&g.t._kill(j)&&(i=!0),g.pg&&0!==g.t._overwriteProps.length||(g._prev?g._prev._next=g._next:g===this._firstPT&&(this._firstPT=g._next),g._next&&(g._next._prev=g._prev),g._next=g._prev=null),delete h[f]),k&&(e[f]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return i},h.invalidate=function(){return this._notifyPluginsOfEnabled&&G._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],D.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-m,this.render(Math.min(0,-this._delay))),this},h._enabled=function(a,b){if(j||i.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=$(d[c],this,!0);else this._siblings=$(this.target,this,!0)}return D.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?G._onPluginEvent(a?"_onEnable":"_onDisable",this):!1},G.to=function(a,b,c){return new G(a,b,c)},G.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new G(a,b,c)},G.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new G(a,b,d)},G.delayedCall=function(a,b,c,d,e){return new G(b,0,{delay:a,onComplete:b,onCompleteParams:c,callbackScope:d,onReverseComplete:b,onReverseCompleteParams:c,immediateRender:!1,lazy:!1,useFrames:e,overwrite:0})},G.set=function(a,b){return new G(a,0,b)},G.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:G.selector(a)||a;var c,d,e,f;if((p(a)||H(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(G.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else if(a._gsTweenID)for(d=$(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d||[]},G.killTweensOf=G.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=G.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var ca=t("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=ca.prototype},!0);if(h=ca.prototype,ca.version="1.19.0",ca.API=2,h._firstPT=null,h._addTween=P,h.setRatio=N,h._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},h._mod=h._roundProps=function(a){for(var b,c=this._firstPT;c;)b=a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")],b&&"function"==typeof b&&(2===c.f?c.t._applyPT.m=b:c.m=b),c=c._next},G._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},ca.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===ca.API&&(R[(new a[b])._propName]=a[b]);return!0},s.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},g=t("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){ca.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new ca(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,ca.activate([g]),g},f=a._gsQueue){for(g=0;g<f.length;g++)f[g]();for(h in q)q[h].func||a.console.log("GSAP encountered missing dependency: "+h)}j=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenLite");;window.eventsManager=new function(){var self=this;this.addHandler=false;this.fireEvent=false;var mouseEnterSupported;var mouseLeaveSupported;var eventsSet;var init=function(){if(typeof document.documentElement.onmouseenter=='object'){mouseEnterSupported=true;}
if(typeof document.documentElement.onmouseleave=='object'){mouseLeaveSupported=true;}
self.fireEvent=fireEvent_standards;self.addHandler=addHandler_standards;if(navigator.appName=='Microsoft Internet Explorer'){if(navigator.appVersion.match(/MSIE ([\d.]+);/)){var version=navigator.appVersion.match(/MSIE ([\d.]+);/)[1];if(version<9){self.fireEvent=fireEvent_ie;self.addHandler=addHandler_ie;}else{self.addHandler=addHandler_ie9;}}}};this.getEventTarget=function(event){var eventElement=null;if(event.target){eventElement=event.target;}else if(event.srcElement){eventElement=event.srcElement;}
return eventElement;};var addHandler_ie9=function(object,event,handler,useCapture){if(!useCapture){useCapture=false;}
if(object==null||typeof object!='object'&&typeof object!='function'||handler==null||typeof handler!='function'){return false;}else{if(event=='mousewheel'){object.addEventListener('DOMMouseScroll',handler,useCapture);}
object.addEventListener(event,handler,false);}};var addHandler_standards=function(object,event,handler,useCapture){if(!useCapture){useCapture=false;}
if(object==null||typeof object!='object'&&typeof object!='function'||handler==null||typeof handler!='function'){return false;}else{if(event==='mouseenter'&&!mouseEnterSupported){object.addEventListener('mouseover',mouseEnter(handler),useCapture);}else if(event==='mouseleave'&&!mouseLeaveSupported){object.addEventListener('mouseout',mouseEnter(handler),useCapture);}else if(event==='mousewheel'){object.addEventListener('DOMMouseScroll',handler,useCapture);}else{object.addEventListener(event,handler,useCapture);}}};var addHandler_ie=function(object,event,handler){if(object==null||typeof object!='object'&&typeof object!='function'||handler==null||typeof handler!='function'){return false;}else{if(object.attachEvent){object.attachEvent('on'+event,handler);}else if(event==='readystatechange'){object.onreadystatechange=handler;}}};var fireEvent_ie=function(object,eventName){var eventObject=document.createEventObject();return object.fireEvent('on'+eventName,eventObject);};var fireEvent_standards=function(object,eventName){var eventObject=document.createEvent('HTMLEvents');eventObject.initEvent(eventName,true,true);return!object.dispatchEvent(eventObject);};this.removeHandler=function(object,event,handler,useCapture){if(!useCapture){useCapture=false;}
if(object.removeEventListener){if(event=='mousewheel'){object.removeEventListener('DOMMouseScroll',handler,useCapture);}else{object.removeEventListener(event,handler,useCapture);}}else if(object.detachEvent){object.detachEvent('on'+event,handler);}};this.cancelBubbling=function(event){event.cancelBubble=true;if(event.stopPropagation){event.stopPropagation();}};this.preventDefaultAction=function(event){if(event.preventDefault){event.preventDefault();}else{event.returnValue=false;}};var mouseEnter=function(handler){return function(event){var relTarget=event.relatedTarget;if(this===relTarget||isAChildOf(this,relTarget)){return;}
handler.call(this,event);};};var isAChildOf=function(_parent,_child){if(_parent===_child){return false;}
while(_child&&_child!==_parent){_child=_child.parentNode;}
return _child===_parent;};this.detectTouchEventsSet=function(){if(!eventsSet){eventsSet='unsupported';if(window.navigator.msPointerEnabled){eventsSet='MSPointer';}else if(detectEventSupport('touchstart')){eventsSet='touch';}else if(detectEventSupport('mousedown')){eventsSet='mouse';}}
return eventsSet;};var pointerStartEventName;this.getPointerStartEventName=function(){if(!pointerStartEventName){var eventsSet=self.detectTouchEventsSet();if(eventsSet=='MSPointer'){pointerStartEventName='MSPointerDown';}else if(eventsSet=='touch'){pointerStartEventName='touchstart';}else if(eventsSet=='mouse'){pointerStartEventName='mousedown';}}
return pointerStartEventName;};var pointerEndEventName;this.getPointerEndEventName=function(){if(!pointerEndEventName){var eventsSet=self.detectTouchEventsSet();if(eventsSet=='MSPointer'){pointerEndEventName='MSPointerUp';}else if(eventsSet=='touch'){pointerEndEventName='touchend';}else if(eventsSet=='mouse'){pointerEndEventName='mouseup';}}
return pointerEndEventName;};var pointerMoveEventName;this.getPointerMoveEventName=function(){if(!pointerMoveEventName){var eventsSet=self.detectTouchEventsSet();if(eventsSet=='MSPointer'){pointerMoveEventName='MSPointerMove';}else if(eventsSet=='touch'){pointerMoveEventName='touchmove';}else if(eventsSet=='mouse'){pointerMoveEventName='mousemove';}}
return pointerMoveEventName;};var pointerCancelEventName;this.getPointerCancelEventName=function(){if(!pointerCancelEventName){var eventsSet=self.detectTouchEventsSet();if(eventsSet=='MSPointer'){pointerCancelEventName='MSPointerOut';}else if(eventsSet=='touch'){pointerCancelEventName='touchcancel';}else if(eventsSet=='mouse'){pointerCancelEventName='mouseleave';}}
return pointerCancelEventName;};var detectEventSupport=function(eventName){var element=document.createElement('div');var event='on'+eventName;var eventSupported=(event in element);if(!eventSupported){element.setAttribute(event,'return;');if(typeof element[event]=='function'){eventSupported=true;}}
return eventSupported;};init();};;window.mouseTracker=new function(){var self=this;this.mouseX=0;this.mouseY=0;this.captureMouseCoordinates=false;var pixelRatio=-1;this.init=function(){self.captureMouseCoordinates=captureMouseCoordinates_standards;window.eventsManager.addHandler(document,'mousemove',this.captureMouseCoordinates);window.eventsManager.addHandler(window,'resize',resized);};var resized=function(){if(pixelRatio<0){return;}
var newPixelRatio=window.devicePixelRatio||1;if(newPixelRatio==pixelRatio){return;}
self.mouseX*=pixelRatio / newPixelRatio;self.mouseY*=pixelRatio / newPixelRatio;pixelRatio=newPixelRatio;};var captureMouseCoordinates_standards=function(event){var mouseX=event.pageX;var mouseY=event.pageY;if(mouseX<0){mouseX=0;}
if(mouseY<0){mouseY=0;}
self.mouseX=mouseX;self.mouseY=mouseY;pixelRatio=window.devicePixelRatio||1;};this.getDelta=function(event){var delta=0;if(event.wheelDelta){delta=event.wheelDelta / 120;}else if(event.detail){delta=-event.detail / 3;}
return delta;};this.getElementCoordinates=function(domElement){var curleft=curtop=0;if(domElement.offsetParent){var curleft=domElement.offsetLeft;var curtop=domElement.offsetTop;while(domElement=domElement.offsetParent){if(domElement.tagName!='body'&&domElement.tagName!='BODY'){curleft+=domElement.offsetLeft-domElement.scrollLeft;curtop+=domElement.offsetTop-domElement.scrollTop;}else{curleft+=domElement.offsetLeft;curtop+=domElement.offsetTop;}}}
return{left:curleft,top:curtop};};this.init();};window.customMouseTracker=function(documentObject){this.init=function(){self.captureMouseCoordinates=captureMouseCoordinates_standards;if(navigator.appName=='Microsoft Internet Explorer'){var version=navigator.appVersion.match(/MSIE ([\d.]+);/)[1];if(version<9){self.captureMouseCoordinates=captureMouseCoordinates_ie;}}
if(documentObject){this.documentObject=documentObject;if(documentObject.contentWindow){eventsManager.addHandler(documentObject.contentWindow.document,'mousemove',this.captureMouseCoordinates);}else{eventsManager.addHandler(documentObject,'mousemove',this.captureMouseCoordinates);}}};var captureMouseCoordinates_standards=function(event){var mouseX=event.pageX;var mouseY=event.pageY;if(mouseX<0){mouseX=0;}
if(mouseY<0){mouseY=0;}
self.mouseX=mouseX;self.mouseY=mouseY;};var captureMouseCoordinates_ie=function(event){var mouseX=self.documentObject.contentWindow.event.clientX;var mouseY=self.documentObject.contentWindow.event.clientY;if(mouseX<0){mouseX=0;}
if(mouseY<0){mouseY=0;}
self.mouseX=mouseX;self.mouseY=mouseY;};var self=this;this.mouseX=0;this.mouseY=0;this.documentObject=false;this.captureMouseCoordinates=false;this.init();};;window._=function(selector,element){if(!element){element=document;}
return element.querySelectorAll(selector);};;controller=new function(){var init=function(){eventsManager.addHandler(window,'DOMContentLoaded',domLoadedHandler);eventsManager.addHandler(window,'load',onloadHandler);};var domLoadedHandler=function(){domLoaded=true;self.fireEvent('initLogics');self.fireEvent('initDom');self.fireEvent('startApplication');};var onloadHandler=function(){if(!domLoaded){self.fireEvent('initLogics');self.fireEvent('initDom');self.fireEvent('startApplication');}
self.fireEvent('DOMContentReady');};this.addListener=function(eventName,listener){var listenerExists=false;if(!eventsIndex[eventName]){eventsIndex[eventName]=[];}
for(var i=0;i<eventsIndex[eventName].length;i++){if(eventsIndex[eventName][i]==listener){listenerExists=true;}}
if(!listenerExists){eventsIndex[eventName].push(listener);}};this.fireEvent=function(eventName,argument){if(typeof argument=='undefined'){argument=false;}
if(eventsIndex[eventName]){eventsIndex[eventName].reverse();for(var i=eventsIndex[eventName].length-1;i>=0;i--){if(typeof eventsIndex[eventName][i]=='function'){eventsIndex[eventName][i](argument);}}
eventsIndex[eventName].reverse();}};this.removeListener=function(eventName,listener){if(eventsIndex[eventName]){for(var i=0;i<eventsIndex[eventName].length;i++){if(eventsIndex[eventName][i]==listener){eventsIndex[eventName].splice(i,1);}}}};var self=this;var domLoaded=false;var eventsIndex={};init();};;window.storageInterface=new function(){this.setValue=function(name,value){storageCacheObject[name]=value;saveStorage();};this.getValue=function(name){var value=false;if(typeof storageCacheObject[name]!=='undefined'){value=storageCacheObject[name];}
return value;};var init=function(){if(typeof window.localStorage!=='undefined'){try{if(window.localStorage){storageType='localStorage';}}catch(e){}}else{domElement=document.createElement('link');if(domElement.addBehavior){domElement.style.behavior='url(#default#userData)';document.getElementsByTagName('head')[0].appendChild(domElement);storageType='userData';}else{domElement=null;return;}}
loadStorage();};var loadStorage=function(){var storageString=false;if(storageType=='userData'){try{domElement.load('storageInterfaceData');if(domElement.getAttribute('storageString')){storageString=domElement.getAttribute('storageString');}}catch(e){}}else if(storageType=='localStorage'){storageString=window.localStorage.getItem('storageString');}
if(storageString){try{storageCacheObject=json_decode(String(storageString));}catch(e){};}
if(!storageCacheObject){storageCacheObject={};}};var saveStorage=function(){try{var storageString=json_encode(storageCacheObject);if(storageType=='userData'){domElement.setAttribute('storageString',storageString);domElement.save('storageInterfaceData');}else if(storageType=='localStorage'){window.localStorage.setItem('storageString',storageString);}}catch(e){};};var json_encode=Object.toJSON||(window.JSON&&(JSON.encode||JSON.stringify));var json_decode=(window.JSON&&(JSON.decode||JSON.parse))||function(str){return String(str).evalJSON();};var self=this;var storageCacheObject={};var domElement=null;var storageService=null;var storageType=null;init();};;window.JsonRequest=function(requestURL,callback,requestName,requestParameters,formData){var self=this;var responseData=false;var responseStatus=false;this.send=function(){if(requestURL){var parameters={};parameters['requestURL']=requestURL;parameters['successCallBack']=successCallBack;parameters['failCallBack']=failCallBack;parameters['requestXML']=false;parameters['requestType']='POST';parameters['postParameters']=requestParameters;parameters['formData']=formData;ajaxManager.makeRequest(parameters);}};var successCallBack=function(responseText){var parsedData;responseStatus='invalid';responseData={};if(typeof responseText!=='undefined'&&responseText!==''){if(parsedData=JSON.parse(responseText)){if(typeof(parsedData.responseStatus!=='undefined')&&typeof(parsedData.responseData!=='undefined')){responseStatus=parsedData.responseStatus;responseData=parsedData.responseData;}}}
if(self.responseStatus=='success'){controller.fireEvent('requestSuccess');}
if(self.responseStatus=='fail'){controller.fireEvent('requestFail',parsedData);}
if(responseData){deliverResponse();}else{failCallBack();}};var failCallBack=function(){responseStatus='invalid';responseData={};deliverResponse();};var deliverResponse=function(){if(typeof callback=='function'){callback(responseStatus,requestName,responseData);}};this.setRequestParameters=function(newRequestParameters){requestParameters=newRequestParameters;};};;window.anchorParameters=new function(){this.initHandler=function(){self.detectBaseURL();};this.startHandler=function(){window.setInterval(self.checkParametersChange,self.checkInterval);};this.detectBaseURL=function(){var hrefString=document.location.href;if(hrefString.search('#')!='-1'){var hashStrings=hrefString.split('#');hrefString=hashStrings[0];}
self.baseURL=hrefString;};this.checkParametersChange=function(){if(self.olderHref!=document.location.href){self.olderHref=document.location.href;self.handleHrefChange();}};this.handleHrefChange=function(){var hrefString=document.location.href;var parametersString='';if(hrefString.search('#')!='-1'){var hashStrings=hrefString.split('#');parametersString=hashStrings[hashStrings.length-1];}
self.parseHashParameters(parametersString);};this.parseHashParameters=function(parametersString){parameters={};var pairsList=parametersString.split(this.pairsDelimiter);for(var i=0;i<pairsList.length;i++){var words=pairsList[i].split(this.valueDelimiter);if(words.length==2){var name=words[0];var value=false;if(words[1]){value=decodeURIComponent(words[1]);}
parameters[name]=value;}}
controller.fireEvent('anchorParametersUpdate',parameters);};this.getParameter=function(name){var result=false;if(parameters[name]){result=parameters[name];}
return result;};var self=this;var parameters={};this.baseURL=false;this.olderHref='';this.pairsDelimiter='&';this.valueDelimiter='=';this.checkInterval=200;controller.addListener('initLogics',this.initHandler);controller.addListener('startApplication',this.startHandler);};;window.touchManager=new function(){var self=this;var handlers={};var eventsSet;var startEventName;var moveEventName;var endEventName;var cancelEventName;var pointerCache={};var init=function(){handlers['start']=[];handlers['end']=[];handlers['move']=[];handlers['cancel']=[];eventsSet=self.getEventsSet();if(eventsSet=='mouse'){captureStartEvent=captureStartEvent_mouse;captureEndEvent=captureEndEvent_mouse;compileEventInfo=compileEventInfo_mouse;startEventName='mousedown';moveEventName='mousemove';endEventName='mouseup';cancelEventName='mouseleave';}else if(eventsSet=='touch'){compileEventInfo=compileEventInfo_touch;startEventName='touchstart';moveEventName='touchmove';endEventName='touchend';cancelEventName='touchcancel';}else if(eventsSet=='pointer'){compileEventInfo=compileEventInfo_pointer;startEventName='pointerdown';moveEventName='pointermove';endEventName='pointerup';cancelEventName='pointerleave';}else if(eventsSet=='mspointer'){compileEventInfo=compileEventInfo_mouse;startEventName='mspointerdown';moveEventName='mspointermove';endEventName='mspointerup';cancelEventName='mspointerleave';}
controller.addListener('initDom',initDom);};var initDom=function(){switch(eventsSet){case'pointer':case'mspointer':document.body.addEventListener(endEventName,pointerUp,true);document.body.addEventListener(cancelEventName,pointerUp,true);document.body.addEventListener(startEventName,pointerDown,true);document.body.addEventListener(moveEventName,pointerMove,true);break;}};this.getEventsSet=function(){eventsSet=false;if(window.PointerEvent){eventsSet='pointer';}else if(window.navigator.msPointerEnabled){eventsSet='mspointer';}else if('ontouchstart'in window){eventsSet='touch';}else if('onmousedown'in window){eventsSet='mouse';}
self.getEventsSet=getEventsSet_return;return eventsSet;};var getEventsSet_return=function(){return eventsSet;};var captureStartEvent=function(event){fireCallback('start',event);};var captureStartEvent_mouse=function(event){if(event.button==0){fireCallback('start',event);}};var captureMoveEvent=function(event){fireCallback('move',event);};var captureEndEvent=function(event){fireCallback('end',event);};var captureCancelEvent=function(event){fireCallback('cancel',event);};var captureEndEvent_mouse=function(event){if(event.button==0){var eventType='end';fireCallback(eventType,event);}};var fireCallback=function(eventType,event){var eventInfo=compileEventInfo(event);for(var i=0;i<handlers[eventType].length;i++){if(handlers[eventType][i]['element']==eventInfo['currentTarget']){handlers[eventType][i]['callback'](event,eventInfo);}}};var compileEventInfo;var compileEventInfo_touch=function(event){var eventInfo={'target':event.target,'currentTarget':event.currentTarget,'touches':event.touches,};if(typeof event.touches[0]!=='undefined'){var firstTouch=event.touches[0];eventInfo['clientX']=firstTouch.clientX;eventInfo['clientY']=firstTouch.clientY;eventInfo['pageX']=firstTouch.pageX;eventInfo['pageY']=firstTouch.pageY;}
return eventInfo;};var compileEventInfo_pointer=function(event){var touches=[];for(var id in pointerCache){touches.push(pointerCache[id]);}
return{'touches':touches,'target':event.target,'currentTarget':event.currentTarget,'clientX':event.clientX,'clientY':event.clientY,'pageX':event.pageX,'pageY':event.pageY,};};var compileEventInfo_mouse=function(event){var currentTouchInfo={'clientX':event.clientX,'clientY':event.clientY,'pageX':event.pageX,'pageY':event.pageY,};return{'touches':[currentTouchInfo],'target':event.target,'currentTarget':event.currentTarget,'clientX':event.clientX,'clientY':event.clientY,'pageX':event.pageX,'pageY':event.pageY,};};var cachePointerEvent=function(event){if(typeof event.pointerId!==undefined){pointerCache[event.pointerId]={'clientX':event.clientX,'clientY':event.clientY,'pageX':event.pageX,'pageY':event.pageY,};}};var uncachePointerEvent=function(event){if(event.pointerId&&pointerCache[event.pointerId]){delete pointerCache[event.pointerId];}};var pointerUp=function(event){uncachePointerEvent(event);};var pointerDown=function(event){cachePointerEvent(event);};var pointerMove=function(event){cachePointerEvent(event);};this.addEventListener=function(element,eventType,callback,useCapture){if(!useCapture){useCapture=false;}
if(typeof handlers[eventType]!=='undefined'){var handlerExists=false;for(var i=0;i<handlers[eventType].length;i++){if(handlers[eventType][i]['callback']==callback&&handlers[eventType][i]['element']==element){handlerExists=true;}}
if(!handlerExists){var handlerObject={};handlerObject['callback']=callback;handlerObject['element']=element;handlers[eventType].push(handlerObject);}
if(typeof element!=='undefined'&&typeof callback!=='undefined'){if(eventType=='start'){element.addEventListener(startEventName,captureStartEvent,useCapture);}else if(eventType=='move'){element.addEventListener(moveEventName,captureMoveEvent,useCapture);}else if(eventType=='end'){element.addEventListener(endEventName,captureEndEvent,useCapture);}else if(eventType=='cancel'){element.addEventListener(cancelEventName,captureCancelEvent,useCapture);}}}};this.removeEventListener=function(element,eventType,callback){if(typeof handlers[eventType]!=='undefined'){for(var i=handlers[eventType].length;i--;){if(handlers[eventType][i]['callback']==callback&&handlers[eventType][i]['element']==element){handlers[eventType][i]=null;handlers[eventType].splice(i,1);}}}};this.setTouchAction=function(element,action){if(eventsSet=='mspointer'){element.style.msTouchAction=action;}else{element.style.touchAction=action;}};init();};;(function(){function H(a,c){for(var b=1;b<arguments.length;++b)for(var d in arguments[b])a[d]=arguments[b][d];return a}function L(a){var c=0,b;for(b in a)a.hasOwnProperty(b)&&c++;return c}function I(a,c){if(Array.prototype.indexOf)return a.indexOf(c);for(var b=0;b<a.length;++b)if(a[b]===c)return b;return-1}function Q(a){return a.replace(/\\t/,"\t").replace(/\\n/,"\n").replace(/\\(['"\\])/g,"$1")}function F(a){return Q(a.replace(/^['"](.*)['"]$/,"$1")).replace(/^\s+|\s+$/g,"")}function C(a,c){for(var b=0,d=0,e=h.prototype.left_delimiter,f=h.prototype.right_delimiter,g=h.prototype.auto_literal,m=/^\s*(.+)\s*$/i,m=a?RegExp("^\\s*("+a+")\\s*$","i"):m,l=0;l<c.length;++l)if(c.substr(l,e.length)==e)g&&l+1<c.length&&c.substr(l+1,1).match(/\s/)||(b||(c=c.slice(l),d+=parseInt(l),l=0),++b);else if(c.substr(l,f.length)==f&&!(g&&0<=l-1&&c.substr(l-1,1).match(/\s/))){if(!--b){var k=c.slice(e.length,l).replace(/[\r\n]/g," ").match(m);if(k)return k.index=d,k[0]=c.slice(0,l+f.length),k}0>b&&(b=0)}return null}function R(a,c,b){var d="",e=null,f=null,g=0;do{e&&(g+=e[0].length);e=C(a,b);if(!e)throw Error("Unclosed {"+c+"}");d+=b.slice(0,e.index);g+=e.index;b=b.slice(e.index+e[0].length);(f=C(c,d))&&(d=d.slice(f.index+f[0].length))}while(f);e.index=g;return e}function M(a,c,b,d){for(var e=0,f=C(b,d);f;f=C(b,d)){var g=C(a,d);if(!g||g.index>f.index)return f.index+=e,f;d=d.slice(g.index+g[0].length);e+=g.index+g[0].length;f=R(c,a,d);d=d.slice(f.index+f[0].length);e+=f.index+f[0].length}return null}function S(a,c){if("string"==typeof a)with({__code:a})with(J)with(c)try{return eval(__code)}catch(b){throw Error(b.message+" in \n"+a);}return a}function y(a,c,b){a.match(/\[\]$/)?b[a.replace(/\[\]$/,"")].push(c):b[a]=c}function r(a,c){for(var b=C("",a);b;b=C("",a)){b.index&&x(a.slice(0,b.index),c);a=a.slice(b.index+b[0].length);var d=b[1].match(/^\s*(\w+)(.*)$/);if(d){var e=d[1],d=2<d.length?d[2].replace(/^\s+|\s+$/g,""):"";if(e in G){var f=G[e],d=("parseParams"in f?f.parseParams:A)(d);"block"==f.type?(a=a.replace(/^\n/,""),b=R("/"+e,e+" +[^}]*",a),f.parse(d,c,a.slice(0,b.index)),a=a.slice(b.index+b[0].length)):(f.parse(d,c),"extends"==e&&(c=[]));a=a.replace(/^\n/,"")}else if(e in B){if(b=B[e],"block"==b.type?(b=R("/"+e,e+" +[^}]*",a),d=A(d),f=a.slice(0,b.index),c.push({type:"plugin",name:e,params:d,subTree:r(f,[])}),a=a.slice(b.index+b[0].length)):"function"==b.type&&(b=A(d),c.push({type:"plugin",name:e,params:b})),"append"==e||"assign"==e||"capture"==e||"eval"==e||"include"==e)a=a.replace(/^\n/,"")}else G.expression.parse(b[1],c)}else e=G.expression.parse(b[1],c),"build-in"==e.type&&"operator"==e.name&&"="==e.op&&(a=a.replace(/^\n/,""))}a&&x(a,c);return c}function x(a,c){if(x.parseEmbeddedVars)for(var b=/([$][\w@]+)|`([^`]*)`/,d=a.match(b);d;d=a.match(b))c.push({type:"text",data:a.slice(0,d.index)}),c.push(K(d[1]?d[1]:d[2]).tree),a=a.slice(d.index+d[0].length);c.push({type:"text",data:a});return c}function Z(a,c,b){c.__parsed.name=x(a,[])[0];b.push({type:"plugin",name:"__func",params:c});return b}function t(a,c,b,d){d.push({type:"build-in",name:"operator",op:a,optype:c,precedence:b,params:{}})}function T(a,c,b){var d=c.token;b=[{type:"text",data:b.replace(/^(\w+)@(key|index|iteration|first|last|show|total)/gi,"$1__$2")}];for(var e=/^(?:\.|\s*->\s*|\[\s*)/,f=a.match(e);f;f=a.match(e)){c.token+=f[0];a=a.slice(f[0].length);var g={value:"",tree:[]};if(f[0].match(/\[/)){if(g=K(a))c.token+=g.value,b.push(g.tree),a=a.slice(g.value.length);if(f=a.match(/\s*\]/))c.token+=f[0],a=a.slice(f[0].length)}else{f=v.stop;v.stop=!0;if(U(a,g)){c.token+=g.value;var m=g.tree[0];"plugin"==m.type&&"__func"==m.name&&(m.hasOwner=!0);b.push(m);a=a.slice(g.value.length)}else g=!1;v.stop=f}g||b.push({type:"text",data:""})}c.tree.push({type:"var",parts:b});c.value+=c.token.substr(d.length);V(c.token);return a}function V(a){}function v(a,c){if(!v.stop){var b=a.match(/^\|(\w+)/);if(b){c.value+=b[0];var d="default"==b[1]?"__defaultValue":"__"+b[1];a=a.slice(b[0].length).replace(/^\s+/,"");v.stop=!0;for(var b=[],e=a.match(/^\s*:\s*/);e;e=a.match(/^\s*:\s*/))c.value+=a.slice(0,e[0].length),a=a.slice(e[0].length),e={value:"",tree:[]},U(a,e)?(c.value+=e.value,b.push(e.tree[0]),a=a.slice(e.value.length)):x("",b);v.stop=!1;b.unshift(c.tree.pop());c.tree.push(Z(d,{__parsed:b},[])[0]);v(a,c)}}}function U(a,c){if(!a)return!1;if(a.substr(0,h.prototype.left_delimiter.length)==h.prototype.left_delimiter){var b=C("",a);if(b)return c.token=b[0],c.value+=b[0],r(b[0],c.tree),v(a.slice(c.value.length),c),!0}for(b=0;b<N.length;++b)if(a.match(N[b].re))return c.token=RegExp.lastMatch,c.value+=RegExp.lastMatch,N[b].parse(c,a.slice(c.token.length)),!0;return!1}function $(a,c,b){var d=c[a];if("operator"==d.name&&d.precedence==b&&!d.params.__parsed){if("binary"==d.optype)return d.params.__parsed=[c[a-1],c[a+1]],c.splice(a-1,3,d),!0;if("post-unary"==d.optype)return d.params.__parsed=[c[a-1]],c.splice(a-1,2,d),!0;d.params.__parsed=[c[a+1]];c.splice(a,2,d)}return!1}function aa(a){for(var c=0,c=0;c<a.length;++c)a[c]instanceof Array&&(a[c]=aa(a[c]));for(var b=1;14>b;++b)if(2==b||10==b)for(c=a.length;0<c;--c)c-=$(c-1,a,b);else for(c=0;c<a.length;++c)c-=$(c,a,b);return a[0]}function K(a){for(var c={value:"",tree:[]};U(a.slice(c.value.length),c););if(!c.tree.length)return!1;c.tree=aa(c.tree);return c}function A(a,c,b){var d=a.replace(/\n/g," ").replace(/^\s+|\s+$/g,""),e=[];e.__parsed=[];a="";if(!d)return e;c||(c=/^\s+/,b=/^(\w+)\s*=\s*/);for(;d;){var f=null;if(b){var g=d.match(b);g&&(f=F(g[1]),a+=d.slice(0,g[0].length),d=d.slice(g[0].length))}g=K(d);if(!g)break;f?(e[f]=g.value,e.__parsed[f]=g.tree):(e.push(g.value),e.__parsed.push(g.tree));a+=d.slice(0,g.value.length);d=d.slice(g.value.length);if(f=d.match(c))a+=d.slice(0,f[0].length),d=d.slice(f[0].length);else break}e.toString=function(){return a};return e}function z(a,c){var b=[],d;for(d in a.__parsed)if(a.__parsed.hasOwnProperty(d)){var e=q([a.__parsed[d]],c);"string"==typeof e&&e.match(/^[1-9]\d{0,14}$/)&&!isNaN(e)&&(e=parseInt(e,10));b[d]=e}b.__get=function(a,c,d){if(a in b&&"undefined"!=typeof b[a]&&"function"!=typeof b[a])return b[a];if("undefined"!=typeof d&&"undefined"!=typeof b[d])return b[d];if(null===c)throw Error("The required attribute '"+a+"' is missing");return c};return b}function D(a,c,b){for(var d=c,e="",f=0;f<a.parts.length;++f){var g=a.parts[f];if("plugin"==g.type&&"__func"==g.name&&g.hasOwner)c.__owner=d,d=q([a.parts[f]],c),delete c.__owner;else{e=q([g],c);e in c.smarty.section&&"text"==g.type&&"smarty"!=q([a.parts[0]],c)&&(e=c.smarty.section[e].index);!e&&"undefined"!=typeof b&&d instanceof Array&&(e=d.length);"undefined"!=typeof b&&f==a.parts.length-1&&(d[e]=b);if(!("object"==typeof d&&null!==d&&e in d)){if("undefined"==typeof b)return b;d[e]={}}d=d[e]}}return d}function q(a,c){for(var b="",d=0;d<a.length;++d){var e="",f=a[d];if("text"==f.type)e=f.data;else if("var"==f.type)e=D(f,c);else if("build-in"==f.type)e=G[f.name].process(f,c);else if("plugin"==f.type){var g=B[f.name];if("block"==g.type){var m={value:!0};for(g.process(z(f.params,c),"",c,m);m.value;)m.value=!1,e+=g.process(z(f.params,c),q(f.subTree,c),c,m)}else"function"==g.type&&(e=g.process(z(f.params,c),c))}"boolean"==typeof e&&(e=e?"1":"");if(1==a.length)return e;b+=null!==e?e:"";if(c.smarty["continue"]||c.smarty["break"])break}return b}function ba(a,c,b){if(!b&&a in W)c.length=0,H(c,W[a]);else{var d=h.prototype.getTemplate(a);if("string"!=typeof d)throw Error("No template for "+a);r(O(h.prototype.filters_global.pre,ca(d.replace(/\r\n/g,"\n"))),c);b||(W[a]=c)}return c}function ca(a){for(var c="",b=RegExp(h.prototype.left_delimiter+"\\*"),d=RegExp("\\*"+h.prototype.right_delimiter),e=a.match(b);e;e=a.match(b)){c+=a.slice(0,e.index);a=a.slice(e.index+e[0].length);e=a.match(d);if(!e)throw Error("Unclosed "+h.left_delimiter+"*");a=a.slice(e.index+e[0].length)}return c+a}function O(a,c){for(var b=0;b<a.length;++b)c=a[b](c);return c}var G={expression:{parse:function(a,c){var b=K(a);c.push({type:"build-in",name:"expression",expression:b.tree,params:A(a.slice(b.value.length).replace(/^\s+|\s+$/g,""))});return b.tree},process:function(a,c){var b=z(a.params,c),d=q([a.expression],c);if(0>I(b,"nofilter")){for(b=0;b<default_modifiers.length;++b){var e=default_modifiers[b];e.params.__parsed[0]={type:"text",data:d};d=q([e],c)}escape_html&&(d=J.__escape(d));d=O(varFilters,d);P.length&&(__t=function(){return d},d=q(P,c))}return d}},operator:{process:function(a,c){var b=z(a.params,c),d=b[0];if("binary"==a.optype){b=b[1];if("="==a.op)return D(a.params.__parsed[0],c,b),"";if(a.op.match(/(\+=|-=|\*=|\/=|%=)/)){d=D(a.params.__parsed[0],c);switch(a.op){case"+=":d+=b;break;case"-=":d-=b;break;case"*=":d*=b;break;case"/=":d/=b;break;case"%=":d%=b}return D(a.params.__parsed[0],c,d)}if(a.op.match(/div/))return"div"!=a.op^0==d%b;if(a.op.match(/even/))return"even"!=a.op^0==d/b%2;if(a.op.match(/xor/))return(d||b)&&!(d&&b);switch(a.op){case"==":return d==b;case"!=":return d!=b;case"+":return d+b;case"-":return d-b;case"*":return d*b;case"/":return d/b;case"%":return d%b;case"&&":return d&&b;case"||":return d||b;case"<":return d<b;case"<=":return d<=b;case">":return d>b;case">=":return d>=b;case"===":return d===b;case"!==":return d!==b}}else{if("!"==a.op)return d instanceof Array?!d.length:"object"==typeof d?!L(d):"0"===d?!0:!d;(b="var"==a.params.__parsed[0].type)&&(d=D(a.params.__parsed[0],c));var e=d;if("pre-unary"==a.optype){switch(a.op){case"-":e=-d;break;case"++":e=++d;break;case"--":e=--d}b&&D(a.params.__parsed[0],c,d)}else{switch(a.op){case"++":d++;break;case"--":d--}D(a.params.__parsed[0],c,d)}return e}}},section:{type:"block",parse:function(a,c,b){var d=[],e=[];c.push({type:"build-in",name:"section",params:a,subTree:d,subTreeElse:e});(a=M("section [^}]+","/section","sectionelse",b))?(r(b.slice(0,a.index),d),r(b.slice(a.index+a[0].length).replace(/^[\r\n]/,""),e)):r(b,d)},process:function(a,c){var b=z(a.params,c),d={};c.smarty.section[b.__get("name",null,0)]=d;var e=b.__get("show",!0);d.show=e;if(!e)return q(a.subTreeElse,c);var e=parseInt(b.__get("start",0)),f=b.loop instanceof Object?L(b.loop):isNaN(b.loop)?0:parseInt(b.loop),g=parseInt(b.__get("step",1)),b=parseInt(b.__get("max"));isNaN(b)&&(b=Number.MAX_VALUE);0>e?(e+=f,0>e&&(e=0)):e>=f&&(e=f?f-1:0);for(var m=0,l=e;0<=l&&l<f&&m<b;l+=g,++m);d.total=m;d.loop=m;for(var m=0,k="",l=e;0<=l&&l<f&&m<b&&!c.smarty["break"];l+=g,++m)d.first=l==e,d.last=0>l+g||l+g>=f,d.index=l,d.index_prev=l-g,d.index_next=l+g,d.iteration=d.rownum=m+1,k+=q(a.subTree,c),c.smarty["continue"]=!1;c.smarty["break"]=!1;return m?k:q(a.subTreeElse,c)}},setfilter:{type:"block",parseParams:function(a){return[K("__t()|"+
a).tree]},parse:function(a,c,b){c.push({type:"build-in",name:"setfilter",params:a,subTree:r(b,[])})},process:function(a,c){P=a.params;var b=q(a.subTree,c);P=[];return b}},"for":{type:"block",parseParams:function(a){var c=a.match(/^\s*\$(\w+)\s*=\s*([^\s]+)\s*to\s*([^\s]+)\s*(?:step\s*([^\s]+))?\s*(.*)$/);if(!c)throw Error("Invalid {for} parameters: "+a);return A("varName='"+c[1]+"' from="+c[2]+" to="+c[3]+" step="+(c[4]?c[4]:"1")+" "+c[5])},parse:function(a,c,b){var d=[],e=[];c.push({type:"build-in",name:"for",params:a,subTree:d,subTreeElse:e});(a=M("for\\s[^}]+","/for","forelse",b))?(r(b.slice(0,a.index),d),r(b.slice(a.index+a[0].length),e)):r(b,d)},process:function(a,c){var b=z(a.params,c),d=parseInt(b.__get("from")),e=parseInt(b.__get("to")),f=parseInt(b.__get("step"));isNaN(f)&&(f=1);var g=parseInt(b.__get("max"));isNaN(g)&&(g=Number.MAX_VALUE);for(var m=0,l="",d=Math.min(Math.ceil(((0<f?e-d:d-e)+1)/Math.abs(f)),g),e=parseInt(b.from);m<d&&!c.smarty["break"];e+=f,++m)c[b.varName]=e,l+=q(a.subTree,c),c.smarty["continue"]=!1;c.smarty["break"]=!1;m||(l=q(a.subTreeElse,c));return l}},"if":{type:"block",parse:function(a,c,b){var d=[],e=[];c.push({type:"build-in",name:"if",params:a,subTreeIf:d,subTreeElse:e});(a=M("if\\s+[^}]+","/if","else[^}]*",b))?(r(b.slice(0,a.index),d),b=b.slice(a.index+a[0].length),(d=a[1].match(/^else\s*if(.*)/))?G["if"].parse(A(d[1]),e,b.replace(/^\n/,"")):r(b.replace(/^\n/,""),e)):r(b,d)},process:function(a,c){var b=z(a.params,c)[0];return!b||b instanceof Array&&!b.length||b instanceof Object&&!L(b)?q(a.subTreeElse,c):q(a.subTreeIf,c)}},foreach:{type:"block",parseParams:function(a){var c=a.match(/^\s*([$].+)\s*as\s*[$](\w+)\s*(=>\s*[$](\w+))?\s*$/i);c&&(a="from="+c[1]+" item="+(c[4]||c[2]),c[4]&&(a+=" key="+c[2]));return A(a)},parse:function(a,c,b){var d=[],e=[];c.push({type:"build-in",name:"foreach",params:a,subTree:d,subTreeElse:e});(a=M("foreach\\s[^}]+","/foreach","foreachelse",b))?(r(b.slice(0,a.index),d),r(b.slice(a.index+a[0].length).replace(/^[\r\n]/,""),e)):r(b,d)},process:function(a,c){var b=z(a.params,c),d=b.from;"undefined"==typeof d&&(d=[]);"object"!=typeof d&&(d=[d]);var e=L(d);c[b.item+"__total"]=e;"name"in b&&(c.smarty.foreach[b.name]={},c.smarty.foreach[b.name].total=e);var f="",g=0,m;for(m in d)if(d.hasOwnProperty(m)){if(c.smarty["break"])break;c[b.item+"__key"]=isNaN(m)?m:parseInt(m);"key"in b&&(c[b.key]=c[b.item+"__key"]);c[b.item]=d[m];c[b.item+"__index"]=parseInt(g);c[b.item+"__iteration"]=parseInt(g+1);c[b.item+"__first"]=0===g;c[b.item+"__last"]=g==e-1;"name"in b&&(c.smarty.foreach[b.name].index=parseInt(g),c.smarty.foreach[b.name].iteration=parseInt(g+1),c.smarty.foreach[b.name].first=0===g?1:"",c.smarty.foreach[b.name].last=g==e-1?1:"");++g;f+=q(a.subTree,c);c.smarty["continue"]=!1}c.smarty["break"]=!1;c[b.item+"__show"]=0<g;b.name&&(c.smarty.foreach[b.name].show=0<g?1:"");return 0<g?f:q(a.subTreeElse,c)}},"function":{type:"block",parse:function(a,c,b){c=[];B[F(a.name?a.name:a[0])]={type:"function",subTree:c,defautParams:a,process:function(a,b){var c=z(this.defautParams,b);delete c.name;return q(this.subTree,H({},b,c,a))}};r(b,c)}},php:{type:"block",parse:function(a,c,b){}},"extends":{type:"function",parse:function(a,c){c.splice(0,c.length);ba(F(a.file?a.file:a[0]),c)}},block:{type:"block",parse:function(a,c,b){c.push({type:"build-in",name:"block",params:a});a.append=0<=I(a,"append");a.prepend=0<=I(a,"prepend");a.hide=0<=I(a,"hide");a.hasChild=a.hasParent=!1;V=function(b){b.match(/^\s*[$]smarty.block.child\s*$/)&&(a.hasChild=!0);b.match(/^\s*[$]smarty.block.parent\s*$/)&&(a.hasParent=!0)};c=r(b,[]);V=function(a){};b=F(a.name?a.name:a[0]);b in E||(E[b]=[]);E[b].push({tree:c,params:a})},process:function(a,c){c.smarty.block.parent=c.smarty.block.child="";var b=F(a.params.name?a.params.name:a.params[0]);this.processBlocks(E[b],E[b].length-1,c);return c.smarty.block.child},processBlocks:function(a,c,b){if(!c&&a[c].params.hide)b.smarty.block.child="";else for(var d=!0,e=!1;0<=c;--c){if(a[c].params.hasParent){var f=b.smarty.block.child;b.smarty.block.child="";this.processBlocks(a,c-1,b);b.smarty.block.parent=b.smarty.block.child;b.smarty.block.child=f}var f=b.smarty.block.child,g=q(a[c].tree,b);b.smarty.block.child=f;a[c].params.hasChild?b.smarty.block.child=g:d?b.smarty.block.child=g+b.smarty.block.child:e&&(b.smarty.block.child+=g);d=a[c].params.append;e=a[c].params.prepend}}},strip:{type:"block",parse:function(a,c,b){r(b.replace(/[ \t]*[\r\n]+[ \t]*/g,""),c)}},literal:{type:"block",parse:function(a,c,b){x(b,c)}},ldelim:{type:"function",parse:function(a,c){x(h.prototype.left_delimiter,c)}},rdelim:{type:"function",parse:function(a,c){x(h.prototype.right_delimiter,c)}},"while":{type:"block",parse:function(a,c,b){c.push({type:"build-in",name:"while",params:a,subTree:r(b,[])})},process:function(a,c){for(var b="";z(a.params,c)[0]&&!c.smarty["break"];)b+=q(a.subTree,c),c.smarty["continue"]=!1;c.smarty["break"]=!1;return b}}},B={},J={},W={},E=null,X=null,P=[],N=[{re:/^\$([\w@]+)/,parse:function(a,c){v(T(c,a,RegExp.$1),a)}},{re:/^(true|false)/i,parse:function(a,c){x(a.token.match(/true/i)?"1":"",a.tree)}},{re:/^'([^'\\]*(?:\\.[^'\\]*)*)'/,parse:function(a,c){x(Q(RegExp.$1),a.tree);v(c,a)}},{re:/^"([^"\\]*(?:\\.[^"\\]*)*)"/,parse:function(a,c){var b=Q(RegExp.$1),d=b.match(N[0].re);if(d){var e={token:d[0],tree:[]};T(b,e,d[1]);if(e.token.length==b.length){a.tree.push(e.tree[0]);return}}x.parseEmbeddedVars=!0;a.tree.push({type:"plugin",name:"__quoted",params:{__parsed:r(b,[])}});x.parseEmbeddedVars=!1;v(c,a)}},{re:/^(\w+)\s*[(]([)]?)/,parse:function(a,c){var b=RegExp.$1,d=A(RegExp.$2?"":c,/^\s*,\s*/);Z(b,d,a.tree);a.value+=d.toString();v(c.slice(d.toString().length),a)}},{re:/^\s*\(\s*/,parse:function(a,c){var b=[];a.tree.push(b);b.parent=a.tree;a.tree=b}},{re:/^\s*\)\s*/,parse:function(a,c){a.tree.parent&&(a.tree=a.tree.parent)}},{re:/^\s*(\+\+|--)\s*/,parse:function(a,c){a.tree.length&&"var"==a.tree[a.tree.length-1].type?t(RegExp.$1,"post-unary",1,a.tree):t(RegExp.$1,"pre-unary",1,a.tree)}},{re:/^\s*(===|!==|==|!=)\s*/,parse:function(a,c){t(RegExp.$1,"binary",6,a.tree)}},{re:/^\s+(eq|ne|neq)\s+/i,parse:function(a,c){var b=RegExp.$1.replace(/ne(q)?/,"!=").replace(/eq/,"==");t(b,"binary",6,a.tree)}},{re:/^\s*!\s*/,parse:function(a,c){t("!","pre-unary",2,a.tree)}},{re:/^\s+not\s+/i,parse:function(a,c){t("!","pre-unary",2,a.tree)}},{re:/^\s*(=|\+=|-=|\*=|\/=|%=)\s*/,parse:function(a,c){t(RegExp.$1,"binary",10,a.tree)}},{re:/^\s*(\*|\/|%)\s*/,parse:function(a,c){t(RegExp.$1,"binary",3,a.tree)}},{re:/^\s+mod\s+/i,parse:function(a,c){t("%","binary",3,a.tree)}},{re:/^\s*(\+|-)\s*/,parse:function(a,c){a.tree.length&&"operator"!=a.tree[a.tree.length-1].name?t(RegExp.$1,"binary",4,a.tree):t(RegExp.$1,"pre-unary",4,a.tree)}},{re:/^\s*(<=|>=|<>|<|>)\s*/,parse:function(a,c){t(RegExp.$1.replace(/<>/,"!="),"binary",5,a.tree)}},{re:/^\s+(lt|lte|le|gt|gte|ge)\s+/i,parse:function(a,c){var b=RegExp.$1.replace(/lt/,"<").replace(/l(t)?e/,"<=").replace(/gt/,">").replace(/g(t)?e/,">=");t(b,"binary",5,a.tree)}},{re:/^\s+(is\s+(not\s+)?div\s+by)\s+/i,parse:function(a,c){t(RegExp.$2?"div_not":"div","binary",7,a.tree)}},{re:/^\s+is\s+(not\s+)?(even|odd)(\s+by\s+)?\s*/i,parse:function(a,c){t(RegExp.$1?"odd"==RegExp.$2?"even":"even_not":"odd"==RegExp.$2?"even_not":"even","binary",7,a.tree);RegExp.$3||x("1",a.tree)}},{re:/^\s*(&&)\s*/,parse:function(a,c){t(RegExp.$1,"binary",8,a.tree)}},{re:/^\s*(\|\|)\s*/,parse:function(a,c){t(RegExp.$1,"binary",9,a.tree)}},{re:/^\s+and\s+/i,parse:function(a,c){t("&&","binary",11,a.tree)}},{re:/^\s+xor\s+/i,parse:function(a,c){t("xor","binary",12,a.tree)}},{re:/^\s+or\s+/i,parse:function(a,c){t("||","binary",13,a.tree)}},{re:/^#(\w+)#/,parse:function(a,c){var b={token:"$smarty",tree:[]};T(".config."+RegExp.$1,b,"smarty");a.tree.push(b.tree[0]);v(c,a)}},{re:/^\s*\[\s*/,parse:function(a,c){var b=A(c,/^\s*,\s*/,/^('[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\.[^"\\]*)*"|\w+)\s*=>\s*/);a.tree.push({type:"plugin",name:"__array",params:b});a.value+=b.toString();if(b=c.slice(b.toString().length).match(/\s*\]/))a.value+=b[0]}},{re:/^[\d.]+/,parse:function(a,c){x(a.token,a.tree);v(c,a)}},{re:/^\w+/,parse:function(a,c){x(a.token,a.tree);v(c,a)}}],h=function(a){this.tree=[];this.tree.blocks={};this.scripts={};this.default_modifiers=[];this.filters={variable:[],post:[]};this.smarty={smarty:{block:{},"break":!1,capture:{},"continue":!1,counter:{},cycle:{},foreach:{},section:{},now:Math.floor((new Date).getTime()/1E3),"const":{},config:{},current_dir:"/",template:"",ldelim:h.prototype.left_delimiter,rdelim:h.prototype.right_delimiter,version:"3.2"}};E=this.tree.blocks;r(O(h.prototype.filters_global.pre,ca((new String(a?a:"")).replace(/\r\n/g,"\n"))),this.tree)};h.prototype.fetch=function(a){E=this.tree.blocks;X=this.scripts;escape_html=this.escape_html;default_modifiers=h.prototype.default_modifiers_global.concat(this.default_modifiers);this.data=H("object"==typeof a?a:{},this.smarty);varFilters=h.prototype.filters_global.variable.concat(this.filters.variable);a=q(this.tree,this.data);h.prototype.debugging&&B.debug.process([],this.data);return O(h.prototype.filters_global.post.concat(this.filters.post),a)};h.prototype.escape_html=!1;h.prototype.registerPlugin=function(a,c,b){"modifier"==a?J["__"+c]=b:B[c]={type:a,process:b}};h.prototype.registerFilter=function(a,c){(this.tree?this.filters:h.prototype.filters_global)["output"==a?"post":a].push(c)};h.prototype.filters_global={pre:[],variable:[],post:[]};h.prototype.configLoad=function(a,c,b){b=b?b:this.data;a=a.replace(/\r\n/g,"\n").replace(/^\s+|\s+$/g,"");for(var d=/^\s*(?:\[([^\]]+)\]|(?:(\w+)[ \t]*=[ \t]*("""|'[^'\\\n]*(?:\\.[^'\\\n]*)*'|"[^"\\\n]*(?:\\.[^"\\\n]*)*"|[^\n]*)))/m,e="",f=a.match(d);f;f=a.match(d)){a=a.slice(f.index+f[0].length);if(f[1])e=f[1];else if((!e||e==c)&&"."!=e.substr(0,1))if('"""'==f[3]){var g=a.match(/"""/);g&&(b.smarty.config[f[2]]=a.slice(0,g.index),a=a.slice(g.index+g[0].length))}else b.smarty.config[f[2]]=F(f[3]);if(f=a.match(/\n+/))a=a.slice(f.index+f[0].length);else break}};h.prototype.clearConfig=function(a){a?delete this.data.smarty.config[a]:this.data.smarty.config={}};h.prototype.addDefaultModifier=function(a){a instanceof Array||(a=[a]);for(var c=0;c<a.length;++c){var b={value:"",tree:[0]};v("|"+a[c],b);(this.tree?this.default_modifiers:this.default_modifiers_global).push(b.tree[0])}};h.prototype.default_modifiers_global=[];h.prototype.getTemplate=function(a){throw Error("No template for "+a);};h.prototype.getFile=function(a){throw Error("No file for "+a);};h.prototype.getJavascript=function(a){throw Error("No Javascript for "+a);};h.prototype.getConfig=function(a){throw Error("No config for "+a);};h.prototype.auto_literal=!0;h.prototype.left_delimiter="{";h.prototype.right_delimiter="}";h.prototype.debugging=!1;h.prototype.registerPlugin("function","__array",function(a,c){var b=[],d;for(d in a)a.hasOwnProperty(d)&&a[d]&&"function"!=typeof a[d]&&(b[d]=a[d]);return b});h.prototype.registerPlugin("function","__func",function(a,c){for(var b=[],d={},e=0;e<a.length;++e)b.push(a.name+"__p"+e),d[a.name+"__p"+e]=a[e];return S(("__owner"in c&&a.name in c.__owner?"__owner."+a.name:a.name)+"("+b.join(",")+")",H({},c,d))});h.prototype.registerPlugin("function","__quoted",function(a,c){return a.join("")});h.prototype.registerPlugin("function","break",function(a,c){c.smarty["break"]=!0;return""});h.prototype.registerPlugin("function","continue",function(a,c){c.smarty["continue"]=!0;return""});h.prototype.registerPlugin("function","call",function(a,c){var b=a.__get("name",null,0);delete a.name;var d=a.__get("assign",!1);delete a.assign;b=B[b].process(a,c);return d?(y(d,b,c),""):b});h.prototype.registerPlugin("function","append",function(a,c){var b=a.__get("var",null,0);b in c&&c[b]instanceof Array||(c[b]=[]);var d=a.__get("index",!1),e=a.__get("value",null,1);!1===d?c[b].push(e):c[b][d]=e;return""});h.prototype.registerPlugin("function","assign",function(a,c){y(a.__get("var",null,0),a.__get("value",null,1),c);return""});h.prototype.registerPlugin("block","capture",function(a,c,b,d){c&&(c=c.replace(/^\n/,""),b.smarty.capture[a.__get("name","default",0)]=c,"assign"in a&&y(a.assign,c,b),(a=a.__get("append",!1))&&(a in b?b[a]instanceof Array&&b[a].push(c):b[a]=[c]));return""});h.prototype.registerPlugin("function","eval",function(a,c){var b=[];r(a.__get("var","",0),b);b=q(b,c);return"assign"in a?(y(a.assign,b,c),""):b});h.prototype.registerPlugin("function","include",function(a,c){var b=a.__get("file",null,0),d=H({},c,a);d.smarty.template=b;b=q(ba(b,[],0<=I(a,"nocache")),d);return"assign"in a?(y(a.assign,b,c),""):b});h.prototype.registerPlugin("block","nocache",function(a,c,b,d){return c});h.prototype.registerPlugin("block","javascript",function(a,c,b,d){b.$this=b;S(c,b);delete b.$this;return""});h.prototype.registerPlugin("function","config_load",function(a,c){h.prototype.configLoad(h.prototype.getConfig(a.__get("file",null,0)),a.__get("section","",1),c);return""});h.prototype.registerPlugin("modifier","defaultValue",function(a,c){return a&&"null"!=a&&"undefined"!=a?a:c?c:""});var n={window:"object"==typeof window?window:{document:{}}};(function(a,c){"function"===typeof define&&define.amd?define([],c):"object"===typeof module&&module.exports?module.exports=c():a.jSmart=c()})(this,function(){return h});h.prototype.registerPlugin("function","counter",function(a,c){var b=a.__get("name","default");if(b in c.smarty.counter){var d=c.smarty.counter[b];"start"in a?d.value=parseInt(a.start):(d.value=parseInt(d.value),d.skip=parseInt(d.skip),d.value="down"==d.direction?d.value-d.skip:d.value+d.skip);d.skip=a.__get("skip",d.skip);d.direction=a.__get("direction",d.direction);d.assign=a.__get("assign",d.assign)}else c.smarty.counter[b]={value:parseInt(a.__get("start",1)),skip:parseInt(a.__get("skip",1)),direction:a.__get("direction","up"),assign:a.__get("assign",!1)};return c.smarty.counter[b].assign?(c[c.smarty.counter[b].assign]=c.smarty.counter[b].value,""):a.__get("print",!0)?c.smarty.counter[b].value:""});h.prototype.registerPlugin("function","cycle",function(a,c){var b=a.__get("name","default"),d=a.__get("reset",!1);b in c.smarty.cycle||(c.smarty.cycle[b]={arr:[""],delimiter:a.__get("delimiter",","),index:0},d=!0);a.__get("delimiter",!1)&&(c.smarty.cycle[b].delimiter=a.delimiter);var e=a.__get("values",!1);if(e){var f=[];if(e instanceof Object)for(nm in e)f.push(e[nm]);else f=e.split(c.smarty.cycle[b].delimiter);if(f.length!=c.smarty.cycle[b].arr.length||f[0]!=c.smarty.cycle[b].arr[0])c.smarty.cycle[b].arr=f,c.smarty.cycle[b].index=0,d=!0}a.__get("advance","true")&&(c.smarty.cycle[b].index+=1);if(c.smarty.cycle[b].index>=c.smarty.cycle[b].arr.length||d)c.smarty.cycle[b].index=0;return a.__get("assign",!1)?(y(a.assign,c.smarty.cycle[b].arr[c.smarty.cycle[b].index],c),""):a.__get("print",!0)?c.smarty.cycle[b].arr[c.smarty.cycle[b].index]:""});h.prototype.print_r=function(a,c){if(a instanceof Object){var b=(a instanceof Array?"Array["+a.length+"]":"Object")+"<br>",d;for(d in a)a.hasOwnProperty(d)&&(b+=c+"&nbsp;&nbsp;<strong>"+d+"</strong> : "+h.prototype.print_r(a[d],c+"&nbsp;&nbsp;&nbsp;")+"<br>");return b}return a};h.prototype.registerPlugin("function","debug",function(a,c){"undefined"!=typeof dbgWnd&&dbgWnd.close();dbgWnd=window.open("","","width=680,height=600,resizable,scrollbars=yes");var b="",d=0,e;for(e in c)b+="<tr class="+(++d%2?"odd":"even")+"><td><strong>"+e+"</strong></td><td>"+h.prototype.print_r(c[e],"")+"</td></tr>";dbgWnd.document.write("            <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'>            <head> \t            <title>jSmart Debug Console</title>               <style type='text/css'>                  table {width: 100%;}                  td {vertical-align:top;width: 50%;}                  .even td {background-color: #fafafa;}               </style>            </head>            <body>               <h1>jSmart Debug Console</h1>               <h2>assigned template variables</h2>               <table>"+
b+"</table>            </body>            </html>         ");return""});h.prototype.registerPlugin("function","fetch",function(a,c){var b=h.prototype.getFile(a.__get("file",null,0));return"assign"in a?(y(a.assign,b,c),""):b});h.prototype.registerPlugin("function","insert",function(a,c){var b={},d;for(d in a)a.hasOwnProperty(d)&&isNaN(d)&&a[d]&&"string"==typeof a[d]&&"name"!=d&&"assign"!=d&&"script"!=d&&(b[d]=a[d]);d="insert_";"script"in a&&(eval(h.prototype.getJavascript(a.script)),d="smarty_insert_");b=eval(d+a.__get("name",null,0))(b,c);return"assign"in a?(y(a.assign,b,c),""):b});h.prototype.registerPlugin("function","html_checkboxes",function(a,c){var b=a.__get("type","checkbox"),d=a.__get("name",b);"checkbox"==b&&(d+="[]");var e=a.__get("values",a.options),f=a.__get("options",[]),g="options"in a,m;if(!g)for(m in a.output)f.push(a.output[m]);var l=a.__get("selected",!1),k=a.__get("separator",""),h=Boolean(a.__get("labels",!0)),p=[],Y=0,w="";for(m in e)e.hasOwnProperty(m)&&(w=h?"<label>":"",w+='<input type="'+b+'" name="'+d+'" value="'+(g?m:e[m])+'" ',l==(g?m:e[m])&&(w+='checked="checked" '),w+="/>"+f[g?m:Y++],w+=h?"</label>":"",w+=k,p.push(w));return"assign"in a?(y(a.assign,p,c),""):p.join("\n")});h.prototype.registerPlugin("function","html_image",function(a,c){var b=a.__get("file",null),d=a.__get("width",!1),e=a.__get("height",!1),f=a.__get("alt",""),g=a.__get("href",!1),m={file:1,width:1,height:1,alt:1,href:1,basedir:1,path_prefix:1},b='<img src="'+a.__get("path_prefix","")+b+'" alt="'+
f+'"'+(d?' width="'+d+'"':"")+(e?' height="'+e+'"':""),l;for(l in a)a.hasOwnProperty(l)&&"string"==typeof a[l]&&(l in m||(b+=" "+l+'="'+a[l]+'"'));b+=" />";return g?'<a href="'+g+'">'+b+"</a>":b});h.prototype.registerPlugin("function","html_options",function(a,c){var b=a.__get("values",a.options),d=a.__get("options",[]),e="options"in a,f;if(!e)for(f in a.output)d.push(a.output[f]);var g=a.__get("selected",!1);!g||g instanceof Array||(g=[g]);var m=[],l="",k=0;for(f in b)if(b.hasOwnProperty(f)){l='<option value="'+
(e?f:b[f])+'"';if(g)for(k=0;k<g.length;++k)if(g[k]==(e?f:b[f])){l+=' selected="selected"';break}l+=">"+d[e?f:k++]+"</option>";m.push(l)}b=a.__get("name",!1);return(b?'<select name="'+b+'">\n'+m.join("\n")+"\n</select>":m.join("\n"))+"\n"});h.prototype.registerPlugin("function","html_radios",function(a,c){a.type="radio";return B.html_checkboxes.process(a,c)});h.prototype.registerPlugin("function","html_select_date",function(a,c){var b=a.__get("prefix","Date_"),d="January February March April May June July August September October November December".split(" "),e;e=""+('<select name="'+b+'Month">\n');for(var f=0,f=0;f<d.length;++f)e+='<option value="'+f+'">'+d[f]+"</option>\n";e=e+"</select>\n"+('<select name="'+b+'Day">\n');for(f=0;31>f;++f)e+='<option value="'+f+'">'+f+"</option>\n";return e+="</select>\n"});h.prototype.registerPlugin("function","html_table",function(a,c){var b=[],d;if(a.loop instanceof Array)b=a.loop;else for(d in a.loop)a.loop.hasOwnProperty(d)&&b.push(a.loop[d]);var e=a.__get("rows",!1),f=a.__get("cols",!1);f||(f=e?Math.ceil(b.length/
e):3);var g=[];if(isNaN(f)){if("object"==typeof f)for(d in f)f.hasOwnProperty(d)&&g.push(f[d]);else g=f.split(/\s*,\s*/);f=g.length}var e=e?e:Math.ceil(b.length/f),m=a.__get("inner","cols");d=a.__get("caption","");var l=a.__get("table_attr",'border="1"'),k=a.__get("th_attr",!1);k&&"object"!=typeof k&&(k=[k]);var h=a.__get("tr_attr",!1);h&&"object"!=typeof h&&(h=[h]);var p=a.__get("td_attr",!1);p&&"object"!=typeof p&&(p=[p]);for(var Y=a.__get("trailpad","&nbsp;"),w=a.__get("hdir","right"),n=a.__get("vdir","down"),q="",r=0;r<e;++r){for(var q=q+("<tr"+(h?" "+h[r%h.length]:"")+">\n"),t=0;t<f;++t)var v="cols"==m?("down"==n?r:e-1-r)*f+("right"==w?t:f-1-t):("right"==w?t:f-1-t)*e+("down"==n?r:e-1-r),q=q+("<td"+(p?" "+p[t%p.length]:"")+">"+(v<b.length?b[v]:Y)+"</td>\n");q+="</tr>\n"}b="";if(g.length){b="\n<thead><tr>";for(e=0;e<g.length;++e)b+="\n<th"+(k?" "+k[e%k.length]:"")+">"+g["right"==w?e:g.length-1-e]+"</th>";b+="\n</tr></thead>"}return"<table "+l+">"+(d?"\n<caption>"+d+"</caption>":"")+b+"\n<tbody>\n"+
q+"</tbody>\n</table>\n"});h.prototype.registerPlugin("function","include_javascript",function(a,c){var b=a.__get("file",null,0);if(a.__get("once",!0)&&b in X)return"";X[b]=!0;b=S(h.prototype.getJavascript(b),{$this:c});return"assign"in a?(y(a.assign,b,c),""):b});h.prototype.registerPlugin("function","include_php",function(a,c){return B.include_javascript.process(a,c)});n.rawurlencode=function(a){a=(a+"").toString();return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")};n.bin2hex=function(a){var c,b,d="",e;a+="";c=0;for(b=a.length;c<b;c++)e=a.charCodeAt(c).toString(16),d+=2>e.length?"0"+e:e;return d};n.ord=function(a){var c=a+"";a=c.charCodeAt(0);if(55296<=a&&56319>=a){if(1===c.length)return a;c=c.charCodeAt(1);return 1024*(a-55296)+(c-56320)+65536}return a};h.prototype.registerPlugin("function","mailto",function(a,c){var b=a.__get("address",null),d=a.__get("encode","none"),e=a.__get("text",b),f=n.rawurlencode(a.__get("cc","")).replace("%40","@"),g=n.rawurlencode(a.__get("bcc","")).replace("%40","@"),h=n.rawurlencode(a.__get("followupto","")).replace("%40","@"),l=n.rawurlencode(a.__get("subject","")),k=n.rawurlencode(a.__get("newsgroups","")),u=a.__get("extra",""),b=b+(f?"?cc="+f:"")+(g?(f?"&":"?")+"bcc="+g:""),b=b+(l?(f||g?"&":"?")+"subject="+l:""),b=b+(k?(f||g||l?"&":"?")+"newsgroups="+k:""),b=b+(h?(f||g||l||k?"&":"?")+"followupto="+h:"");s='<a href="mailto:'+b+'" '+u+">"+e+"</a>";if("javascript"==d){s="document.write('"+
s+"');";e="";for(d=0;d<s.length;++d)e+="%"+n.bin2hex(s.substr(d,1));return'<script type="text/javascript">eval(unescape(\''+e+"'))\x3c/script>"}if("javascript_charcode"==d){e=[];for(d=0;d<s.length;++d)e.push(n.ord(s.substr(d,1)));return'<script type="text/javascript" language="javascript">\n\x3c!--\n{document.write(String.fromCharCode('+e.join(",")+"))}\n//--\x3e\n\x3c/script>\n"}if("hex"==d){if(b.match(/^.+\?.+$/))throw Error("mailto: hex encoding does not work with extra attributes. Try javascript.");f="";for(d=0;d<b.length;++d)f=b.substr(d,1).match(/\w/)?f+("%"+n.bin2hex(b.substr(d,1))):f+b.substr(d,1);b="";for(d=0;d<e.length;++d)b+="&#x"+n.bin2hex(e.substr(d,1))+";";return'<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;'+f+'" '+u+">"+b+"</a>"}return s});n.sprintf=function(){var a=arguments,c=0,b=function(a,b,c,d){c||(c=" ");b=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+b:b+a},d=function(a,c,d,e,k,h){var p=e-a.length;0<p&&(a=d||!k?b(a,e,h,d):a.slice(0,c.length)+b("",p,"0",!0)+
a.slice(c.length));return a},e=function(a,c,e,l,k,h,p){a>>>=0;e=e&&a&&{2:"0b",8:"0",16:"0x"}[c]||"";a=e+b(a.toString(c),h||0,"0",!1);return d(a,e,l,k,p)};return a[c++].replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(f,g,h,l,k,u,p){var n,w;if("%%"===f)return"%";var q=!1;w="";var r=k=!1;n=" ";for(var t=h.length,v=0;h&&v<t;v++)switch(h.charAt(v)){case" ":w=" ";break;case"+":w="+";break;case"-":q=!0;break;case"'":n=h.charAt(v+1);break;case"0":k=!0;n="0";break;case"#":r=!0}l=l?"*"===l?+a[c++]:"*"==l.charAt(0)?+a[l.slice(1,-1)]:+l:0;0>l&&(l=-l,q=!0);if(!isFinite(l))throw Error("sprintf: (minimum-)width must be finite");u=u?"*"===u?+a[c++]:"*"==u.charAt(0)?+a[u.slice(1,-1)]:+u:-1<"fFeE".indexOf(p)?6:"d"===p?0:void 0;g=g?a[g.slice(0,-1)]:a[c++];switch(p){case"s":return p=String(g),null!=u&&(p=p.slice(0,u)),d(p,"",q,l,k,n);case"c":return p=String.fromCharCode(+g),null!=u&&(p=p.slice(0,u)),d(p,"",q,l,k,void 0);case"b":return e(g,2,r,q,l,u,k);case"o":return e(g,8,r,q,l,u,k);case"x":return e(g,16,r,q,l,u,k);case"X":return e(g,16,r,q,l,u,k).toUpperCase();case"u":return e(g,10,r,q,l,u,k);case"i":case"d":return n=+g||0,n=Math.round(n-n%1),f=0>n?"-":w,g=f+b(String(Math.abs(n)),u,"0",!1),d(g,f,q,l,k);case"e":case"E":case"f":case"F":case"g":case"G":return n=+g,f=0>n?"-":w,w=["toExponential","toFixed","toPrecision"]["efg".indexOf(p.toLowerCase())],p=["toString","toUpperCase"]["eEfFgG".indexOf(p)%2],g=f+Math.abs(n)[w](u),d(g,f,q,l,k)[p]();default:return f}})};h.prototype.registerPlugin("function","math",function(a,c){with(Math)with(a)var b=eval(a.__get("equation",null).replace(/pi\(\s*\)/g,"PI"));"format"in a&&(b=n.sprintf(a.format,b));return"assign"in a?(y(a.assign,b,c),""):b});h.prototype.registerPlugin("modifier","wordwrap",function(a,c,b,d){c=c||80;b=b||"\n";a=(new String(a)).split("\n");for(var e=0;e<a.length;++e){for(var f=a[e],g="";f.length>c;){for(var h=0,l=f.slice(h).match(/\s+/);l&&h+l.index<=c;l=f.slice(h).match(/\s+/))h+=l.index+l[0].length;h=h||(d?c:l?l.index+l[0].length:f.length);g+=f.slice(0,h).replace(/\s+$/,"");h<f.length&&(g+=b);f=f.slice(h)}a[e]=g+f}return a.join("\n")});h.prototype.registerPlugin("block","textformat",function(a,c,b,d){if(!c)return"";c=new String(c);d=a.__get("wrap",80);var e=a.__get("wrap_char","\n"),f=a.__get("wrap_cut",!1),g=a.__get("indent_char"," "),h=a.__get("indent",0),l=Array(h+1).join(g),k=a.__get("indent_first",0),g=Array(k+1).join(g);"email"==a.__get("style","")&&(d=72);c=c.split("\n");for(var u=0;u<c.length;++u){var p=c[u];p&&(p=p.replace(/^\s+|\s+$/,"").replace(/\s+/g," "),k&&(p=g+p),p=J.__wordwrap(p,d-h,e,f),h&&(p=p.replace(/^/mg,l)),c[u]=p)}d=c.join(e+e);return"assign"in a?(y(a.assign,d,b),""):d});h.prototype.registerPlugin("modifier","capitalize",function(a,c){if("string"!=typeof a)return a;for(var b=RegExp(c?"[\\W\\d]+":"\\W+"),d=null,e="",d=a.match(b);d;d=a.match(b)){var f=a.slice(0,d.index),e=f.match(/\d/)?e+f:e+(f.charAt(0).toUpperCase()+f.slice(1)),e=e+a.slice(d.index,d.index+d[0].length);a=a.slice(d.index+d[0].length)}return a.match(/\d/)?e+a:e+a.charAt(0).toUpperCase()+a.slice(1)});h.prototype.registerPlugin("modifier","cat",function(a,c){c=c?c:"";return new String(a)+c});h.prototype.registerPlugin("modifier","count",function(a,c){if(null===a||"undefined"===typeof a)return 0;if(a.constructor!==Array&&a.constructor!==Object)return 1;c=Boolean(c);var b,d=0;for(b in a)a.hasOwnProperty(b)&&(d++,c&&a[b]&&(a[b].constructor===Array||a[b].constructor===Object)&&(d+=J.__count(a[b],!0)));return d});h.prototype.registerPlugin("modifier","count_characters",function(a,c){a=new String(a);return c?a.length:a.replace(/\s/g,"").length});h.prototype.registerPlugin("modifier","count_paragraphs",function(a){return(a=(new String(a)).match(/\n+/g))?a.length+1:1});h.prototype.registerPlugin("modifier","count_sentences",function(a){return"string"==typeof a&&(a=a.match(/[^\s]\.(?!\w)/g))?a.length:0});h.prototype.registerPlugin("modifier","count_words",function(a){return"string"==typeof a&&(a=a.match(/\w+/g))?a.length:0});n.getenv=function(a){return this.php_js&&this.php_js.ENV&&this.php_js.ENV[a]?this.php_js.ENV[a]:!1};n.setlocale=function(a,c){var b="",d=[],e=0,e=this.window.document,f=function p(a){if(a instanceof RegExp)return RegExp(a);if(a instanceof Date)return new Date(a);var b={},c;for(c in a)b[c]="object"===typeof a[c]?p(a[c]):a[c];return b},g=function(a){return 1!==a?1:0},h=function(a){return 1<a?1:0};try{this.php_js=this.php_js||{}}catch(l){this.php_js={}}var k=this.php_js;k.locales||(k.locales={},k.locales.en={LC_COLLATE:function(a,b){return a==b?0:a>b?1:-1},LC_CTYPE:{an:/^[A-Za-z\d]+$/g,al:/^[A-Za-z]+$/g,ct:/^[\u0000-\u001F\u007F]+$/g,dg:/^[\d]+$/g,gr:/^[\u0021-\u007E]+$/g,lw:/^[a-z]+$/g,pr:/^[\u0020-\u007E]+$/g,pu:/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g,sp:/^[\f\n\r\t\v ]+$/g,up:/^[A-Z]+$/g,xd:/^[A-Fa-f\d]+$/g,CODESET:"UTF-8",lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},LC_TIME:{a:"Sun Mon Tue Wed Thu Fri Sat".split(" "),A:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),b:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),B:"January February March April May June July August September October November December".split(" "),c:"%a %d %b %Y %r %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%m/%d/%Y",X:"%r",alt_digits:"",ERA:"",ERA_YEAR:"",ERA_D_T_FMT:"",ERA_D_FMT:"",ERA_T_FMT:""},LC_MONETARY:{int_curr_symbol:"USD",currency_symbol:"$",mon_decimal_point:".",mon_thousands_sep:",",mon_grouping:[3],positive_sign:"",negative_sign:"-",int_frac_digits:2,frac_digits:2,p_cs_precedes:1,p_sep_by_space:0,n_cs_precedes:1,n_sep_by_space:0,p_sign_posn:3,n_sign_posn:0},LC_NUMERIC:{decimal_point:".",thousands_sep:",",grouping:[3]},LC_MESSAGES:{YESEXPR:"^[yY].*",NOEXPR:"^[nN].*",YESSTR:"",NOSTR:""},nplurals:g},k.locales.en_US=f(k.locales.en),k.locales.en_US.LC_TIME.c="%a %d %b %Y %r %Z",k.locales.en_US.LC_TIME.x="%D",k.locales.en_US.LC_TIME.X="%r",k.locales.en_US.LC_MONETARY.int_curr_symbol="USD ",k.locales.en_US.LC_MONETARY.p_sign_posn=1,k.locales.en_US.LC_MONETARY.n_sign_posn=1,k.locales.en_US.LC_MONETARY.mon_grouping=[3,3],k.locales.en_US.LC_NUMERIC.thousands_sep="",k.locales.en_US.LC_NUMERIC.grouping=[],k.locales.en_GB=f(k.locales.en),k.locales.en_GB.LC_TIME.r="%l:%M:%S %P %Z",k.locales.en_AU=f(k.locales.en_GB),k.locales.C=f(k.locales.en),k.locales.C.LC_CTYPE.CODESET="ANSI_X3.4-1968",k.locales.C.LC_MONETARY={int_curr_symbol:"",currency_symbol:"",mon_decimal_point:"",mon_thousands_sep:"",mon_grouping:[],p_cs_precedes:127,p_sep_by_space:127,n_cs_precedes:127,n_sep_by_space:127,p_sign_posn:127,n_sign_posn:127,positive_sign:"",negative_sign:"",int_frac_digits:127,frac_digits:127},k.locales.C.LC_NUMERIC={decimal_point:".",thousands_sep:"",grouping:[]},k.locales.C.LC_TIME.c="%a %b %e %H:%M:%S %Y",k.locales.C.LC_TIME.x="%m/%d/%y",k.locales.C.LC_TIME.X="%H:%M:%S",k.locales.C.LC_MESSAGES.YESEXPR="^[yY]",k.locales.C.LC_MESSAGES.NOEXPR="^[nN]",k.locales.fr=f(k.locales.en),k.locales.fr.nplurals=h,k.locales.fr.LC_TIME.a="dim lun mar mer jeu ven sam".split(" "),k.locales.fr.LC_TIME.A="dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),k.locales.fr.LC_TIME.b="jan f\u00e9v mar avr mai jun jui ao\u00fb sep oct nov d\u00e9c".split(" "),k.locales.fr.LC_TIME.B="janvier f\u00e9vrier mars avril mai juin juillet ao\u00fbt septembre octobre novembre d\u00e9cembre".split(" "),k.locales.fr.LC_TIME.c="%a %d %b %Y %T %Z",k.locales.fr.LC_TIME.p=["",""],k.locales.fr.LC_TIME.P=["",""],k.locales.fr.LC_TIME.x="%d.%m.%Y",k.locales.fr.LC_TIME.X="%T",k.locales.fr_CA=f(k.locales.fr),k.locales.fr_CA.LC_TIME.x="%Y-%m-%d");k.locale||(k.locale="en_US",e.getElementsByTagNameNS&&e.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","html")[0]?e.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","html")[0].getAttributeNS&&e.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","html")[0].getAttributeNS("http://www.w3.org/XML/1998/namespace","lang")?k.locale=e.getElementsByTagName("http://www.w3.org/1999/xhtml","html")[0].getAttributeNS("http://www.w3.org/XML/1998/namespace","lang"):e.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","html")[0].lang&&(k.locale=e.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","html")[0].lang):e.getElementsByTagName("html")[0]&&e.getElementsByTagName("html")[0].lang&&(k.locale=e.getElementsByTagName("html")[0].lang));k.locale=k.locale.replace("-","_");!(k.locale in k.locales)&&k.locale.replace(/_[a-zA-Z]+$/,"")in k.locales&&(k.locale=k.locale.replace(/_[a-zA-Z]+$/,""));k.localeCategories||(k.localeCategories={LC_COLLATE:k.locale,LC_CTYPE:k.locale,LC_MONETARY:k.locale,LC_NUMERIC:k.locale,LC_TIME:k.locale,LC_MESSAGES:k.locale});if(null===c||""===c)c=this.getenv(a)||this.getenv("LANG");else if("[object Array]"===Object.prototype.toString.call(c))for(e=0;e<c.length;e++)if(c[e]in this.php_js.locales){c=c[e];break}else if(e===c.length-1)return!1;if("0"===c||0===c){if("LC_ALL"===a){for(b in this.php_js.localeCategories)d.push(b+"="+this.php_js.localeCategories[b]);return d.join(";")}return this.php_js.localeCategories[a]}if(!(c in
this.php_js.locales))return!1;if("LC_ALL"===a)for(b in this.php_js.localeCategories)this.php_js.localeCategories[b]=c;else this.php_js.localeCategories[a]=c;return c};n.strftime=function(a,c){this.php_js=this.php_js||{};this.setlocale("LC_ALL",0);for(var b=this.php_js,d=function(a,b,c){for("undefined"===typeof c&&(c=10);parseInt(a,10)<c&&1<c;c/=10)a=b.toString()+a;return a.toString()},e=b.locales[b.localeCategories.LC_TIME].LC_TIME,f={a:function(a){return e.a[a.getDay()]},A:function(a){return e.A[a.getDay()]},b:function(a){return e.b[a.getMonth()]},B:function(a){return e.B[a.getMonth()]},C:function(a){return d(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return d(parseInt(this.G(a)/100,10),0)},G:function(a){var b=a.getFullYear(),c=parseInt(f.V(a),10);a=parseInt(f.W(a),10);a>c?b++:0===a&&52<=c&&b--;return b},H:["getHours","0"],I:function(a){a=a.getHours()%12;return d(0===a?12:a,0)},j:function(a){var b=a-new Date(""+a.getFullYear()+"/1/1 GMT"),b=b+6E4*a.getTimezoneOffset();a=parseInt(b/6E4/60/24,10)+1;return d(a,0,100)},k:["getHours","0"],l:function(a){a=a.getHours()%12;return d(0===a?12:a," ")},m:function(a){return d(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a){return e.p[12<=a.getHours()?1:0]},P:function(a){return e.P[12<=a.getHours()?1:0]},s:function(a){return Date.parse(a)/1E3},S:["getSeconds","0"],u:function(a){a=a.getDay();return 0===a?7:a},U:function(a){var b=parseInt(f.j(a),10);a=6-a.getDay();b=parseInt((b+a)/7,10);return d(b,0)},V:function(a){var b=parseInt(f.W(a),10),c=(new Date(""+a.getFullYear()+"/1/1")).getDay(),b=b+(4<c||1>=c?0:1);53===b&&4>(new Date(""+a.getFullYear()+"/12/31")).getDay()?b=1:0===b&&(b=f.V(new Date(""+(a.getFullYear()-1)+"/12/31")));return d(b,0)},w:"getDay",W:function(a){var b=parseInt(f.j(a),10);a=7-f.u(a);b=parseInt((b+a)/7,10);return d(b,0,10)},y:function(a){return d(a.getFullYear()%100,0)},Y:"getFullYear",z:function(a){a=a.getTimezoneOffset();var b=d(parseInt(Math.abs(a/60),10),0),c=d(a%60,0);return(0<a?"-":"+")+b+
c},Z:function(a){return a.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(a){return"%"}},g="undefined"===typeof c?new Date:"object"===typeof c?new Date(c):new Date(1E3*c),h={c:"locale",D:"%m/%d/%y",F:"%y-%m-%d",h:"%b",n:"\n",r:"locale",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};a.match(/%[cDFhnrRtTxX]/);)a=a.replace(/%([cDFhnrRtTxX])/g,function(a,b){var c=h[b];return"locale"===c?e[b]:c});return a.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,function(a,b){var c=f[b];return"string"===typeof c?g[c]():"function"===typeof c?c(g):"object"===typeof c&&"string"===typeof c[0]?d(g[c[0]](),c[1]):b})};n.strtotime=function(a,c){function b(a){var b=a.split(" ");a=b[0];var c=b[1].substring(0,3),d=/\d+/.test(a),e=("last"===a?-1:1)*("ago"===b[2]?-1:1);d&&(e*=parseInt(a,10));if(h.hasOwnProperty(c)&&!b[1].match(/^mon(day|\.)?$/i))return f["set"+h[c]](f["get"+h[c]]()+e);if("wee"===c)return f.setDate(f.getDate()+7*e);if("next"===a||"last"===a)b=e,c=g[c],"undefined"!==typeof c&&(c-=f.getDay(),0===c?c=7*b:0<c&&"last"===a?c-=7:0>c&&"next"===a&&(c+=7),f.setDate(f.getDate()+c));else if(!d)return!1;return!0}var d,e,f,g,h,l;if(!a)return!1;a=a.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();if((d=a.match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/))&&d[2]===d[4])if(1901<d[1])switch(d[2]){case"-":return 12<d[3]||31<d[5]?!1:new Date(d[1],parseInt(d[3],10)-1,d[5],d[6]||0,d[7]||0,d[8]||0,d[9]||0)/1E3;case".":return!1;case"/":return 12<d[3]||31<d[5]?!1:new Date(d[1],parseInt(d[3],10)-1,d[5],d[6]||0,d[7]||0,d[8]||0,d[9]||0)/1E3}else if(1901<d[5])switch(d[2]){case"-":return 12<d[3]||31<d[1]?!1:new Date(d[5],parseInt(d[3],10)-1,d[1],d[6]||0,d[7]||0,d[8]||0,d[9]||0)/1E3;case".":return 12<d[3]||31<d[1]?!1:new Date(d[5],parseInt(d[3],10)-1,d[1],d[6]||0,d[7]||0,d[8]||0,d[9]||0)/1E3;case"/":return 12<d[1]||31<d[3]?!1:new Date(d[5],parseInt(d[1],10)-1,d[3],d[6]||0,d[7]||0,d[8]||0,d[9]||0)/1E3}else switch(d[2]){case"-":if(12<d[3]||31<d[5]||70>d[1]&&38<d[1])return!1;e=0<=d[1]&&38>=d[1]?+d[1]+2E3:d[1];return new Date(e,parseInt(d[3],10)-1,d[5],d[6]||0,d[7]||0,d[8]||0,d[9]||0)/1E3;case".":if(70<=d[5])return 12<d[3]||31<d[1]?!1:new Date(d[5],parseInt(d[3],10)-1,d[1],d[6]||0,d[7]||0,d[8]||0,d[9]||0)/1E3;if(60>d[5]&&!d[6]){if(23<d[1]||59<d[3])return!1;e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),d[1]||0,d[3]||0,d[5]||0,d[9]||0)/1E3}return!1;case"/":if(12<d[1]||31<d[3]||70>d[5]&&38<d[5])return!1;e=0<=d[5]&&38>=d[5]?+d[5]+2E3:d[5];return new Date(e,parseInt(d[1],10)-1,d[3],d[6]||0,d[7]||0,d[8]||0,d[9]||0)/1E3;case":":if(23<d[1]||59<d[3]||59<d[5])return!1;e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate(),d[1]||0,d[3]||0,d[5]||0)/1E3}if("now"===a)return null===c||isNaN(c)?(new Date).getTime()/1E3|0:c|0;if(!isNaN(d=Date.parse(a)))return d/1E3|0;f=c?new Date(1E3*c):new Date;g={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};h={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"};d=a.match(RegExp("([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)|(last|next)\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?))(\\sago)?","gi"));if(!d)return!1;l=0;for(e=d.length;l<e;l++)if(!b(d[l]))return!1;return f.getTime()/
1E3};makeTimeStamp=function(a){if(!a)return Math.floor((new Date).getTime()/1E3);if(isNaN(a))return a=n.strtotime(a),-1==a||!1===a?Math.floor((new Date).getTime()/1E3):a;a=new String(a);return 14==a.length?Math.floor((new Date(a.substr(0,4),a.substr(4,2)-1,a.substr(6,2),a.substr(8,2),a.substr(10,2))).getTime()/1E3):parseInt(a)};h.prototype.registerPlugin("modifier","date_format",function(a,c,b){return a?n.strftime(c?c:"%b %e, %Y",makeTimeStamp(a?a:b)):""});n.get_html_translation_table=function(a,c){var b={},d={},e,f={},g={},h={},l={};f[0]="HTML_SPECIALCHARS";f[1]="HTML_ENTITIES";g[0]="ENT_NOQUOTES";g[2]="ENT_COMPAT";g[3]="ENT_QUOTES";h=isNaN(a)?a?a.toUpperCase():"HTML_SPECIALCHARS":f[a];l=isNaN(c)?c?c.toUpperCase():"ENT_COMPAT":g[c];if("HTML_SPECIALCHARS"!==h&&"HTML_ENTITIES"!==h)throw Error("Table: "+h+" not supported");b["38"]="&amp;";"HTML_ENTITIES"===h&&(b["160"]="&nbsp;",b["161"]="&iexcl;",b["162"]="&cent;",b["163"]="&pound;",b["164"]="&curren;",b["165"]="&yen;",b["166"]="&brvbar;",b["167"]="&sect;",b["168"]="&uml;",b["169"]="&copy;",b["170"]="&ordf;",b["171"]="&laquo;",b["172"]="&not;",b["173"]="&shy;",b["174"]="&reg;",b["175"]="&macr;",b["176"]="&deg;",b["177"]="&plusmn;",b["178"]="&sup2;",b["179"]="&sup3;",b["180"]="&acute;",b["181"]="&micro;",b["182"]="&para;",b["183"]="&middot;",b["184"]="&cedil;",b["185"]="&sup1;",b["186"]="&ordm;",b["187"]="&raquo;",b["188"]="&frac14;",b["189"]="&frac12;",b["190"]="&frac34;",b["191"]="&iquest;",b["192"]="&Agrave;",b["193"]="&Aacute;",b["194"]="&Acirc;",b["195"]="&Atilde;",b["196"]="&Auml;",b["197"]="&Aring;",b["198"]="&AElig;",b["199"]="&Ccedil;",b["200"]="&Egrave;",b["201"]="&Eacute;",b["202"]="&Ecirc;",b["203"]="&Euml;",b["204"]="&Igrave;",b["205"]="&Iacute;",b["206"]="&Icirc;",b["207"]="&Iuml;",b["208"]="&ETH;",b["209"]="&Ntilde;",b["210"]="&Ograve;",b["211"]="&Oacute;",b["212"]="&Ocirc;",b["213"]="&Otilde;",b["214"]="&Ouml;",b["215"]="&times;",b["216"]="&Oslash;",b["217"]="&Ugrave;",b["218"]="&Uacute;",b["219"]="&Ucirc;",b["220"]="&Uuml;",b["221"]="&Yacute;",b["222"]="&THORN;",b["223"]="&szlig;",b["224"]="&agrave;",b["225"]="&aacute;",b["226"]="&acirc;",b["227"]="&atilde;",b["228"]="&auml;",b["229"]="&aring;",b["230"]="&aelig;",b["231"]="&ccedil;",b["232"]="&egrave;",b["233"]="&eacute;",b["234"]="&ecirc;",b["235"]="&euml;",b["236"]="&igrave;",b["237"]="&iacute;",b["238"]="&icirc;",b["239"]="&iuml;",b["240"]="&eth;",b["241"]="&ntilde;",b["242"]="&ograve;",b["243"]="&oacute;",b["244"]="&ocirc;",b["245"]="&otilde;",b["246"]="&ouml;",b["247"]="&divide;",b["248"]="&oslash;",b["249"]="&ugrave;",b["250"]="&uacute;",b["251"]="&ucirc;",b["252"]="&uuml;",b["253"]="&yacute;",b["254"]="&thorn;",b["255"]="&yuml;");"ENT_NOQUOTES"!==l&&(b["34"]="&quot;");"ENT_QUOTES"===l&&(b["39"]="&#39;");b["60"]="&lt;";b["62"]="&gt;";for(e in b)b.hasOwnProperty(e)&&(d[String.fromCharCode(e)]=b[e]);return d};n.htmlentities=function(a,c,b,d){var e=this.get_html_translation_table("HTML_ENTITIES",c);a=null==a?"":a+"";if(!e)return!1;c&&"ENT_QUOTES"===c&&(e["'"]="&#039;");d=null==d||!!d;c=RegExp("&(?:#\\d+|#x[\\da-f]+|[a-zA-Z][\\da-z]*);|["+Object.keys(e).join("").replace(/([()[\]{}\-.*+?^$|\/\\])/g,"\\$1")+"]","g");return a.replace(c,function(a){return 1<a.length?d?e["&"]+a.substr(1):a:e[a]})};h.prototype.registerPlugin("modifier","escape",function(a,c,b,d){a=new String(a);b=b||"UTF-8";d="undefined"!=typeof d?Boolean(d):!0;switch(c||"html"){case"html":return d&&(a=a.replace(/&/g,"&amp;")),a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;");case"htmlall":return n.htmlentities(a,3,b);case"url":return n.rawurlencode(a);case"urlpathinfo":return n.rawurlencode(a).replace(/%2F/g,"/");case"quotes":return a.replace(/(^|[^\\])'/g,"$1\\'");case"hex":c="";for(b=0;b<a.length;++b)c+="%"+n.bin2hex(a.substr(b,1));return c;case"hexentity":c="";for(b=0;b<a.length;++b)c+="&#x"+n.bin2hex(a.substr(b,1)).toUpperCase()+";";return c;case"decentity":c="";for(b=0;b<a.length;++b)c+="&#"+n.ord(a.substr(b,1))+";";return c;case"mail":return a.replace(/@/g," [AT] ").replace(/[.]/g," [DOT] ");case"nonstd":c="";for(b=0;b<a.length;++b)d=n.ord(a.substr(b,1)),c=126<=d?c+("&#"+d+";"):c+a.substr(b,1);return c;case"javascript":return a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/<\//g,"</")}return a});h.prototype.registerPlugin("modifier","indent",function(a,c,b){a=new String(a);c=c?c:4;b=b?b:" ";for(var d="";c--;)d+=b;c=a.match(/\n+$/);return d+a.replace(/\n+$/,"").replace(/\n/g,"\n"+d)+(c?c[0]:"")});h.prototype.registerPlugin("modifier","lower",function(a){return(new String(a)).toLowerCase()});h.prototype.registerPlugin("modifier","nl2br",function(a){return(new String(a)).replace(/\n/g,"<br />\n")});h.prototype.registerPlugin("modifier","regex_replace",function(a,c,b){c=c.match(/^ *\/(.*)\/(.*) *$/);return(new String(a)).replace(RegExp(c[1],"g"+(1<c.length?c[2]:"")),b)});h.prototype.registerPlugin("modifier","replace",function(a,c,b){if(!c)return a;a=new String(a);c=new String(c);b=new String(b);for(var d="",e=-1,e=a.indexOf(c);0<=e;e=a.indexOf(c))d+=a.slice(0,e)+b,e+=c.length,a=a.slice(e);return d+a});h.prototype.registerPlugin("modifier","spacify",function(a,c){c||(c=" ");return(new String(a)).replace(/(\n|.)(?!$)/g,"$1"+c)});h.prototype.registerPlugin("modifier","string_format",function(a,c){return n.sprintf(c,a)});h.prototype.registerPlugin("modifier","strip",function(a,c){c=c?c:" ";return(new String(a)).replace(/[\s]+/g,c)});h.prototype.registerPlugin("modifier","strip_tags",function(a,c){c=null==c?!0:c;return(new String(a)).replace(/<[^>]*?>/g,c?" ":"")});h.prototype.registerPlugin("modifier","truncate",function(a,c,b,d,e){a=new String(a);c=c?c:80;b=null!=b?b:"...";if(a.length<=c)return a;c-=Math.min(c,b.length);if(e)return a.slice(0,Math.floor(c/2))+b+a.slice(a.length-Math.floor(c/2));d||(a=a.slice(0,c+1).replace(/\s+?(\S+)?$/,""));return a.slice(0,c)+b});h.prototype.registerPlugin("modifier","upper",function(a){return(new String(a)).toUpperCase()})})();;jSmart.prototype.registerPlugin('function','translations',function(params,data){if('name'in params){return window.translationsLogics.get(params.name);}
return false;});jSmart.prototype.getTemplate=function(name){if(typeof window.templates[name]!=='undefined'){return window.templates[name];}else{return'Missing JS Template '+name;}};function empty(variable){return(typeof variable==='undefined'||variable===''||variable===0||variable==='0'||variable===null||variable===false||(Array.isArray(variable)&&variable.length===0));};window.DomElementMakerMixin=function(){this.makeElement=function(tag,properties,parent){var e=document.createElement(tag);if(properties){if(typeof properties==='string'){e.className=properties;}else{for(var key in properties){e[key]=properties[key];}}}
if(parent){parent.appendChild(e);}
return e;};return this;};;window.DomHelperMixin=function(){this.getPosition=function(element){if(element.getBoundingClientRect){var result=element.getBoundingClientRect();var scroll=this.getPageScroll();return{'x':result.left+scroll.x,'y':result.top+scroll.y};}else{var curtop=0;var curleft=0;if(element.offsetParent){do{curleft+=element.offsetLeft;curtop+=element.offsetTop;}while(element=element.offsetParent);}
return{'x':curleft,'y':curtop};}};this.getPageScroll=function(){var xScroll,yScroll;if(window.pageYOffset){yScroll=window.pageYOffset;xScroll=window.pageXOffset;}else if(document.documentElement&&document.documentElement.scrollTop){yScroll=document.documentElement.scrollTop;xScroll=document.documentElement.scrollLeft;}else if(document.body){yScroll=document.body.scrollTop;xScroll=document.body.scrollLeft;}
return{'x':xScroll,'y':yScroll};};this.getViewportRelativePosition=function(obj){var elementPosition=this.getPosition(obj);var scroll=this.getPageScroll();return{'x':(elementPosition.x-scroll.x),'y':(elementPosition.y-scroll.y)};};this.getWindowHeight=function(){return window.innerHeight?window.innerHeight:document.documentElement.offsetHeight;};this.getWindowWidth=function(){return window.innerWidth?window.innerWidth:document.documentElement.offsetWidth;};this.isOnScreen=function(obj,coefficient){if(coefficient===undefined){coefficient=1;}
return!(this.getViewportRelativePosition(obj).y>(this.getWindowHeight()*coefficient));};};;window.mobileLogics=new function(){var currentBreakpoint;var breakpoints={'xs':386,'sm':576,'md':768,'lg':992,'xl':1200,'xxl':1600,};var init=function(){window.addEventListener('resize',resizeHandler);resizeHandler();};var resizeHandler=function(){var windowWidth=window.innerWidth;var breakPoint='xxl';for(var key in breakpoints){if(breakpoints.hasOwnProperty(key)){if(windowWidth<breakpoints[key]){breakPoint=key;break;}}}
if(currentBreakpoint!==breakPoint){currentBreakpoint=breakPoint;controller.fireEvent('mobileBreakpointChanged',currentBreakpoint);}};this.getCurrentBreakpoint=function(){return currentBreakpoint;};this.isPhoneActive=function(){return(currentBreakpoint==='xs'||currentBreakpoint==='sm');};init();};;window.ajaxSearchLogics=new function(){var self=this;var initComponents=function(){var elements;elements=_('.left_panel_ajaxsearch_block');for(var i=0;i<elements.length;i++){new HeaderAjaxSearchComponent(elements[i]);}
elements=_('.ajaxitemsearch');for(var i=0;i<elements.length;i++){new AjaxItemSearchComponent(elements[i],{'apiMode':'admin',});}};var receiveData=function(responseStatus,requestName,responseData,callBack){if(responseStatus==='success'&&responseData){callBack(responseData);}else{controller.fireEvent('ajaxSearchResultsFailure',responseData);}};this.sendQuery=function(callBack,query,types,apiMode,resultsLimit,language,filters){var url='/ajaxSearch/mode:'+apiMode+'/types:'+types+'/totals:'+
1+'/query:'+query;if(typeof resultsLimit!=='undefined'){url+='/resultsLimit:'+parseInt(resultsLimit,10);}
if(typeof language!=='undefined'){url+='/language:'+language;}
if(typeof filters!=='undefined'){url+='/filters:'+filters;}
url+='/';var request=new JsonRequest(url,function(responseStatus,requestName,responseData){return receiveData(responseStatus,requestName,responseData,callBack);},'ajaxSearch');request.send();};controller.addListener('initDom',initComponents);};;window.ajaxSelectLogics=new function(){var initComponents=function(){var elements=_('.ajaxselect');for(var i=0;i<elements.length;i++){new AjaxSelectComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.checkBoxManager=new function(){var self=this;var checkBoxObjects=[];var init=function(){var inputElements=_('.checkbox_placeholder');for(var i=0;i<inputElements.length;i++){self.createCheckBox(inputElements[i]);}};this.createCheckBox=function(inputElement){var found=false;for(var i=0;i<checkBoxObjects.length;i++){if(checkBoxObjects[i].inputElement==inputElement){found=checkBoxObjects[i];}}
if(!found){var checkBoxObject=new CheckBoxComponent(inputElement);checkBoxObjects.push(checkBoxObject);found=checkBoxObject;}
return found;};controller.addListener('initDom',init);};;window.debugLogics=new function(){this.addRecord=function(text){var record={};record['text']=text;records.push(record);controller.fireEvent('debugInfoUpdate');};this.getRecords=function(){return records;};this.getLastRecord=function(){return records[records.length-1];};var self=this;var records=[];};window.debug=function(){var text='';for(var i=0;i<arguments.length;i++){var value=arguments[i];if(typeof value=='object'){for(var j in value){text+=j+': '+value[j]+'\n';}}else if(typeof value=='function'){text+='function: '+value+' ';}else{text+=value+' ';}}
window.debugLogics.addRecord(text);};;window.fileInputLogics=new function(){var initComponents=function(){var elements=_('.fileinput_placeholder');for(var i=0;i<elements.length;i++){new FileInputComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.radioButtonManager=new function(){var init=function(){var inputElements=_('.radio_holder');for(var i=0;i<inputElements.length;i++){if(!inputElements[i].artWebRadioCreated){var radioObject=new RadioButtonComponent(inputElements[i]);if(!radioObjects[radioObject.name]){radioObjects[radioObject.name]=[];}
radioObjects[radioObject.name].push(radioObject);}}};this.makeRadioButtons=function(parentElement){var inputElements=_('.radio_holder',parentElement);for(var i=0;i<inputElements.length;i++){if(!inputElements[i].artWebRadioCreated){var radioObject=new RadioButtonComponent(inputElements[i]);if(!radioObjects[radioObject.name]){radioObjects[radioObject.name]=[];}
radioObjects[radioObject.name].push(radioObject);}}};this.refresh=function(name,value){if(radioObjects[name]){for(var i=0;i<radioObjects[name].length;i++){radioObjects[name][i].refresh(value);}}};var radioObjects={};controller.addListener('initDom',init);};;window.analyticsLogics=new function(){var init=function(){if(!window.newVisitor){return;}
if(!navigator.cookieEnabled){return;}
doXhr('Start',{referrer:document.referrer});};var doXhr=function(action,params){var requestURL=window.rootURL+'remote/action:'+action;var request=new JsonRequest(requestURL,null,null,params);request.send();};init();};;window.calendarSelectorLogics=new function(){this.init=function(){var inputElements=_('.input_date');for(var i=0;i<inputElements.length;i++){self.calendarObjects.push(new CalendarSelectorComponent({'inputElement':inputElements[i]}));}
window.eventsManager.addHandler(document,'click',self.hideCalendars);};this.hideCalendars=function(){for(var i=0;i<self.calendarObjects.length;i++){var element=self.calendarObjects[i];if(element.state!='closed'){element.hideCalendarElement();}}};this.getCalendar=function(parameters){var calendar=new CalendarSelectorComponent(parameters);self.calendarObjects.push(calendar);return calendar;};var self=this;this.calendarObjects=new Array();controller.addListener('initDom',this.init);};;window.AjaxSearchComponent=function(componentElement,parameters){var self=this;var ajaxSearchResultsComponent=false;var inputCheckDelay=400;var keyUpTimeOut;var searchStringLimit=2;var resultsLimit=30;var customResultsElement;var customShowedElementComponents;var totalsElement;var getValueCallback;var clickCallback;var resultsUpdateCallback;var types;var searchString;var apiMode='public';var filters='';var position='absolute';this.displayInElement=false;this.displayTotals=false;this.componentElement=null;this.inputElement=null;var init=function(){self.componentElement=componentElement;self.inputElement=componentElement;self.inputElement.autocomplete='off';if(typeof parameters!=='undefined'){parseParameters(parameters);}
ajaxSearchResultsComponent=new AjaxSearchResultsComponent(self,customResultsElement);self.inputElement.addEventListener('keydown',keyPressHandler);self.inputElement.addEventListener('paste',pasteHandler);if(self.inputElement.parentElement.className==='ajaxselect_container'||self.inputElement.parentElement.className==='ajaxitemsearch_container'){self.inputElement.addEventListener('focus',function(){var container=self.inputElement.parentElement;container.style.border='1px solid #6bbbff';});self.inputElement.addEventListener('focusout',function(){var container=self.inputElement.parentElement;container.style.border='1px solid #e2e2e5';});}
if(!customResultsElement){window.addEventListener('click',windowClickHandler);}
controller.addListener('ajaxSearchResultsReceived',updateData);};var parseParameters=function(parameters){if(typeof parameters.clickCallback!=='undefined'){clickCallback=parameters.clickCallback;}
if(typeof parameters.resultsUpdateCallback!=='undefined'){resultsUpdateCallback=parameters.resultsUpdateCallback;}
if(typeof parameters.getValueCallback!=='undefined'){getValueCallback=parameters.getValueCallback;}
if(typeof parameters.types!=='undefined'){types=parameters.types;}
if(typeof parameters.apiMode!=='undefined'){apiMode=parameters.apiMode;}
if(typeof parameters.searchStringLimit!=='undefined'){searchStringLimit=parseInt(parameters.searchStringLimit,10);}
if(typeof parameters.resultsLimit!=='undefined'){resultsLimit=parseInt(parameters.resultsLimit,10);}
if(typeof parameters.filters!=='undefined'){filters=parameters.filters;}
if(typeof parameters.displayInElement!=='undefined'){self.displayInElement=parameters.displayInElement;}
if(typeof parameters.displayTotals!=='undefined'){self.displayTotals=parameters.displayTotals;}
if(typeof parameters.position!=='undefined'){position=parameters.position;}
if(typeof parameters.totalsElement!=='undefined'){totalsElement=parameters.totalsElement;}
if(typeof parameters.customResultsElement!='undefined'){customResultsElement=parameters.customResultsElement;}
if(typeof parameters.showedElementComponents!='undefined'){customShowedElementComponents=parameters.showedElementComponents;}};var pasteHandler=function(event){checkInput();};var keyPressHandler=function(event){if(ajaxSearchResultsComponent.displayed){if(event.keyCode=='40'){window.eventsManager.preventDefaultAction(event);ajaxSearchResultsComponent.setNextOption();}else if(event.keyCode=='38'){window.eventsManager.preventDefaultAction(event);ajaxSearchResultsComponent.setPreviousOption();}else if(event.keyCode=='35'){window.eventsManager.preventDefaultAction(event);ajaxSearchResultsComponent.setLastOption();}else if(event.keyCode=='36'){window.eventsManager.preventDefaultAction(event);ajaxSearchResultsComponent.setFirstOption();}else if(event.keyCode=='13'){window.eventsManager.preventDefaultAction(event);if(ajaxSearchResultsComponent.openOption()){window.eventsManager.cancelBubbling(event);}}else{checkInput();}}else{checkInput();}};var windowClickHandler=function(){ajaxSearchResultsComponent.hideComponent();};var checkInput=function(){window.clearTimeout(keyUpTimeOut);keyUpTimeOut=window.setTimeout(function(){if(getValueCallback){searchString=getValueCallback();}else{searchString=self.inputElement.value;}
searchString=searchString.replace(/^\s+/,'').replace(/\s+$/,'');searchString=(encodeURIComponent(searchString));if(types&&searchString.length>=searchStringLimit){ajaxSearchLogics.sendQuery(updateData,encodeURIComponent(searchString),types,apiMode);}},inputCheckDelay);};var updateData=function(responseData){var allElements=[];for(var type in responseData){if(types.indexOf(type)===-1){continue;}
for(var i=0;i<responseData[type].length;i++){if(typeof(responseData[type][i]['searchTitle'])!=='undefined'){responseData[type][i].title=responseData[type][i]['searchTitle'];}}
responseData[type].sort(function(a,b){var aTitle=a.title.toUpperCase();var bTitle=b.title.toUpperCase();var keyword=searchString.toUpperCase();var aIndex=aTitle.indexOf(keyword);var bIndex=bTitle.indexOf(keyword);if(aIndex==bIndex){return aTitle>bTitle;}else if(aIndex<0){return true;}else if(bIndex<0){return false;}else if(aIndex==0){return false;}else if(bIndex==0){return true;}
return aTitle>bTitle;});allElements=allElements.concat(responseData[type]);}
if(totalsElement&&self.displayTotals){if(responseData['searchTotal']){totalsElement.innerHTML='('+responseData['searchTotal']+')';}else{totalsElement.innerHTML='(0)';}}
ajaxSearchResultsComponent.setSelectedIndex(false);if(allElements.length>0){ajaxSearchResultsComponent.updateData(allElements);ajaxSearchResultsComponent.displayComponent();}else{ajaxSearchResultsComponent.hideComponent();}
if(resultsUpdateCallback){resultsUpdateCallback(allElements);}};this.setFilters=function(filterString){filters=filterString;};this.getPosition=function(){return position;};this.clickHandler=function(data){ajaxSearchResultsComponent.hideComponent();if(typeof clickCallback=='function'){clickCallback(data);}};this.getCustomShowedElementComponents=function(){return customShowedElementComponents;};this.setTypes=function(newTypes){types=newTypes;};init();};window.AjaxSearchResultsComponent=function(parentObject,customResultsElement){var componentElement;var contentElement;var resultItems=[];var selectedIndex=false;var self=this;var position;this.displayed=false;var init=function(){position=parentObject.getPosition();if(customResultsElement){componentElement=customResultsElement;}else{componentElement=self.makeElement('div','ajaxsearch_results_block');}
componentElement.addEventListener('click',clickHandler);contentElement=document.createElement('div');contentElement.className='ajaxsearch_results_list';componentElement.appendChild(contentElement);if(parentObject.displayInElement){parentObject.displayInElement.appendChild(componentElement);}else{if(!customResultsElement){document.body.appendChild(componentElement);}}
eventsManager.addHandler(componentElement,'click',clickHandler);eventsManager.addHandler(window,'resize',updateSizes);};this.reset=function(){while(contentElement.firstChild){contentElement.removeChild((contentElement.firstChild));}};this.updateData=function(elementsList){self.reset();resultItems=[];for(var i=0;i<elementsList.length;i++){var item=new AjaxSearchResultsItemComponent(elementsList[i],parentObject);contentElement.appendChild(item.componentElement);resultItems.push(item);}};this.displayComponent=function(){if(!self.displayed){self.displayed=true;componentElement.style.visibility='hidden';componentElement.style.display='block';componentElement.style.position=position;componentElement.style.visibility='visible';if(parentObject.inputElement.dataset.view!==''){domHelper.addClass(componentElement,parentObject.inputElement.dataset.view);}
domHelper.addClass(componentElement,'active');window.searchBoxView=1;}
updateSizes();updateView();};this.hideComponent=function(){if(self.displayed){self.displayed=false;self.reset();componentElement.style.visibility='hidden';domHelper.removeClass(componentElement,'active');window.searchBoxView=0;}
updateView();};this.setFirstOption=function(){if(resultItems.length>0){self.setSelectedIndex(0);}};this.setLastOption=function(){if(resultItems.length>0){self.setSelectedIndex(resultItems.length-1);}};this.setNextOption=function(){if(selectedIndex!==false){var nextOptionNumber=selectedIndex+1;if(nextOptionNumber<resultItems.length){self.setSelectedIndex(nextOptionNumber);}}else{self.setFirstOption();}};this.setPreviousOption=function(){if(selectedIndex!==false){var previousOptionNumber=selectedIndex-1;if(previousOptionNumber>=0){self.setSelectedIndex(previousOptionNumber);}}};this.setSelectedIndex=function(newSelectedIndex){selectedIndex=newSelectedIndex;for(var i=0;i<resultItems.length;i++){if(i===selectedIndex){resultItems[i].setActive(true);}else{resultItems[i].setActive(false);}}};this.openOption=function(){if(typeof resultItems[selectedIndex]!=='undefined'){resultItems[selectedIndex].click();return true;}
return false;};var updateView=function(){var formElement=parentObject.inputElement.form;var searchElementBoxViewArray=[];var searchElementBoxView=[];if(formElement){if(formElement.dataset.openview&&formElement.dataset.openview!=''){searchElementBoxViewArray=formElement.dataset.openview.split(',');searchElementBoxView['box']=searchElementBoxViewArray[0];searchElementBoxView['class']=searchElementBoxViewArray[1];if(searchElementBoxView['box']!=''&&searchElementBoxView['class']!=''){var elementBox=document.querySelector(searchElementBoxView['box']);if(window.searchBoxView>0){domHelper.addClass(elementBox,searchElementBoxView['class']);}else{domHelper.removeClass(elementBox,searchElementBoxView['class']);}}}}};var updateSizes=function(){if(!customResultsElement&&position==='fixed'||position==='absolute'){var inputPositions=domHelper.getElementPositions(parentObject.inputElement.parentElement);var inputLeft=inputPositions.x;var inputTop=inputPositions.y;var inputHeight=parentObject.inputElement.offsetHeight;var leftPosition=(inputLeft);var topPosition=(inputTop+inputHeight);var windowHeight=document.documentElement.offsetHeight;var height;var contentHeight=contentElement.offsetHeight;if(contentHeight>windowHeight-topPosition){height=windowHeight-topPosition;}else{height=contentHeight;}
componentElement.style.left=leftPosition+'px';componentElement.style.top=topPosition+'px';componentElement.style.height=height+5+'px';}};var clickHandler=function(event){eventsManager.preventDefaultAction(event);eventsManager.cancelBubbling(event);};this.getCustomShowedElementComponents=function(){return parentObject.getCustomShowedElementComponents();};init();};DomElementMakerMixin.call(AjaxSearchResultsComponent.prototype);window.AjaxSearchResultsItemComponent=function(data,parentObject){var self=this;var componentElement;var total;var subTitle;this.componentElement=null;var init=function(){if(typeof data.url!=='undefined'){componentElement=document.createElement('a');componentElement.href=data.url;}else{componentElement=document.createElement('span');}
componentElement.className='ajaxsearch_results_item';var title=data.title;subTitle='';var customShowedElementComponents=parentObject.getCustomShowedElementComponents();if(customShowedElementComponents){var properties=customShowedElementComponents.split(',');for(var i=0;i<properties.length;i++){var name=properties[i];if(typeof data[name]!='undefined'&&title!=data[name]){subTitle=data[name]+' ';}}}
var searchAmountHtml='';if(parentObject.displayTotals&&data.searchAmount){searchAmountHtml=' <span class="found_count">('+data.searchAmount+')</span>';}
if(typeof data.structureType!=='undefined'){componentElement.innerHTML='<span class="icon icon_'+
data.structureType+'"></span><span class="ajaxsearch_results_item_texts"><span class="ajaxsearch_results_item_text">'+title+
searchAmountHtml+'</span><span class="ajaxsearch_results_item_subtext">'+subTitle+'</span></span>';}else{componentElement.innerHTML='<span class="ajaxsearch_results_item_texts"><span class="ajaxsearch_results_item_text">'+
title+searchAmountHtml+'</span><span class="ajaxsearch_results_item_subtext">'+subTitle+'</span></span>';}
componentElement.addEventListener('mouseup',clickHandler);self.componentElement=componentElement;};var clickHandler=function(event){eventsManager.preventDefaultAction(event);parentObject.clickHandler(data);};this.click=function(){parentObject.clickHandler(data);};this.setActive=function(active){if(active==true){componentElement.className='ajaxsearch_results_item ajaxsearch_results_active';}else{componentElement.className='ajaxsearch_results_item';}};init();};;window.AjaxSelectComponent=function(selectElement,types,apiMode,changeCallback,filters){var self=this;this.componentElement=null;this.selectElement=selectElement;var inputElement;var ajaxSelectItems={};var searchComponent;var itemList;var resultIdElement;var resultElement;var resultContainerElement;var componentElement;var init=function(){createDom();var parameters={'types':types,'apiMode':apiMode,'clickCallback':clickCallback,'filters':filters,};searchComponent=new AjaxSearchComponent(inputElement,parameters);eventsManager.addHandler(window,'resize',refreshStatus);};var createDom=function(){if(!selectElement){selectElement=document.createElement('select');}
selectElement.style.display='none';self.componentElement=document.createElement('div');self.componentElement.className='ajaxselect_container';inputElement=document.createElement('input');inputElement.type='text';inputElement.className='ajaxselect_searchinput';inputElement.placeholder=window.translationsLogics.get('field.search');self.componentElement.appendChild(inputElement);var searchIcon=document.createElement('span');searchIcon.className='icon icon_search';self.componentElement.appendChild(searchIcon);itemList=document.createElement('div');itemList.className='ajaxselect_item_list';self.componentElement.appendChild(itemList);if(selectElement.parentNode){selectElement.parentNode.insertBefore(self.componentElement,selectElement);}
for(var i=0;i<selectElement.options.length;++i){if(selectElement.options[i].innerHTML&&selectElement.options[i].value!=''&&selectElement.options[i].selected){self.importOptionElement(selectElement.options[i]);}}};var refreshStatus=function(){var positions=self.componentElement.getBoundingClientRect();itemList.style.width=self.componentElement.offsetWidth;itemList.top=positions.top;itemList.left=positions.left;};var clickCallback=function(data){inputElement.blur();inputElement.value='';self.addOption(data);};this.setFilters=function(filterString){searchComponent.setFilters(filterString);};this.importOptionElement=function(optionElement){var selectItem=new AjaxSelectItemComponent(self,optionElement,selectElement.multiple);ajaxSelectItems[optionElement.value]=selectItem;itemList.appendChild(selectItem.getComponentElement());};this.addOption=function(data){if(!selectElement.multiple&&selectElement.length>0){self.removeAllOptions();}
var optionElement=document.createElement('option');optionElement.selected=true;optionElement.text=data.title;optionElement.value=data.id;optionElement.setAttribute('selected','selected');selectElement.appendChild(optionElement);self.importOptionElement(optionElement);if(typeof changeCallback=='function'){changeCallback(data);}};this.removeOption=function(optionElement){selectElement.removeChild(optionElement);var itemElement=ajaxSelectItems[optionElement.value].getComponentElement();itemList.removeChild(itemElement);delete ajaxSelectItems[optionElement.value];if(typeof changeCallback=='function'){changeCallback();}};this.removeAllOptions=function(){var resultContainer=_('.ajaxselect_item_list',self.componentElement)[0];while(selectElement.firstChild){selectElement.removeChild(selectElement.firstChild);}
for(var key in ajaxSelectItems){resultContainer.removeChild(ajaxSelectItems[key].getComponentElement());}
ajaxSelectItems={};};this.getValues=function(){var values=[];for(var value in ajaxSelectItems){values[values.length]=value;}
return values;};this.getTypes=function(){return types;};this.getComponentElement=function(){return self.componentElement;};init();};window.AjaxSelectItemComponent=function(ajaxSelectComponent,optionElement,multiple){var componentElement;var descriptionElement;var removalElement;var init=function(){if(multiple===undefined){multiple=true;}
createDom();eventsManager.addHandler(removalElement,'click',removeClick);};var createDom=function(){componentElement=document.createElement('div');descriptionElement=document.createElement('span');descriptionElement.innerHTML=optionElement.text;removalElement=document.createElement('div');if(!multiple){componentElement.className='ajaxitemsearch_result ajaxitemsearch_result_single';descriptionElement.className='ajaxitemsearch_result_text';removalElement.className='ajaxitemsearch_result_remover';}else{componentElement.className='ajaxselect_item';descriptionElement.className='ajaxselect_item_value';removalElement.className='ajaxselect_item_remover icon icon_delete';}
componentElement.appendChild(removalElement);componentElement.appendChild(descriptionElement);};var removeClick=function(event){ajaxSelectComponent.removeOption(optionElement);};this.getComponentElement=function(){return componentElement;};init();};;function CheckBoxComponent(inputElement){var componentElement=null;var checked=false;var self=this;var classNames;var init=function(){importCheckBoxData();createCheckBox();hideInputElement();};var importCheckBoxData=function(){if((inputElement.tagName==='input'||inputElement.tagName==='INPUT')&&inputElement.type==='checkbox'){checked=inputElement.checked;}
inputElement.addEventListener('change',self.synchronize);};var createCheckBox=function(){componentElement=document.createElement('span');componentElement.tabIndex=0;componentElement.className='checkbox';classNames='';var inputClassNames=inputElement.className.split(' ');for(var i=0;i<inputClassNames.length;i++){if(inputClassNames[i]!=='checkbox_placeholder'){classNames+=' '+inputClassNames[i];}}
if(checked){componentElement.className='checkbox checked';}
componentElement.className+=classNames;componentElement.addEventListener('click',click);componentElement.addEventListener('keydown',keyHandler);var parent=inputElement.parentNode;parent.insertBefore(componentElement,inputElement);};var hideInputElement=function(){inputElement.style.display='none';};var click=function(event){event.stopPropagation();inputElement.checked=!inputElement.checked;window.eventsManager.fireEvent(inputElement,'change');};var keyHandler=function(event){event.stopPropagation();if(event.code==='Space'){inputElement.checked=!inputElement.checked;window.eventsManager.fireEvent(inputElement,'change');}};this.synchronize=function(){checked=inputElement.checked;if(checked){componentElement.className='checkbox checked'+classNames;}else{componentElement.className='checkbox'+classNames;}};init();};window.debugComponent=new function(){var debugInfoUpdate=function(){refreshContents();};var refreshContents=function(){if(!componentElement){checkDom();}
if(componentElement){componentElement.style.display='block';var newRecord=window.debugLogics.getLastRecord();var recordRow=document.createElement('pre');recordRow.className='debug_block_row';recordRow.innerHTML=newRecord.text;if(componentElement.firstChild){componentElement.insertBefore(recordRow,componentElement.firstChild);}else{componentElement.appendChild(recordRow);}}};var prepareDom=function(){componentElement=_('.debug_block')[0];if(componentElement){eventsManager.addHandler(componentElement,'click',clickHandler);}};var checkDom=function(){if(!componentElement&&document.body){componentElement=document.createElement('div');componentElement.className='debug_block';document.body.appendChild(componentElement);eventsManager.addHandler(componentElement,'click',clickHandler);}};var clickHandler=function(){componentElement.style.display='none';};var self=this;var componentElement=false;controller.addListener('debugInfoUpdate',debugInfoUpdate);controller.addListener('initDom',prepareDom);};;function FileInputComponent(inputElement){var componentElement;var fakeField;var fakeButton;var buttonText='';var init=function(){if(window.translationsLogics.get('button.file_upload')){buttonText=window.translationsLogics.get('button.file_upload');}
createDom();synchronizeContent();};var createDom=function(){inputElement.style.display='none';componentElement=document.createElement('div');componentElement.className='file_input_container';fakeField=document.createElement('div');fakeField.className='input_component file_input_field';fakeField.tabIndex=0;componentElement.appendChild(fakeField);fakeButton=document.createElement('div');fakeButton.className='button file_input_button';componentElement.appendChild(fakeButton);var fakeButtonText=document.createElement('div');fakeButtonText.className='button_text';fakeButtonText.innerHTML=buttonText;fakeButton.appendChild(fakeButtonText);inputElement.parentNode.insertBefore(componentElement,inputElement);componentElement.appendChild(inputElement);eventsManager.addHandler(componentElement,'click',clickHandler);eventsManager.addHandler(inputElement,'change',synchronizeContent);};var synchronizeContent=function(){var fileSize='';var fileName='';var fileDescription='<ol>';if(inputElement.value!==''){for(var i=0;i<inputElement.files.length;i++){fileSize=(inputElement.files[i].size / 1024 / 1024).toFixed(4);fileName=inputElement.files[i].name;fileDescription+='<li>'+fileName+' ('+fileSize+'  MB)</li>';}
fakeField.innerHTML=fileDescription+"</ol>";}};var clickHandler=function(){if(typeof inputElement.click!=='undefined'){inputElement.click();}else{eventsManager.fireEvent(inputElement,'click');}};init();};function RadioButtonComponent(inputElement){var radioButton=null;this.checked=false;this.value=false;this.name=false;var self=this;var importRadioButtonData=function(){if((inputElement.tagName==='input'||inputElement.tagName==='INPUT')&&inputElement.type==='radio'){inputElement.artWebRadioCreated=true;self.name=inputElement.name;self.value=inputElement.value;inputElement.addEventListener('change',changeHandler);}};var createRadioButton=function(){radioButton=document.createElement('span');radioButton.className='radiobutton';radioButton.tabIndex=0;radioButton.addEventListener('click',click);radioButton.addEventListener('keydown',keyHandler);var parent=inputElement.parentNode;parent.insertBefore(radioButton,inputElement);};var hideInputElement=function(){inputElement.style.display='none';};var click=function(){inputElement.checked=true;window.eventsManager.fireEvent(inputElement,'change');};var changeHandler=function(){window.radioButtonManager.refresh(self.name);};var keyHandler=function(event){if(event.code==='Space'){inputElement.checked=true;window.eventsManager.fireEvent(inputElement,'change');}};this.refresh=function(){self.checked=inputElement.checked;if(self.checked){radioButton.className='radiobutton radiobutton_checked';}else{radioButton.className='radiobutton';}};importRadioButtonData();createRadioButton();hideInputElement();self.refresh();};window.CalendarSelectorComponent=function(parameters){this.inputElement=null;this.startInputElement=null;this.endInputElement=null;var activeInputComponent=null;this.calendarElement=null;var headerElement;var daysElement;var todayStamp=null;var todayDate=null;var todayMonth=null;var todayYear=null;var currentMonth=null;var currentYear=null;this.position=null;this.parentElement=null;this.size=null;this.showCloseButton=null;this.showWeekNumbers=false;this.checkShowEvents=false;this.hideHover=false;this.showWeekDays=false;this.disableInput=null;this.changeCallBack=null;this.disablePastDays=null;this.activeInputClassName=null;this.keepCalendarOpen=null;this.persistPeriod=null;this.monthPages=new Array();this.links=new Array();var self=this;var inputComponent;var startComponent;var endComponent;this.init=function(){self.position='input';self.size='auto';self.showCloseButton=false;self.disablePastDays=false;self.persistPeriod=false;if(typeof parameters!=='undefined'){importParameters(parameters);}
if(this.inputElement){inputComponent=new CalendarSelectorInput(this.inputElement,self);}else if(this.startInputElement&&this.endInputElement){startComponent=new CalendarSelectorInput(this.startInputElement,self);endComponent=new CalendarSelectorInput(this.endInputElement,self);}
window.eventsManager.addHandler(window,'resize',this.adjustCalendarElement);if(window.showCalendarLogics){var firstConcert=showCalendarLogics.getFirstConcert();if(firstConcert){currentMonth=firstConcert['month']-1;currentYear=firstConcert['year'];}}
if(self.keepCalendarOpen){self.displayCalendarElement();}};var importParameters=function(parameters){if(typeof parameters.position!=='undefined'&&parameters.position){self.position=parameters.position;}
if(typeof parameters.parentElement!=='undefined'&&parameters.parentElement){self.parentElement=parameters.parentElement;}
if(typeof parameters.inputElement!=='undefined'&&parameters.inputElement){self.inputElement=parameters.inputElement;}else if(typeof parameters.startInputElement=='object'&&typeof parameters.endInputElement=='object'){self.startInputElement=parameters.startInputElement;self.endInputElement=parameters.endInputElement;}
if(typeof parameters.size!=='undefined'&&parameters.size){self.size=parseFloat(parameters.size);}
if(typeof parameters.showCloseButton!=='undefined'&&parameters.showCloseButton){self.showCloseButton=true;}
if(typeof parameters.disableInput!=='undefined'&&parameters.disableInput){self.disableInput=true;}
if(typeof parameters.showWeekNumbers!=='undefined'&&parameters.showWeekNumbers){self.showWeekNumbers=true;}
if(typeof parameters.showWeekDays!=='undefined'&&parameters.showWeekDays){self.showWeekDays=true;}
if(typeof parameters.hideHover!=='undefined'&&parameters.hideHover){self.hideHover=true;}
if(typeof parameters.checkShowEvents!=='undefined'&&parameters.checkShowEvents){self.checkShowEvents=true;}
if(typeof parameters.changeCallBack!=='undefined'){self.changeCallBack=parameters.changeCallBack;}
if(typeof parameters.disablePastDays!=='undefined'){self.disablePastDays=parameters.disablePastDays;}
if(typeof parameters.activeInputClassName!=='undefined'){self.activeInputClassName=parameters.activeInputClassName;}
if(typeof parameters.keepCalendarOpen!=='undefined'){self.keepCalendarOpen=parameters.keepCalendarOpen;}
if(typeof parameters.persistPeriod!=='undefined'){self.persistPeriod=parameters.persistPeriod;}};this.calendarElementClick=function(event){window.eventsManager.cancelBubbling(event);window.eventsManager.preventDefaultAction(event);};this.displaySideCalendarElement=function(){window.calendarSelectorLogics.hideCalendars();var calendarElement=self.getCalendarElement();calendarElement.style.visibility='hidden';calendarElement.style.display='block';if(self.showCloseButton){self.closeButton.style.display='block';}else{self.closeButton.style.display='none';}
self.prepareCurrentValues();self.updateContents();self.adjustCalendarElement();calendarElement.style.visibility='visible';};this.displayCalendarElement=function(){window.calendarSelectorLogics.hideCalendars();self.state='opened';var calendarElement=self.getCalendarElement();calendarElement.style.visibility='hidden';calendarElement.style.display='block';if(self.showCloseButton){self.closeButton.style.display='block';}else{self.closeButton.style.display='none';}
self.prepareCurrentValues();self.updateContents();self.adjustCalendarElement();calendarElement.style.visibility='visible';};this.adjustCalendarElement=function(){var marginTop=6;if(self.state=='opened'){var calendarElement=self.getCalendarElement();if(self.position=='input'){var coordinates=self.getActiveInputComponent().getElementPositions();calendarElement.style.position='absolute';calendarElement.style.left=coordinates.x+'px';calendarElement.style.top=(coordinates.y+self.getActiveInputComponent().getInputHeight())+marginTop+'px';}else if(self.position=='center'){var viewPortWidth=0;var viewPortHeight=0;if(window.innerHeight){viewPortWidth=window.innerWidth;viewPortHeight=window.innerHeight;}else{viewPortWidth=document.documentElement.offsetWidth;viewPortHeight=document.documentElement.offsetHeight;}
var componentWidth=calendarElement.offsetWidth;var componentHeight=calendarElement.offsetHeight;if(self.size!='auto'){componentWidth=viewPortWidth*self.size;}
var componentLeft=(viewPortWidth-componentWidth)/ 2;var componentTop=(viewPortHeight-componentHeight)/ 2;calendarElement.style.width=componentWidth+'px';calendarElement.style.position='fixed';calendarElement.style.left=componentLeft+'px';calendarElement.style.top=componentTop+'px';}else if(self.position=='parent'){calendarElement.style.width='auto';calendarElement.style.position='relative';calendarElement.style.display='block';}}};this.hideCalendarElement=function(){if(!self.keepCalendarOpen){self.state='closed';var calendarElement=self.getCalendarElement();calendarElement.style.display='none';}else{self.prepareCurrentValues();self.updateContents();}};this.getCalendarElement=function(){if(!this.calendarElement){this.calendarElement=document.createElement('div');this.calendarElement.className='calendar_selector';if(self.parentElement){self.parentElement.appendChild(this.calendarElement);}else{document.body.appendChild(this.calendarElement);}
window.eventsManager.addHandler(this.calendarElement,'click',this.calendarElementClick);var dateObject=new Date();dateObject.setHours(0,0,0);dateObject.setMilliseconds(0);todayDate=dateObject.getDate();todayMonth=dateObject.getMonth();todayYear=dateObject.getFullYear();todayStamp=dateObject.getTime();this.prepareDOMStructure();}
return this.calendarElement;};this.prepareCurrentValues=function(){if(self.getActiveInputComponent()){currentMonth=self.getActiveInputComponent().getMonth();currentYear=self.getActiveInputComponent().getYear();}
if((currentMonth==null)||(currentYear==null)){var dateObject=new Date();currentMonth=dateObject.getMonth();currentYear=dateObject.getFullYear();}};this.showNextMonth=function(){var nextMonthFirstDay=new Date(currentYear,currentMonth+1,1);currentMonth=nextMonthFirstDay.getMonth();currentYear=nextMonthFirstDay.getFullYear();this.updateContents();};this.showPreviousMonth=function(){var previousMonthLastDay=new Date(currentYear,currentMonth,0);currentMonth=previousMonthLastDay.getMonth();currentYear=previousMonthLastDay.getFullYear();this.updateContents();};this.prepareDOMStructure=function(){headerElement=document.createElement('div');headerElement.className='calendar_selector_header';this.headerElement=headerElement;this.calendarElement.appendChild(headerElement);var bodyElement=document.createElement('div');bodyElement.className='calendar_selector_body';this.bodyElement=bodyElement;this.calendarElement.appendChild(bodyElement);this.buttonNextMonth=new CalendarSelector_nextMonth(this);this.buttonPreviousMonth=new CalendarSelector_previousMonth(this);this.currentLocation=new CalendarSelector_currentLocation(this);this.closeButton=document.createElement('div');this.closeButton.className='calendar_selector_close';if(!self.keepCalendarOpen){window.eventsManager.addHandler(this.closeButton,'click',this.hideCalendarElement);}
if(window.translationsLogics.get('desktop.calendar_close')){this.closeButton.innerHTML=window.translationsLogics.get('desktop.calendar_close');}
this.calendarElement.appendChild(this.closeButton);};this.selectDay=function(year,month,day){day=this.formatNumber(day,2);month=this.formatNumber(month+1,2);var dateText=day+'.'+month+'.'+year;if(endComponent&&startComponent){if(!startComponent.getStamp()&&!endComponent.getStamp()){self.setActiveInputComponent(startComponent);}
else if(startComponent.getStamp()&&!endComponent.getStamp()){self.setActiveInputComponent(endComponent);}
else if(startComponent.getStamp()&&endComponent.getStamp()){startComponent.setValue('');endComponent.setValue('');self.setActiveInputComponent(startComponent);}}
var activeInput=self.getActiveInputComponent();if(activeInput){activeInput.setValue(dateText);}
if(endComponent&&startComponent){if(activeInput==endComponent&&startComponent.getStamp()>endComponent.getStamp()){startComponent.setValue(dateText);endComponent.setValue('');}}
if(!self.keepCalendarOpen){this.hideCalendarElement();}
if(self.changeCallBack){self.changeCallBack(new Date(month+'/'+day+'/'+year));}};this.getActiveInputComponent=function(){if(!activeInputComponent){if(inputComponent){activeInputComponent=inputComponent;}else if(startComponent){activeInputComponent=startComponent;}}
return activeInputComponent;};this.setActiveInputComponent=function(inputComponent){activeInputComponent=inputComponent;};this.formatNumber=function(number,decimals){number=number.toString();if(number.length<decimals){for(a=decimals-number.length;a>0;a--){number='0'+number;}}
return number;};this.updateContents=function(){var bodyElement=this.bodyElement;while(bodyElement.firstChild){bodyElement.removeChild(bodyElement.firstChild);}
if(daysElement){self.calendarElement.removeChild(daysElement);}
if(!this.monthPages[currentYear]){this.monthPages[currentYear]=new Array();}
var monthObject;if(!this.monthPages[currentYear][currentMonth]){monthObject=new CalendarSelectorMonth(currentMonth,currentYear);this.monthPages[currentYear][currentMonth]=monthObject;}else{monthObject=this.monthPages[currentYear][currentMonth];}
var tableElement=document.createElement('table');var tableBodyElement=document.createElement('tbody');tableElement.appendChild(tableBodyElement);if(self.showWeekDays){daysElement=document.createElement('div');daysElement.className='calendar_selector_days';var tableElement2=document.createElement('table');daysElement.appendChild(tableElement2);var rowElement=document.createElement('tr');tableElement2.appendChild(rowElement);var weekDaysNames=this.getWeekDaysNames();for(var i=0;i<7;++i){var cellElement=document.createElement('th');cellElement.innerHTML=weekDaysNames[i];rowElement.appendChild(cellElement);}
self.calendarElement.insertBefore(daysElement,bodyElement);}
for(var row=0;row<monthObject.daysGrid.length;row++){var tableRow=document.createElement('tr');for(var cell=0,l=monthObject.daysGrid[row].length;cell!==l;cell++){var month=monthObject.daysGrid[row][cell].getMonth();var day=monthObject.daysGrid[row][cell].getDate();var weekDay=monthObject.daysGrid[row][cell].getDay();var year=monthObject.daysGrid[row][cell].getFullYear();var stamp=monthObject.daysGrid[row][cell].getTime();var selectionDisabled=false;var active=false;var className='';if(month==currentMonth&&year==currentYear){className+=' calendar_selector_activemonth';active=true;selectionDisabled=false;}
if(stamp<todayStamp&&!active){className+=' calendar_selector_pastday';selectionDisabled=true;}
if(!active){className+=' calendar_selector_pastday';}
if(weekDay==0||weekDay==6){className+=' calendar_selector_weekend';}
if(day==todayDate&&month==todayMonth&&year==todayYear){className+=' calendar_selector_today';}
if(self.getActiveInputComponent()){if(day==self.getActiveInputComponent().getDate()&&month==self.getActiveInputComponent().getMonth()&&year==self.getActiveInputComponent().getYear()){className+=' calendar_selector_selected';}}
if(startComponent&&endComponent){if(day==startComponent.getDate()&&month==startComponent.getMonth()&&year==startComponent.getYear()){className+=' calendar_selector_selected';}
if(day==endComponent.getDate()&&month==endComponent.getMonth()&&year==endComponent.getYear()){className+=' calendar_selector_selected calendar_selector_selected_end';}
if(stamp>startComponent.getStamp()&&stamp<endComponent.getStamp()){className+=' calendar_selector_periodday';}
if(self.persistPeriod&&!selectionDisabled){if(stamp<startComponent.getStamp()&&endComponent==activeInputComponent){selectionDisabled=true;}
if(stamp>endComponent.getStamp()&&startComponent==activeInputComponent&&endComponent.getStamp()){selectionDisabled=true;}}}
if(window.showCalendarLogics){var eventUrl=false;var matchingConcert=showCalendarLogics.getConcertsByDate(day,month+1,year);if(matchingConcert){className+=' calendar_selector_has_event';eventUrl=showCalendarLogics.getConcertUrl(matchingConcert.id);}}
var weekNr=false;if(self.showWeekNumbers&&weekDay==1){weekNr=self.getWeekNumber(year,month,day);}
var dayObject=new CalendarSelectorDay(this,className,year,month,day,selectionDisabled,weekNr,eventUrl,self.hideHover);tableRow.appendChild(dayObject.domElement);}
tableBodyElement.appendChild(tableRow);}
bodyElement.appendChild(tableElement);var monthsNames=this.getMonthsNames();this.currentLocation.setLocation(monthsNames[currentMonth],currentYear);};var y2k=function(number){return(number<1000)?number+1900:number;};this.getWeekNumber=function(year,month,day){var when=new Date(year,month,day);var newYear=new Date(year,0,1);var modDay=newYear.getDay();var weeknr=false;if(modDay==0){modDay=6;}else{modDay--;}
var daynum=((Date.UTC(y2k(year),when.getMonth(),when.getDate(),0,0,0)-Date.UTC(y2k(year),0,1,0,0,0))/ 1000 / 60 / 60 / 24)+1;if(modDay<4){weeknr=Math.floor((daynum+modDay-1)/ 7)+1;}else{weeknr=Math.floor((daynum+modDay-1)/ 7);if(weeknr==0){year--;var prevNewYear=new Date(year,0,1);var prevmodDay=prevNewYear.getDay();if(prevmodDay==0){prevmodDay=6;}else{prevmodDay--;}
if(prevmodDay<4){weeknr=53;}else{weeknr=52;}}}
return+weeknr;};this.getWeekDaysNames=function(){var weekDaysNames=[];if(window.translationsLogics){for(var i=0;i<7;i++){weekDaysNames[i]=window.translationsLogics.get('weekdays_short.'+i);}}else{weekDaysNames[0]='E';weekDaysNames[1]='T';weekDaysNames[2]='K';weekDaysNames[3]='N';weekDaysNames[4]='R';weekDaysNames[5]='L';weekDaysNames[6]='P';}
return weekDaysNames;};this.getMonthsNames=function(){var monthsNames={};if(window.translations){for(var i=0;i<12;i++){monthsNames[i]=window.translationsLogics.get('calendar.month_'+(i+1));}}else{monthsNames=new Array();monthsNames[0]='Jaanuar';monthsNames[1]='Veebruar';monthsNames[2]='Mrts';monthsNames[2]='Mrts';monthsNames[3]='Aprill';monthsNames[4]='Mai';monthsNames[5]='Juuni';monthsNames[6]='Juuli';monthsNames[7]='August';monthsNames[8]='September';monthsNames[9]='Oktoober';monthsNames[10]='November';monthsNames[11]='Detsember';}
return monthsNames;};this.getStartComponent=function(){return startComponent;};this.getEndComponent=function(){return endComponent;};this.init();};window.CalendarSelectorInput=function(inputElement,calendarObject){var self=this;var date;var month;var year;var stamp;this.inputElement=false;var init=function(){self.inputElement=inputElement;if(typeof inputElement.value!=='undefined'){window.eventsManager.addHandler(inputElement,'focus',displayCalendarElement);window.eventsManager.addHandler(inputElement,'click',inputElementClick);window.eventsManager.addHandler(inputElement,'change',changeHandler);if(calendarObject.disableInput){inputElement.setAttribute('readonly','readonly');}}else{window.eventsManager.addHandler(inputElement,'click',displayCalendarElement);}};var displayCalendarElement=function(){calendarObject.setActiveInputComponent(self);calendarObject.displayCalendarElement();};var changeHandler=function(){date=null;month=null;year=null;stamp=null;calendarObject.hideCalendarElement();domHelper.removeClass(inputElement,calendarObject.activeInputClassName);};var inputElementClick=function(event){if(calendarObject.activeInputClassName){domHelper.addClass(inputElement,calendarObject.activeInputClassName);}
window.eventsManager.cancelBubbling(event);};this.getElementPositions=function(){return domHelper.getElementPositions(inputElement);};this.getInputHeight=function(){return inputElement.offsetHeight;};this.getValue=function(){if(inputElement.value){return inputElement.value;}else{return inputElement.innerHTML;}};this.setValue=function(value){date=null;month=null;year=null;stamp=null;if(typeof inputElement.value!=='undefined'){inputElement.value=value;window.eventsManager.fireEvent(inputElement,'change');}else{inputElement.innerHTML=value;}};this.getDate=function(){if(!date){parseValue();}
return date;};this.getMonth=function(){if(!month){parseValue();}
return month;};this.getYear=function(){if(!year){parseValue();}
return year;};this.getStamp=function(){if(!stamp){parseValue();}
return stamp;};var parseValue=function(){var textValue=self.getValue();if(textValue.match(/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.](19|20)\d\d$/)){var dateParts=textValue.split('.');date=parseInt(dateParts[0],10);month=parseInt(dateParts[1],10)-1;year=parseInt(dateParts[2],10);var dateObject=new Date(year,month,date);stamp=dateObject.getTime();}};init();};window.CalendarSelectorDay=function(calendarObject,className,year,month,day,selectionDisabled,weekNr,eventLink,hideHover){this.domElement=false;this.day=false;this.month=false;this.year=false;var self=this;this.init=function(){this.calendarObject=calendarObject;this.className=className;this.month=month;this.year=year;this.day=day;this.createDomElement();};this.createDomElement=function(){var domElement=document.createElement('td');this.domElement=domElement;this.domElement.className=this.className;if(weekNr){var weekNrElement=document.createElement('span');weekNrElement.className='calendar_week_nr';weekNrElement.innerText=weekNr;domElement.appendChild(weekNrElement);}
var content=document.createTextNode(this.day);var wrapperContent=document.createElement('span');wrapperContent.appendChild(content);domElement.appendChild(wrapperContent);if(!selectionDisabled){window.eventsManager.addHandler(domElement,'click',this.clickHandler);if(!hideHover){window.eventsManager.addHandler(domElement,'mouseover',this.mouseOverHandler);window.eventsManager.addHandler(domElement,'mouseout',this.mouseOutHandler);}}};this.mouseOverHandler=function(){self.domElement.className=self.className+' calendar_selector_hovered';};this.mouseOutHandler=function(){self.domElement.className=self.className;};this.clickHandler=function(event){if(eventLink){window.location.href=eventLink;}else{eventsManager.cancelBubbling(event);self.calendarObject.selectDay(self.year,self.month,self.day);}};this.init();};window.CalendarSelectorMonth=function(month,year){this.init=function(){this.month=month;this.year=year;var monthFirstDay=new Date(year,month,1);var weekDay=monthFirstDay.getDay()-1;if(weekDay<0){weekDay=6;}
var tableFirstDay=new Date(year,month,1-weekDay);var monthLastDay=new Date(year,month+1,0);weekDay=monthLastDay.getDay()-1;if(weekDay<0){weekDay=6;}
var tableLastDay=new Date(year,month+1,6-weekDay);this.monthFirstDay=monthFirstDay;this.monthLastDay=monthLastDay;this.tableFirstDay=tableFirstDay;this.tableLastDay=tableLastDay;this.calculateDaysData();};this.calculateDaysData=function(){var todayDate=new Date();todayDate.setTime(this.tableFirstDay.getTime());var currentRow=0;var currentWeekDay=0;while(todayDate.getTime()<=this.tableLastDay.getTime()){if(!this.daysGrid[currentRow]){this.daysGrid[currentRow]=new Array();}
this.daysGrid[currentRow][currentWeekDay]=new Date(todayDate.getTime());todayDate.setDate(todayDate.getDate()+1);currentWeekDay++;if(currentWeekDay==7){currentWeekDay=0;currentRow++;}}};this.daysGrid=new Array();this.init();};window.CalendarSelector_nextMonth=function(calendarObject){this.init=function(){this.calendarObject=calendarObject;var buttonElement=document.createElement('span');buttonElement.className='calendar_selector_nextmonth';calendarObject.headerElement.appendChild(buttonElement);var buttonText='';if(buttonElement.textContent!=null){buttonElement.textContent=buttonText;}else{buttonElement.innerText=buttonText;}
window.eventsManager.addHandler(buttonElement,'click',this.click);};this.click=function(event){window.eventsManager.preventDefaultAction(event);self.calendarObject.showNextMonth();};var self=this;this.init();};window.CalendarSelector_previousMonth=function(calendarObject){this.init=function(){this.calendarObject=calendarObject;var buttonElement=document.createElement('span');buttonElement.className='calendar_selector_previousmonth';calendarObject.headerElement.appendChild(buttonElement);buttonElement.href='';var buttonText='';if(buttonElement.textContent!=null){buttonElement.textContent=buttonText;}else{buttonElement.innerText=buttonText;}
window.eventsManager.addHandler(buttonElement,'click',this.click);};this.click=function(event){window.eventsManager.preventDefaultAction(event);self.calendarObject.showPreviousMonth();};var self=this;this.init();};window.CalendarSelector_currentLocation=function(calendarObject){this.init=function(){this.calendarObject=calendarObject;var locationElement=document.createElement('div');locationElement.className='calendar_selector_location';calendarObject.headerElement.appendChild(locationElement);this.locationElement=locationElement;};this.setLocation=function(month,year){var locationText=month+' '+year;if(this.locationElement.textContent!=null){this.locationElement.textContent=locationText;}else{this.locationElement.innerText=locationText;}};this.init();};;window.commentFormLogics=new function(){var commentsInfo={};var initComponents=function(){var elements=document.querySelectorAll('.comment_form');for(var i=0;i<elements.length;i++){new CommentForm(elements[i]);}
elements=document.querySelectorAll('.comment');for(i=0;i<elements.length;i++){if(elements[i].id.search('vote_id_')!=-1){var elementId=elements[i].id.split('_')[2];if(commentsInfo[elementId]!=undefined){new CommentComponent(elements[i],commentsInfo[elementId]);}}}};var initLogics=function(){if(window.commentsList!=undefined){for(var i=0;i<window.commentsList.length;i++){commentsInfo[window.commentsList[i].id]=window.commentsList[i];}}};controller.addListener('initDom',initComponents);controller.addListener('initLogics',initLogics);};;window.galleriesLogics=new function(){var galleriesIndex;var initLogics=function(){galleriesIndex={};if(typeof galleriesInfo!=='undefined'){for(var id in galleriesInfo){var galleryItem=new GalleryItem(galleriesInfo[id]);galleriesIndex[galleryItem.getId()]=galleryItem;}}};var initComponents=function(){var elements,i,component;for(var id in galleriesIndex){var galleryInfo=galleriesIndex[id];if(galleryInfo){elements=_('.galleryid_'+id);for(i=0;i<elements.length;i++){component=false;if(elements[i].className.indexOf('gallery_static')!==-1){if(typeof StaticGalleryComponent!=='undefined'){component=new StaticGalleryComponent(elements[i],galleryInfo);}}else if(elements[i].className.indexOf('gallery_slide')!==-1){component=new GalleryComponent(elements[i],galleryInfo,'slide');}else if(elements[i].className.indexOf('gallery_scroll')!==-1){component=new GalleryComponent(elements[i],galleryInfo,'scroll');}else if(elements[i].className.indexOf('gallery_carousel')!==-1){component=new GalleryComponent(elements[i],galleryInfo,'carousel');}
if(component){controller.addListener('startApplication',component.init);}}}}};this.getGalleriesIndex=function(){return galleriesIndex;};this.getGalleryInfo=function(id){if(typeof galleriesIndex[id]!=='undefined'){return galleriesIndex[id];}
return false;};controller.addListener('initDom',initComponents);controller.addListener('initLogics',initLogics);};window.GalleryItem=function(info){var self=this;var id;var galleryResizeType;var galleryWidth;var galleryHeight;var thumbnailsSelectorEnabled;var thumbnailsSelectorHeight;var fullScreenGalleryEnabled;var imageResizeType;var changeDelay=6000;var showDelay=0;var imagesButtonsEnabled=false;var playbackButtonEnabled=false;var descriptionType='none';var descriptionEffect='none';var imagesPrevNextButtonsEnabled=false;var imagesPrevNextButtonsSeparated=false;var fullScreenButtonEnabled=false;var imageAspectRatio;var videoAutoStart=false;var mobileGalleryHeight=false;var mobileGalleryResizeType=false;var mobileImageResizeType=false;var mobileThumbnailsSelectorEnabled;var mobileEnablePrevNextImagesButtons;var mobileImagesButtonsEnabled;var imagesIndex;var imagesList;var currentImage;var slideShowActive=false;var interval;var init=function(){importData(info);if(imagesList.length>0){currentImage=imagesList[0];}};var importData=function(info){imagesIndex={};imagesList=[];id=parseInt(info.id,10);if(typeof info.galleryResizeType!=='undefined'){galleryResizeType=info.galleryResizeType;}else{galleryResizeType='viewport';}
if(typeof info.galleryWidth!=='undefined'){galleryWidth=info.galleryWidth;}else{galleryWidth=null;}
if(typeof info.height!=='undefined'){galleryHeight=info.height;}else if(typeof info.galleryHeight!=='undefined'){galleryHeight=info.galleryHeight;}else{galleryHeight=null;}
if(typeof info.displaySelector!=='undefined'){thumbnailsSelectorEnabled=info.displaySelector;}else if(typeof info.thumbnailsSelectorEnabled!=='undefined'){thumbnailsSelectorEnabled=info.thumbnailsSelectorEnabled;}else{thumbnailsSelectorEnabled=false;}
if(typeof info.thumbnailsSelectorHeight!=='undefined'){thumbnailsSelectorHeight=info.thumbnailsSelectorHeight;}else{thumbnailsSelectorHeight=false;}
showDelay=info.showDelay||0;if(typeof info.fullScreenGallery!=='undefined'){fullScreenGalleryEnabled=info.fullScreenGallery;}else if(typeof info.fullScreenGalleryEnabled!=='undefined'){fullScreenGalleryEnabled=info.fullScreenGalleryEnabled;}else{fullScreenGalleryEnabled=true;}
if(typeof info.changeDelay!=='undefined'){changeDelay=parseInt(info.changeDelay,10);}else{changeDelay=6000;}
if(typeof info.videoAutoStart!=='undefined'){videoAutoStart=!!info.videoAutoStart;}
if(typeof info.imageAspectRatio!=='undefined'){imageAspectRatio=parseFloat(info.imageAspectRatio);}
if(typeof info.imageResizeLogics!=='undefined'){imageResizeType=info.imageResizeLogics;}else if(typeof info.imageResizeType!=='undefined'){imageResizeType=info.imageResizeType;}else{imageResizeType='resize';}
if(typeof info.descriptionType!=='undefined'){descriptionType=info.descriptionType;}
if(typeof info.descriptionEffect!=='undefined'){descriptionEffect=info.descriptionEffect;}
if(typeof info.mobileGalleryHeight!=='undefined'){mobileGalleryHeight=info.mobileGalleryHeight;}
if(typeof info.mobileGalleryResizeType!=='undefined'){mobileGalleryResizeType=info.mobileGalleryResizeType;}
if(typeof info.mobileImageResizeType!=='undefined'){mobileImageResizeType=info.mobileImageResizeType;}
if(typeof info.mobileThumbnailsSelectorEnabled!=='undefined'){mobileThumbnailsSelectorEnabled=info.mobileThumbnailsSelectorEnabled;}
if(typeof info.mobileEnablePrevNextImagesButtons!=='undefined'){mobileEnablePrevNextImagesButtons=info.mobileEnablePrevNextImagesButtons;}
if(typeof info.mobileImagesButtonsEnabled!=='undefined'){mobileImagesButtonsEnabled=info.mobileImagesButtonsEnabled;}
if(info.images.length>1){if(info.enableImagesButtons||info.imagesButtonsEnabled){imagesButtonsEnabled=true;}
if(info.enablePrevNextImagesButtons||info.imagesPrevNextButtonsEnabled){imagesPrevNextButtonsEnabled=true;}
if(info.imagesPrevNextButtonsSeparated){imagesPrevNextButtonsSeparated=true;}
if(info.enablePlaybackButton||info.playbackButtonEnabled){playbackButtonEnabled=true;}}
if(info.fullScreenButtonEnabled){fullScreenButtonEnabled=true;}
for(var i=0;i<info.images.length;i++){var galleryImage=new GalleryImage(info.images[i],self);imagesIndex[galleryImage.getId()]=galleryImage;imagesList.push(galleryImage);}};this.getDescriptionType=function(){return descriptionType;};this.getDescriptionEffect=function(){return descriptionEffect;};this.getChangeDelay=function(){return changeDelay;};this.getId=function(){return id;};this.isFullScreenGalleryEnabled=function(){return fullScreenGalleryEnabled;};this.getImageResizeType=function(mobile){if(mobile&&mobileImageResizeType){return mobileImageResizeType;}
return imageResizeType;};this.getGalleryResizeType=function(mobile){if(mobile&&mobileGalleryResizeType){return mobileGalleryResizeType;}
return galleryResizeType;};this.getGalleryWidth=function(){return galleryWidth;};this.getShowDelay=function(){return showDelay;};this.getGalleryHeight=function(mobile){if(mobile&&mobileGalleryHeight){return mobileGalleryHeight;}
return galleryHeight;};this.getImagesList=function(){return imagesList;};this.getImageAspectRatio=function(){return imageAspectRatio;};this.getVideoAutoStart=function(){return videoAutoStart;};this.displayImageByNumber=function(number){if(typeof imagesList[number]!=='undefined'){return self.displayImage(imagesList[number].getId());}
return false;};this.displayImage=function(imageId){if(typeof imagesIndex[imageId]!=='undefined'){currentImage=imagesIndex[imageId];}
controller.fireEvent('galleryImageDisplay',currentImage);};this.getCurrentImage=function(){return currentImage;};this.getCurrentImageNumber=function(){var currentImageId=currentImage.getId();return self.getImageNumber(currentImageId);};this.getImageNumber=function(imageId){for(var i=0;i<imagesList.length;i++){if(imagesList[i].getId()==imageId){return i;}}
return false;};this.isThumbnailsSelectorEnabled=function(mobile){var result=false;if(mobile&&mobileThumbnailsSelectorEnabled!==null){result=mobileThumbnailsSelectorEnabled;}else{result=thumbnailsSelectorEnabled;}
if(imagesList.length<=1){result=false;}
return result;};this.getThumbnailsSelectorHeight=function(){return thumbnailsSelectorHeight;};this.displayNextImage=function(){self.displayImage(self.getNextImage(true));};this.displayPreviousImage=function(){self.displayImage(self.getPrevImage(true));};this.getNextImage=function(infiniteLoop){var currentImageId=currentImage.getId();for(var i=0;i<imagesList.length;i++){if(imagesList[i].getId()==currentImageId){if(typeof imagesList[i+1]!=='undefined'){return imagesList[i+1].getId();}else if(infiniteLoop){return imagesList[0].getId();}}}
return false;};this.getPrevImage=function(infiniteLoop){var currentImageId=currentImage.getId();for(var i=0;i<imagesList.length;i++){if(imagesList[i].getId()==currentImageId){if(typeof imagesList[i-1]!=='undefined'){return imagesList[i-1].getId();}else if(infiniteLoop){return imagesList[imagesList.length-1].getId();}}}
return false;};this.areImagesButtonsEnabled=function(mobile){if(mobile&&mobileImagesButtonsEnabled!==null){return mobileImagesButtonsEnabled;}
return imagesButtonsEnabled;};this.areImagesPrevNextButtonsEnabled=function(mobile){if(mobile&&mobileEnablePrevNextImagesButtons!==null){return mobileEnablePrevNextImagesButtons;}
return imagesPrevNextButtonsEnabled;};this.areImagesPrevNextButtonsSeparated=function(){return imagesPrevNextButtonsSeparated;};this.isFullScreenButtonEnabled=function(){return fullScreenButtonEnabled;};this.isPlaybackButtonEnabled=function(){return playbackButtonEnabled;};this.stopSlideShow=function(){slideShowActive=false;window.clearInterval(interval);controller.fireEvent('gallerySlideShowUpdated',id);};this.startSlideShow=function(){if(imagesList.length>1){slideShowActive=true;window.clearInterval(interval);interval=window.setInterval(self.displayNextImage,changeDelay);}
controller.fireEvent('gallerySlideShowUpdated',id);};this.isSlideShowActive=function(){return slideShowActive;};init();};window.GalleryImage=function(info,galleryObject){var self=this;var id;var fullImageUrl;var bigImageUrl;var thumbnailImageUrl;var mobileFullImageUrl;var mobileBigImageUrl;var mobileThumbnailImageUrl;var fileUrl;var filename;var title;var description;var alt;var link;var externalLink;var isVideo=false;var init=function(){importData(info);};var importData=function(info){id=parseInt(info.id,10);fullImageUrl=info.fullImageUrl;bigImageUrl=info.bigImageUrl;thumbnailImageUrl=info.thumbnailImageUrl;if(typeof info.mobileFullImageUrl!=='undefined'){mobileFullImageUrl=info.mobileFullImageUrl;}
if(typeof info.mobileBigImageUrl!=='undefined'){mobileBigImageUrl=info.mobileBigImageUrl;}
if(typeof info.mobileThumbnailImageUrl!=='undefined'){mobileThumbnailImageUrl=info.mobileThumbnailImageUrl;}
fileUrl=info.fileUrl;filename=info.filename;title=info.title;description=info.description;alt=info.alt;link=info.link;externalLink=info.externalLink;if(filename){var parts=filename.split('.');var extension=parts[parts.length-1].toLowerCase();if(extension=='mp4'){isVideo=true;}}};this.getId=function(){return id;};this.getTitle=function(){return title;};this.getDescription=function(){return description;};this.getFullImageUrl=function(mobile){if(mobile){return mobileFullImageUrl;}
return fullImageUrl;};this.getBigImageUrl=function(mobile){if(mobile){return mobileFullImageUrl;}
return bigImageUrl;};this.getThumbnailImageUrl=function(mobile){if(mobile){return mobileFullImageUrl;}
return thumbnailImageUrl;};this.getFileUrl=function(){return fileUrl;};this.getFilename=function(){return filename;};this.getExternalLink=function(){return externalLink;};this.getLink=function(){return link;};this.isVideo=function(){return isVideo;};this.openExternalLink=function(){if(self.isNewWindowUsed()){window.open(self.getExternalLink(),'_blank');}else{document.location.href=self.getExternalLink();}};this.isNewWindowUsed=function(){var tempLink=document.createElement('a');tempLink.href=externalLink;return(window.location.hostname!=tempLink.hostname)&&(tempLink.hostname!=='');};this.getImageNumber=function(){return galleryObject.getImageNumber(id);};this.display=function(){galleryObject.displayImage(id);};this.getImageResizeType=function(mobile){return galleryObject.getImageResizeType(mobile);};this.getGallery=function(){return galleryObject;};init();};;window.contentTogglerLogics=new function(){var initComponents=function(){var elements=_('.toggleable_component');for(var i=0;i<elements.length;i++){new ToggleableContainer(elements[i]);}};controller.addListener('initDom',initComponents);};;window.mapsLogics=new function(){var self=this;var mapsIndex={};var initLogics=function(){if(typeof window.mapsInfo!=='undefined'){for(var id in mapsInfo){if(mapsInfo.hasOwnProperty(id)){mapsIndex[id]=new MapInfo(mapsInfo[id]);}}
controller.addListener('initDom',initDom);}};var initDom=function(){var googleApiRequired=false;for(var id in mapsIndex){if(mapsIndex.hasOwnProperty(id)){if(mapsIndex[id].getStyles()){googleApiRequired=true;break;}}}
if(googleApiRequired){injectGoogleMapsApi();}else{self.initGoogleMapComponents();}
var embeddedMapElements=_('.map_embedded');for(var i=embeddedMapElements.length;i--;){new EmbeddedMapComponent(embeddedMapElements[i]);}};this.getMapInfo=function(id){if(typeof mapsIndex[id]!=='undefined'){return mapsIndex[id];}
return false;};var injectGoogleMapsApi=function(){var script=document.createElement('script');script.type='text/javascript';script.src='//maps.googleapis.com/maps/api/js?language='+self.getShortLanguageCode()+'&callback=window.mapsLogics.initGoogleMapComponents&key=AIzaSyD6IK7At5KLa_vYFFxGcE6ml9VC2WQTWHw';document.body.appendChild(script);};this.initGoogleMapComponents=function(){for(var id in mapsIndex){var elements=_('.googlemap_id_'+id);for(var i=elements.length;i--;){new MapComponent(elements[i],id);}}};this.getShortLanguageCode=function(){var result='en';if(window.currentLanguageCode){switch(window.currentLanguageCode){case'est':result='et';break;case'rus':result='ru';break;case'fin':result='fi';break;default:break;}}
return result;};controller.addListener('initLogics',initLogics);};window.MapInfo=function(info){var coordinates=[];var styles;var mapCode;var title='';var content='';var heightAdjusted=false;var mapTypeControlEnabled=false;var zoomControlEnabled=false;var streetViewControlEnabled=false;var height;var zoomLevel;var init=function(){coordinates=info.coordinates.replace('"','').split(',');title=info.title;mapCode=info.mapCode;heightAdjusted=info.heightAdjusted;styles=info.styles?info.styles:false;if(typeof info.height!='undefined'){height=info.height;}else{height=0.5;}
if(typeof info.zoomLevel!='undefined'){zoomLevel=info.zoomLevel;}else{zoomLevel=14;}
mapTypeControlEnabled=!!info.mapTypeControlEnabled;zoomControlEnabled=!!info.zoomControlEnabled;streetViewControlEnabled=!!info.streetViewControlEnabled;content=info.content;};this.getId=function(){return id;};this.getCoordinates=function(){return coordinates;};this.getTitle=function(){return title;};this.getContent=function(){return content;};this.isHeightAdjusted=function(){return heightAdjusted;};this.getHeight=function(){return height;};this.getZoomLevel=function(){return zoomLevel;};this.getMapCode=function(){return mapCode;};this.getStyles=function(){return styles;};this.getMapTypeControlEnabled=function(){return mapTypeControlEnabled;};this.getZoomControlEnabled=function(){return zoomControlEnabled;};this.getStreetViewControlEnabled=function(){return streetViewControlEnabled;};init();};;window.searchLogics=new function(){var initComponents=function(){var elements=_('.search_form');for(var i=0;i<elements.length;i++){new SearchFormComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.tabsLogics=new function(){var initComponents=function(){var elements=_('.tabs');for(var i=elements.length;i--;){new TabsComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.translationsLogics=new function(){var translationsList={};var init=function(){if(typeof window.translations!=='undefined'){translationsList=window.translations;}};this.get=function(name){if(typeof translationsList[name]!=='undefined'){return translationsList[name];}else{return'#'+name+'#';}};controller.addListener('initLogics',init);};;window.subscriptionLogics=new function(){var initComponents=function(){var elements=_('.news_mailform_form');for(var i=0;i<elements.length;i++){new SubscriptionFormComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.ajaxFormLogics=new function(){var initComponents=function(){var elements=_('.ajax_form');for(var i=0;i<elements.length;i++){new AjaxFormComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.feedbackLogics=new function(){var init=function(){var elements=document.querySelectorAll('.feedback_form');for(var i=0;i<elements.length;i++){new FeedbackFormComponent(elements[i]);}};controller.addListener('initDom',init);};;window.googleAd=new function(){var mainEvent;var feedbackEvent;var mailEvent;var buyEvent;var init=function(){if(typeof window.google!=='undefined'){if(typeof(window.google.ad)==='object'&&window.google.ad!==null&&typeof gtag!=='undefined'){mainEvent=window.google.ad.mainId;feedbackEvent=window.google.ad.feedbackId;mailEvent=window.google.ad.emailId;buyEvent=window.google.ad.buyId;}}};this.sendEmailEvent=function(){if(mainEvent&&mailEvent){gtag('event','conversion',{'send_to':mainEvent+'/'+mailEvent});}};this.sendFeedbackEvent=function(){if(mainEvent&&feedbackEvent){gtag('event','conversion',{'send_to':mainEvent+'/'+feedbackEvent});}};this.sendBuyEvent=function(value,currency,orderId){if(mainEvent&&buyEvent){if(value&&currency&&orderId){var parameters={};parameters.send_to=mainEvent+'/'+buyEvent;parameters.value=value;parameters.currency=currency;parameters.transaction_id=orderId;gtag('event','conversion',parameters);}}};controller.addListener('initLogics',init);};;window.tracking={buyTracking:function(orderId){var order=ordersLogics.getOrder(orderId);if(order){googleAd.sendBuyEvent(order.getInvoiceNumber(),order.getCurrency(),orderId);var products=order.getProducts();var parameters={};if(products){parameters.id=order.getInvoiceNumber();parameters.affiliation='shop';parameters.revenue=order.getPriceWithoutVat();parameters.tax=order.getVat();parameters.shipping=order.getShippingPrice();parameters.products=products;googleAnalyticsLogics.purchaseEvent(parameters);}}},emailTracking:function(email){googleAd.sendEmailEvent();trackingComponent.emailClickEvent(email);},feedbackTracking:function(){googleAd.sendFeedbackEvent();googleAnalyticsLogics.feedbackEvent();},promoClickTracking:function(){var product=productLogics.getProduct();var parameters={};parameters.id=product.getId();parameters.name=product.getName();parameters.price=product.getPrice();parameters.position=product.getPosition();googleAnalyticsLogics.promoClickEvent();},productClickTracking:function(id,callback){var product=productLogics.getProduct(id);var parameters={};if(product){parameters.id=product.getId();parameters.name=product.getName();parameters.brand=product.getBrand();parameters.category=product.getCategory();parameters.variant=product.getVariant();parameters.price=product.getPrice();parameters.quantity=product.getQuantity();parameters.coupon=product.getCoupon();parameters.position=product.getPosition();googleAnalyticsLogics.productClickEvent(parameters,callback);}else if(callback){callback();}},addToBasketTracking:function(product,amount){var parameters={};if(product){parameters.id=product.productId;parameters.name=product.title_dl;parameters.category=product.category_dl;parameters.brand=product.brand;parameters.variant='';for(var i=0;i<product.variation_dl.length;i++){parameters.variant+=product.variation_dl[i]+' ';}
parameters.price=product.price;parameters.quantity=amount;googleAnalyticsLogics.addToBasketEvent(parameters);}},checkoutTracking:function(products){var parameters={};if(products){parameters.products=products;}
googleAnalyticsLogics.checkoutEvent(parameters);},checkoutProgressTracking:function(step,products){var parameters={};if(products){parameters.products=products;}
googleAnalyticsLogics.checkProgressEvent(step,parameters);},removeFromBasket:function(product){var parameters={};if(product){parameters.id=product.productId;parameters.name=product.title_dl;parameters.price=product.price;parameters.quantity=product.amount;parameters.variant=product.variation_dl;googleAnalyticsLogics.removeFromBasketEvent(parameters);}},checkoutOptionsTracking:function(step,value){if(value&&step){googleAnalyticsLogics.checkoutOptionsEvent(step,value);}},detailTracking:function(product){var parameters={};if(product){parameters.id=product.id;parameters.name=product.name;parameters.category=product.category;parameters.price=product.price;googleAnalyticsLogics.detailEvent(parameters);}},impressionTracking:function(products){if(products){var parameters={};parameters.products=products;googleAnalyticsLogics.impressionEvent(parameters);}},};;window.emailConversion=new function(){var init=function(){var elements=_('a[href^="mailto:"]');for(var i=0;i<elements.length;i++){elements[i].addEventListener('click',function(e){var targetInnerHtml=e.target.innerHTML;tracking.emailTracking(targetInnerHtml);});}};controller.addListener('initDom',init);};;window.ordersLogics=new function(){var ordersIndex={};var init=function(){if(typeof window.orders!=='undefined'){for(var i=0;i<window.orders.length;i++){var order=new Order(window.orders[i]);ordersIndex[order.getId()]=order;}}};this.getOrder=function(id){if(typeof ordersIndex[id]!=='undefined'){return ordersIndex[id];}
return false;};controller.addListener('initLogics',init);};window.Order=function(data){var id;var currency;var vatAmount;var products=[];var revenue;var shippingPrice;var coupon='';var invoiceNumber;var discounts;var self=this;var init=function(){self.importData(data);};this.getId=function(){return id;};this.getInvoiceNumber=function(){return invoiceNumber;};this.getCurrency=function(){return currency;};this.getPriceWithoutVat=function(){var price=parseFloat(revenue)-parseFloat(vatAmount);return price.toFixed(2);};this.getVat=function(){return vatAmount;};this.getShippingPrice=function(){return shippingPrice;};this.getPromoCode=function(){for(var i=0;i<discounts.length;i++){coupon+=discounts[i]['title']+' ';}
return coupon;};this.getProducts=function(){return products;};this.getCoupon=function(){var coupon;if(discounts){for(var i=0;i<discounts.length;i++){if(discounts.length===1){coupon=discounts[i].title+' ('+discounts[i].id+')';}}}
return coupon;};this.importData=function(){id=data.id;invoiceNumber=data.invoiceNumber;currency=data.currency;vatAmount=data.vatAmount;revenue=data.totalPrice;shippingPrice=data.deliveryPrice;discounts=data.discounts;products=data.products;};init();};;window.googleAnalyticsLogics=new function(){var ecommerceEnabled=false;var gaCallBack;var callbackTimeout;var timeoutInterval=250;var init=function(){checkEcommerce();};var checkEcommerce=function(){if(typeof window.google!=='undefined'){if(typeof window.google.ecommerce!=='undefined'){ecommerceEnabled=window.google.ecommerce.enabled;}}}
var gaCallbackCaller=function(){clearTimeout(callbackTimeout);if(gaCallBack){gaCallBack();}};var gaCallbackSetTimeout=function(callback){gaCallBack=callback;callbackTimeout=setTimeout(gaCallbackCaller,timeoutInterval);};this.productClickEvent=function(product,callBack){gaCallbackSetTimeout(callBack);var list_name='';if(window.currentElementTitle!='undefined'){list_name=window.currentElementTitle;}
if(ecommerceEnabled&&product){gtag('event','select_content',{'content_type':'product','items':[{'id':product.id,'name':product.name,'brand':product.brand,'category':product.category,'list_name':list_name,'price':product.price,},],'event_callback':gaCallbackCaller,});}};this.promoClickEvent=function(parameters,callBack){};this.addToBasketEvent=function(product){if(ecommerceEnabled&&product){gtag('event','add_to_cart',{'items':[{'id':product.id,'name':product.name,'brand':product.brand,'category':product.category,'variant':product.variant,'quantity':product.quantity,'price':product.price,},],});}};this.checkoutEvent=function(parameters){var products=[];if(ecommerceEnabled&&parameters){for(var i=0;i<parameters.products.length;i++){products.push({'id':parameters.products[i].productId,'name':parameters.products[i].title_dl,'price':parameters.products[i].price,'variant':parameters.products[i].variation_dl,'quantity':parameters.products[i].amount,'category':parameters.products[i].category_dl,});}
gtag('event','begin_checkout',{'items':products,'coupon':'',});}};this.purchaseEvent=function(order){if(ecommerceEnabled&&order){var products=[];for(var i=0;i<order.products.length;i++){products.push({'id':order.products[i].id,'name':order.products[i].title_ga,'price':order.products[i].price,'variant':order.products[i].variation_ga,'quantity':order.products[i].amount,'category':order.products[i].category_ga,});}
gtag('event','purchase',{'transaction_id':order.id,'affiliation':order.affiliation,'value':order.revenue,'tax':order.tax,'shipping':order.shipping,'currency':'EUR','items':products,});}};this.removeFromBasketEvent=function(product){if(ecommerceEnabled&&product){gtag('event','remove_from_cart',{'items':[{'id':product.id,'name':product.name,'brand':product.brand,'category':product.category,'variant':product.variant,'quantity':product.quantity,'price':product.price,},],});}};this.detailEvent=function(product){if(ecommerceEnabled&&product){gtag('event','view_item',{'items':[{'id':product.id,'name':product.name,'category':product.category,'price':product.price,},],});}};this.checkoutOptionsEvent=function(step,value){checkEcommerce();if(ecommerceEnabled&&value&&step){gtag('event','set_checkout_option',{'checkout_step':step,'checkout_option':value,});}};this.checkProgressEvent=function(step,parameters){var products=Array();if(ecommerceEnabled&&parameters){for(var i=0;i<parameters.products.length;i++){products.push({'id':parameters.products[i].productId,'name':parameters.products[i].title_dl,'price':parameters.products[i].price,'variant':parameters.products[i].variation_dl,'quantity':parameters.products[i].amount,'category':parameters.products[i].category_dl,});}
gtag('event','checkout_progress',{'items':products,'checkout_step':step,});}};this.feedbackEvent=function(){if(ecommerceEnabled){gtag('event','Send',{'event_category':'Forms','event_label':'Feedback',});}};this.impressionEvent=function(parameters){var products=Array();var list_name='';if(window.currentElementTitle!='undefined'){list_name=window.currentElementTitle;}
if(ecommerceEnabled&&parameters){for(var i=0;i<parameters.products.length;i++){products.push({'id':parameters.products[i].getId(),'name':parameters.products[i].getName(),'price':parameters.products[i].getPrice(),'list_name':list_name,'category':parameters.products[i].getCategory(),});}
gtag('event','view_item_list',{'items':products,});}};controller.addListener('initLogics',init);};;window.productLogics=new function(){var productsIndex={};var init=function(){var impressionProducts=Array();if(typeof window.products!=='undefined'&&window.products){for(var i=0;i<window.products.length;i++){var products=new Product(window.products[i]);productsIndex[products.getId()]=products;impressionProducts.push(products);}
if(window.productDetailsData===undefined){tracking.impressionTracking(impressionProducts);}}};this.getProduct=function(id){if(typeof productsIndex[id]!=='undefined'){return productsIndex[id];}
return false;};controller.addListener('initDom',init);};window.Product=function(data){var product=data;this.getId=function(){if(product.id){return product.id;}
return false;};this.getName=function(){if(product.name_ga){return product.name_ga;}
return false;};this.getBrand=function(){if(product.brand_ga){return product.brand_ga;}
return false;};this.getCategory=function(){if(product.category_ga){return product.category_ga;}
return false;};this.getVariant=function(){if(product.variant){return product.variant;}
return false;};this.getPrice=function(){if(product.price){return product.price;}
return false;};this.getQuantity=function(){if(product.quantity){return product.quantity;}
return false;};this.getCoupon=function(){if(product.coupon){return product.coupon;}
return false;};this.getPosition=function(){if(product.position){return product.position;}
return false;};};;window.passwordReminderLogics=new function(){var initComponents=function(){var elements=_('.passwordreminder_form');for(var i=0;i<elements.length;i++){new PasswordReminderFormComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.lazyImageLogics=new function(){var initComponents=function(){var elements=document.querySelectorAll('.lazy_image');for(var i=elements.length;i--;){new LazyImageComponent(elements[i]);}};controller.addListener('startApplication',initComponents);};;window.eventsLogics=new function(){var initComponents=function(){var elements=_('.eventslist');for(var i=0;i<elements.length;i++){new EventsListComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.dropDownManager=new function(){this.getDropDown=function(element,parameters){if(typeof parameters=='undefined'){parameters={};}
var dropDown=checkDropDown(element);if(!dropDown){dropDown=manufactureDropDown(element,parameters);}
return dropDown;};this.updateDropDown=function(element){var dropDown=checkDropDown(element);if(dropDown){dropDown.update();}};this.hideLists=function(){for(var i=0;i<dropDownObjectsList.length;i++){dropDownObjectsList[i].hideList();}};this.createDropDown=function(parameters){var dropDown=new DropDownComponent(false,parameters);dropDownObjectsList.push(dropDown);return dropDown;};var manufactureDropDown=function(element,parameters){var dropDown=new DropDownComponent(element,parameters);dropDownObjectsList.push(dropDown);return dropDown;};var init=function(){window.eventsManager.addHandler(window,'click',clickHandler);var dropDownElements=_('.dropdown_placeholder');for(var i=0;i<dropDownElements.length;i++){if(!checkDropDown(dropDownElements[i])){var referenceElement=dropDownElements[i].nextSibling||null;var parent=dropDownElements[i].parentNode;var dropDownObject=manufactureDropDown(dropDownElements[i]);parent.insertBefore(dropDownObject.componentElement,referenceElement);}}};var checkDropDown=function(element){var result=false;for(var i=0;i<dropDownObjectsList.length;i++){if(dropDownObjectsList[i].selectorElement==element){result=dropDownObjectsList[i];break;}}
return result;};var clickHandler=function(){for(var i=0;i<dropDownObjectsList.length;i++){dropDownObjectsList[i].hideList();}};var self=this;var dropDownObjectsList=[];controller.addListener('initDom',init);};;window.redirectSelectLogics=new function(){var initComponents=function(){var elements=_('select.redirect_select');for(var i=0;i<elements.length;i++){new RedirectSelectComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.textareaLogics=new function(){var initComponents=function(){var elements=_('.textarea_component');for(var i=0;i<elements.length;i++){new TextareaComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.bannerLogics=new function(){var initComponents=function(){var elements=_('.banner');for(var i=0;i<elements.length;i++){new BannerComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.inputLogics=new function(){var placeHolderSupport=null;var initComponents=function(){var elements=_('.input_component');for(var i=0;i<elements.length;i++){new InputComponent({'componentElement':elements[i]});}};this.getPlaceHolderSupport=function(){if(placeHolderSupport===null){placeHolderSupport=('placeholder'in document.createElement('input'));}
return placeHolderSupport;};controller.addListener('initDom',initComponents);};;window.accordeonLogics=new function(){var initComponents=function(){var elements=_('.accordeon');for(var i=0;i<elements.length;i++){new Accordeon(elements[i]);}};controller.addListener('initDom',initComponents);};;window.fancyTitleLogics=new function(){var init=function(){var elements=_('.fancytitle');for(var i=elements.length;i--;){new FancyTitleComponent(elements[i]);}};controller.addListener('initDom',init);};;window.formSubmitLinkLogics=new function(){var init=function(){var elements=_('.formsubmitlink_component');for(var i=0,l=elements.length;i!==l;i++){new FormSubmitLinkComponent(elements[i]);}};controller.addListener('initDom',init);};;window.linkListLogics=new function(){var initComponents=function(){var elements=_('.linklist');for(var i=0;i<elements.length;i++){new LinkListComponent(elements[i]);}};controller.addListener('DOMContentReady',initComponents);};;window.loginLogics=new function(){var initComponents=function(){var elements=_('.login_component');for(var i=0;i<elements.length;i++){new LoginComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.mainMenuLogics=new function(){var initLogics=function(){if(window.menusInfo){for(var i=0;i<window.menusInfo.length;i++){menuList.push(window.menusInfo[i]);menuIndex[window.menusInfo[i].id]=window.menusInfo[i];}}};var initComponents=function(){var elements=_('.menuitem_block');for(var i=0;i<elements.length;i++){new MainMenuComponent(elements[i]);}};this.getMenuInfo=function(menuId){var result=false;if(typeof menuIndex[menuId]!=='undefined'){result=menuIndex[menuId];}
return result;};this.getSubMenuInfo=function(menuId){var result=false;if(typeof childrenListsIndex[menuId]=='undefined'){childrenListsIndex[menuId]=[];for(var i=0;i<menuList.length;i++){if(menuList[i].parentId==menuId){childrenListsIndex[menuId].push(menuList[i]);}}
result=childrenListsIndex[menuId];}
return result;};var self=this;var menuList=[];var menuIndex={};var childrenListsIndex={};controller.addListener('initLogics',initLogics);controller.addListener('initDom',initComponents);};;window.newWindowLinkLogics=new function(){var initComponents=function(){var elements=_('.newwindow_link');for(var i=0;i<elements.length;i++){new NewWindowLinkComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.subMenuLogics=new function(){var menuList=[];var menuIndex={};var childrenListsIndex={};var initLogics=function(){if(window.subMenusInfo){for(var id in window.subMenusInfo){var menuInfo=window.subMenusInfo[id];for(var i=0;i<menuInfo.length;i++){menuList.push(menuInfo[i]);menuIndex[menuInfo[i].id]=menuInfo[i];}}}};var initComponents=function(){var elements=_('.submenu_item_haspopup');for(var i=0;i<elements.length;i++){new SubMenuItemComponent(elements[i]);}};this.getMenuInfo=function(menuId){var result=false;if(typeof menuIndex[menuId]!=='undefined'){result=menuIndex[menuId];}
return result;};this.getSubMenuInfo=function(menuId){var result=false;if(typeof childrenListsIndex[menuId]=='undefined'){childrenListsIndex[menuId]=[];for(var i=0;i<menuList.length;i++){if(menuList[i].parentId==menuId){childrenListsIndex[menuId].push(menuList[i]);}}
result=childrenListsIndex[menuId];}
return result;};controller.addListener('initLogics',initLogics);controller.addListener('initDom',initComponents);};;window.hiddenFieldsLogics=new function(){var servants={};var initComponents=function(){if(window.hiddenFieldsData){for(var t=0;t<window.hiddenFieldsData.length;t++){for(var i=0;i<window.hiddenFieldsData[t].length;i++){var currentFieldData=window.hiddenFieldsData[t][i];var elementWrapper=_('.field'+currentFieldData.selectId)[0];if(currentFieldData.selectionType=='radiobutton'){var masterElements=_('.radio_holder',elementWrapper);var selectionType='radio';}else if(currentFieldData.selectionType=='checkbox'){var masterElements=_('.checkbox_placeholder',elementWrapper);var selectionType='checkbox';}else{var masterElements=_('.dropdown_placeholder',elementWrapper);var selectionType='dropdown';}
for(var l=0;l<masterElements.length;l++){var selectComponent=new masterSelectComponent(masterElements[l],selectionType);for(var k=0;k<currentFieldData.options.length;k++){var optionComponent=new masterOptionComponent(currentFieldData.options[k].optionValue);selectComponent.addOption(optionComponent);for(var j=0;j<currentFieldData.options[k].fields.length;j++){if(typeof servants[currentFieldData.options[k].fields[j]]=='undefined'){var servantElement=_('.field'+currentFieldData.options[k].fields[j])[0];var servantComponent=new servantFieldComponent(servantElement);servants[currentFieldData.options[k].fields[j]]=servantComponent;}
optionComponent.addServant(servants[currentFieldData.options[k].fields[j]]);}}
window.eventsManager.fireEvent(masterElements[l],'change');}}}}};controller.addListener('initDom',initComponents);};;window.scrollItemsLogics=new function(){var initComponents=function(){var elements=_('.scrollitems');for(var i=elements.length;i--;){new ScrollItemsComponent(elements[i]);}};controller.addListener('DOMContentReady',initComponents);};;window.mobileMenuLogics=new function(){var menu;var self=this;var initComponents=function(){var headerElement=document.querySelector('.mobileheader');if(headerElement){new MobileHeaderComponent(headerElement);var menuElement=headerElement.querySelector('.mobilemenu');if(menuElement){document.body.appendChild(menuElement);menu=new MobileMenuComponent(menuElement);}}};this.toggleMenu=function(){if(menu){menu.toggleVisibility();}};controller.addListener('initDom',initComponents);};;window.MobileCommonMenuLogics=new function(){var initComponents=function(){var buttonElements=document.querySelectorAll('.mobile_common_menu_button');for(var i=0;i<buttonElements.length;i++){new MobileCommonMenuComponent(buttonElements[i]);}};controller.addListener('initDom',initComponents);};;window.SmoothScrollTo=new function(){var initComponents=function(){var elements=_('.smooth_scroll_to');for(var i=0;i<elements.length;i++){new SmoothScrollToComponent(elements[i]);}};controller.addListener('initDom',initComponents);};;window.spoilerLogics=new function(){let spoilers=[];let initComponents=function(){let elements=_('.spoiler_component');for(let i=0;i<elements.length;i++){spoilers.push(new SpoilerComponent(elements[i]));}};controller.addListener('initDom',initComponents);};;window.LazyLoadingMixin=function(){this.scrollCheckInterval=null;this.hasScrolled=false;this.lazyLoadingObserver=false;this.componentElement=null;this.displayCallback=null;this.initLazyLoading=function(options){this.componentElement=options.componentElement;this.displayCallback=options.displayCallback;let isIE11=!!window.MSInputMethodContext&&!!document.documentMode;if(isIE11){if(!(checkOnScreen.bind(this)())){window.addEventListener('scroll',scrollHandler.bind(this));this.scrollCheckInterval=setInterval(checkIfScrolled.bind(this),250);}}else{this.lazyLoadingObserver=new IntersectionObserver(checkObserver.bind(this),{threshold:0.01});this.lazyLoadingObserver.observe(this.componentElement);}};const scrollHandler=function(){this.hasScrolled=true;};const checkIfScrolled=function(){if(this.hasScrolled){this.hasScrolled=false;checkOnScreen.bind(this)();}};const checkOnScreen=function(){var isOnScreen=this.isOnScreen(this.componentElement,1.2);if(isOnScreen){display.bind(this)();}
return isOnScreen;};const checkObserver=function(entries){for(let i=0;i<entries.length;i++){if(entries[i].isIntersecting){display.bind(this)();break;}}};const display=function(){if(this.lazyLoadingObserver){this.lazyLoadingObserver.unobserve(this.componentElement);}
if(this.scrollCheckInterval){window.removeEventListener('scroll',scrollHandler);clearInterval(this.scrollCheckInterval);}
this.displayCallback();};DomHelperMixin.call(this);};;window.SlidesMixin=function(){this.sl_intervalId=null;this.sl_selectedNumber=-1;this.sl_slideElements=false;this.sl_displaySlideAnim=null;this.sl_hideSlideAnim=null;this.sl_autoStart=false;this.sl_componentElement=false;this.sl_onSlideChange=null;this.sl_interval=2000;this.sl_changeDuration=0;this.sl_heightCalculated=true;this.preloadCallBack=null;this.initSlides=function(options){var scope=this;parseOptions.call(scope,options);if(this.sl_componentElement){if(this.sl_slideElements.length){if(this.sl_heightCalculated){calculateHeight.call(scope);eventsManager.addHandler(window,'resize',function(event){return calculateHeight.call(scope,event);});}
if(this.sl_interval&&this.sl_autoStart){this.startSlideShow();}}}};var calculateHeight=function(){var height=0;for(var i=0,l=this.sl_slideElements.length;i!==l;i++){var slideHeight=this.sl_slideElements[i].offsetHeight;if(height<slideHeight){height=slideHeight;}}
this.sl_componentElement.style.height=height+'px';};this.showSlide=function(newNumber){if(this.preloadCallBack){this.preloadCallBack(newNumber,function(scope,number){return function(){showSlideInside.call(scope,number);};}(this,newNumber));}else{var scope=this;showSlideInside.call(scope,newNumber);}};var showSlideInside=function(newNumber){if(newNumber!=this.sl_selectedNumber&&this.sl_slideElements[newNumber]){for(var i=0;i<this.sl_slideElements.length;i++){if((i!=this.sl_selectedNumber)&&(i!=newNumber)){this.sl_slideElements[i].style.display='none';this.sl_slideElements[i].style.opacity=0;}}
if(this.sl_displaySlideAnim){this.sl_displaySlideAnim.kill();}
if(this.sl_hideSlideAnim){this.sl_hideSlideAnim.kill();}
this.sl_slideElements[newNumber].style.zIndex='5';this.sl_slideElements[newNumber].style.display='block';this.sl_slideElements[newNumber].style.opacity=0;if(this.sl_selectedNumber===-1){this.sl_slideElements[newNumber].style.opacity=1;}else{this.sl_slideElements[this.sl_selectedNumber].style.zIndex='1';this.sl_displaySlideAnim=TweenLite.to(this.sl_slideElements[newNumber],this.sl_changeDuration,{'css':{'opacity':1},'onComplete':function(scope,oldNumber){return function(){slideCompleteHandler.call(scope,oldNumber);};}(this,this.sl_selectedNumber),});this.sl_hideSlideAnim=TweenLite.to(this.sl_slideElements[this.sl_selectedNumber],this.sl_changeDuration,{'css':{'opacity':0}});}
this.sl_selectedNumber=newNumber;if(typeof this.sl_onSlideChange=='function'){this.sl_onSlideChange(this.sl_selectedNumber);}}};var slideCompleteHandler=function(oldNumber){if(this.sl_slideElements[oldNumber]&&oldNumber!=this.sl_selectedNumber){}};this.showNextSlide=function(){if(this.sl_componentElement.offsetHeight>0){var newNumber=this.sl_selectedNumber+1;if(newNumber==this.sl_slideElements.length){newNumber=0;}
this.showSlide(newNumber);}};this.showPreviousSlide=function(){if(this.sl_componentElement.offsetHeight>0){var newNumber=this.sl_selectedNumber-1;if(newNumber<0){newNumber=this.sl_slideElements.length-1;}
this.showSlide(newNumber);}};var parseOptions=function(options){if(typeof options.componentElement!=='undefined'){this.sl_componentElement=options.componentElement;}
if(typeof options.onSlideChange!=='undefined'){this.sl_onSlideChange=options.onSlideChange;}
if(typeof options.interval!=='undefined'){this.sl_interval=options.interval;}
if(typeof options.changeDuration!=='undefined'){this.sl_changeDuration=options.changeDuration;}
if(typeof options.heightCalculated!=='undefined'){this.sl_heightCalculated=options.heightCalculated;}
if(typeof options.slideElements!=='undefined'){this.sl_slideElements=options.slideElements;}
if(typeof options.sp_autoStart!=='undefined'){this.sl_autoStart=options.sp_autoStart;}
if(typeof options.preloadCallBack!=='undefined'){this.preloadCallBack=options.preloadCallBack;}};this.startSlideShow=function(immediateSwitch){controller.fireEvent('slidesPlaybackUpdate',this.sl_componentElement);if(immediateSwitch){this.showNextSlide();}
var scope=this;this.sl_intervalId=window.setInterval(function(){return scope.showNextSlide.apply(scope);},this.sl_interval);};this.stopSlideShow=function(){controller.fireEvent('slidesPlaybackUpdate',this.sl_componentElement);window.clearInterval(this.sl_intervalId);};return this;};;window.ScrollPagesMixin=function(){this.sp_selectedNumber=-1;this.sp_rotateDelay=4500;this.sp_interval=null;this.sp_effectDuration=3;this.sp_pageElements=[];this.sp_componentElement=null;this.sp_onPageChangeCallback=false;this.sp_autoStart=false;this.sp_preloadedImagesIndex={};this.preloadCallBack=null;this.scrollPagesInit=function(options){parseOptions.call(this,options);if(this.sp_componentElement){this.sp_componentElement.scrollLeft=0;var scope=this;if(this.sp_pageElements.length){if(this.sp_rotateDelay>0&&this.sp_autoStart){this.startPagesRotation();}}
eventsManager.addHandler(window,'resize',function(event){return onWindowResize.call(scope,event);});}};var parseOptions=function(options){if(typeof options.componentElement!=='undefined'){this.sp_componentElement=options.componentElement;}
if(typeof options.rotateDelay!=='undefined'){this.sp_rotateDelay=options.rotateDelay;}
if(typeof options.onPageChangeCallback!=='undefined'){this.sp_onPageChangeCallback=options.onPageChangeCallback;}
if(typeof options.effectDuration!=='undefined'){this.sp_effectDuration=options.effectDuration;}
if(typeof options.pageElements!=='undefined'){this.sp_pageElements=options.pageElements;}
if(typeof options.autoStart!=='undefined'){this.sp_autoStart=options.autoStart;}
if(typeof options.preloadCallBack!=='undefined'){this.preloadCallBack=options.preloadCallBack;}};this.showPage=function(newNumber){if(this.preloadCallBack){var startPage=Math.min(newNumber,this.sp_selectedNumber);var endPage=Math.max(newNumber,this.sp_selectedNumber);var page;for(page=startPage;page<=endPage;page++){if((page!==-1)&&!this.sp_preloadedImagesIndex[page]){this.sp_preloadedImagesIndex[page]=false;}}
for(page=startPage;page<=endPage;page++){this.preloadCallBack(page,function(scope,preloadPage,newNumber){return function(){checkPreloadedImages.call(scope,preloadPage,newNumber);};}(this,page,newNumber));}}else{showPageInside.call(this,newNumber);}};var checkPreloadedImages=function(preloadedImageNumber,newNumber){this.sp_preloadedImagesIndex[preloadedImageNumber]=true;this.sp_pageElements[preloadedImageNumber].style.display='';var allPreloaded=true;for(var pageNumber in this.sp_preloadedImagesIndex){if(!this.sp_preloadedImagesIndex[pageNumber]){allPreloaded=false;break;}}
if(allPreloaded){showPageInside.call(this,newNumber);}};var showPageInside=function(newNumber){if(newNumber!=this.sp_selectedNumber&&this.sp_pageElements[newNumber]){var newPage=this.sp_pageElements[newNumber];var endScrollLeft=newPage.offsetLeft;TweenLite.to(this.sp_componentElement,this.sp_effectDuration,{'scrollLeft':endScrollLeft});this.sp_selectedNumber=newNumber;if(typeof this.sp_onPageChangeCallback=='function'){this.sp_onPageChangeCallback(this.sp_selectedNumber);}}};this.startPagesRotation=function(){var scope=this;this.sp_interval=window.setInterval(function(){return scope.showNextPage.call(scope);},this.sp_rotateDelay);};this.stopPagesRotation=function(){window.clearInterval(this.sp_interval);};this.showNextPage=function(){var newNumber=this.sp_selectedNumber+1;if(newNumber===this.sp_pageElements.length){newNumber=0;}
this.showPage(newNumber);};this.showPreviousPage=function(){var newNumber=this.sp_selectedNumber-1;if(newNumber<0){newNumber=this.sp_pageElements.length-1;}
this.showPage(newNumber);};var onWindowResize=function(){TweenLite.killTweensOf(this.sp_componentElement);if(this.sp_pageElements[this.sp_selectedNumber]){this.sp_componentElement.scrollLeft=this.sp_pageElements[this.sp_selectedNumber].offsetLeft;}};this.spInit=function(options){this.scrollPagesInit(options);};this.spStopRotation=function(){this.stopPagesRotation();};this.spStartRotation=function(){this.startPagesRotation();};return this;};;window.CarouselPagesMixin=function(){this.cpm_rotateInterval=null;this.cpm_rotateDelay=1000;this.cpm_componentElement=null;this.cpm_originalPageElements=null;this.cpm_containerElement=null;this.cpm_leftElement=null;this.cpm_rightElement=null;this.cpm_contentElement=null;this.cpm_centerElement=null;this.cpm_onScrollFinishCallback=null;this.cpm_leftPageElements=null;this.cpm_rightPageElements=null;this.cpm_rotateSpeed=1.5;this.cpm_currentNumber=null;this.cpm_imageAspectRatio=1;this.cpm_autoStart=true;this.cpm_touchX=false;this.cpm_touchY=false;this.cpm_touchStartX=false;this.cpm_touchStartY=false;this.cpm_preloadCallBack=false;this.cpm_touchStartCallBack=false;this.cpm_touchDisplayNextImageCallback=false;this.cpm_touchDisplayPreviousImageCallback=false;this.cpm_touchImageClick=false;this.cpm_preloadedImagesIndex={};this.initCarouselGallery=function(options){var scope=this;this.cpm_touchStartCaller=this.cpm_touchStart.bind(scope);this.cpm_touchEndCaller=this.cpm_touchEnd.bind(scope);this.cpm_touchMoveCaller=this.cpm_touchMove.bind(scope);this.cpm_parseOptions(options);if(this.cpm_touchImageClick){this.cpm_touchImageClickCaller=this.cpm_touchImageClick.bind(scope);}
if(this.cpm_componentElement){if(this.cpm_originalPageElements.length>0){if(!this.cpm_containerElement){this.cpm_containerElement=this.cpm_componentElement;}
this.cpm_containerElement.style.overflow='hidden';if(!this.cpm_contentElement){this.cpm_contentElement=document.createElement('div');this.cpm_containerElement.appendChild(this.cpm_contentElement);}
this.cpm_contentElement.style.whiteSpace='nowrap';this.cpm_leftElement=document.createElement('div');this.cpm_leftElement.style.display='inline-block';this.cpm_leftElement.style.verticalAlign='middle';this.cpm_contentElement.appendChild(this.cpm_leftElement);this.cpm_centerElement=document.createElement('div');this.cpm_centerElement.style.display='inline-block';this.cpm_centerElement.style.verticalAlign='middle';this.cpm_contentElement.appendChild(this.cpm_centerElement);this.cpm_rightElement=document.createElement('div');this.cpm_rightElement.style.display='inline-block';this.cpm_rightElement.style.verticalAlign='middle';this.cpm_contentElement.appendChild(this.cpm_rightElement);for(var i=0;i<this.cpm_originalPageElements.length;i++){this.cpm_centerElement.appendChild(this.cpm_originalPageElements[i]);this.cpm_originalPageElements[i].style.display='inline-block';}
this.cpm_updateLeftContents();this.cpm_updateRightContents();this.cpm_scrollToCurrent();if(this.cpm_autoStart){this.cpm_rotateInterval=window.setInterval(function(){return scope.cpm_performAutoRotate.call(scope);},this.cpm_rotateDelay);}
eventsManager.addHandler(window,'resize',function(event){return scope.cpm_scrollToCurrent.call(scope,event);});if(this.cpm_originalPageElements.length>1){touchManager.setTouchAction(this.cpm_componentElement,'pan-y');touchManager.addEventListener(this.cpm_componentElement,'start',this.cpm_touchStartCaller);}else if(this.cpm_originalPageElements.length==1&&typeof this.cpm_touchImageClickCaller!='undefined'){eventsManager.addHandler(this.cpm_componentElement,'click',this.cpm_touchImageClickCaller);}}}};this.cpm_scrollToCurrent=function(){if(this.cpm_currentNumber!==null){this.cpm_containerElement.scrollLeft=this.cpm_originalPageElements[this.cpm_currentNumber].offsetLeft-this.cpm_containerElement.offsetWidth / 2+this.cpm_originalPageElements[this.cpm_currentNumber].offsetWidth / 2;}else{this.cpm_containerElement.scrollLeft=this.cpm_originalPageElements[0].offsetLeft-this.cpm_containerElement.offsetWidth / 2+this.cpm_originalPageElements[0].offsetWidth / 2;}};this.cpm_updateLeftContents=function(){var i;if(this.cpm_leftPageElements){for(i=0;i<this.cpm_leftPageElements.length;i++){this.cpm_leftElement.appendChild(this.cpm_leftPageElements[i]);this.cpm_leftPageElements[i].style.display='inline-block';}}else{for(i=0;i<this.cpm_centerElement.childNodes.length;i++){this.cpm_leftElement.appendChild(this.cpm_centerElement.childNodes[i].cloneNode(true));this.cpm_leftPageElements[i].style.display='inline-block';}}};this.cpm_updateRightContents=function(){var i;if(this.cpm_rightPageElements){for(i=0;i<this.cpm_rightPageElements.length;i++){this.cpm_rightElement.appendChild(this.cpm_rightPageElements[i]);this.cpm_rightPageElements[i].style.display='inline-block';}}else{for(i=0;i<this.cpm_centerElement.childNodes.length;i++){this.cpm_rightElement.appendChild(this.cpm_centerElement.childNodes[i].cloneNode(true));this.cpm_rightPageElements[i].style.display='inline-block';}}};this.showPreviousPage=function(speedCoefficient){var number=this.cpm_currentNumber-1;if(number<0){number=this.cpm_originalPageElements.length-1;}
this.showPage(number,'left',speedCoefficient);};this.showNextPage=function(speedCoefficient){var number=this.cpm_currentNumber+1;if(number>=this.cpm_originalPageElements.length){number=0;}
this.showPage(number,'right',speedCoefficient);};this.showPage=function(newNumber,direction,speedCoefficient){if(this.cpm_preloadCallBack){var pageWidth=this.cpm_imageAspectRatio*this.cpm_containerElement.offsetHeight;var pagesAroundSide=Math.ceil((this.cpm_containerElement.offsetWidth / 2-pageWidth / 2)/ pageWidth);if(!pagesAroundSide){pagesAroundSide=1;}
var page;var setPage;var pagesToCheck={};for(page=newNumber;newNumber-page<=pagesAroundSide;page--){if(page<0){setPage=this.cpm_originalPageElements.length+page;}else{setPage=page;}
if(!this.cpm_preloadedImagesIndex[setPage]){this.cpm_preloadedImagesIndex[setPage]=false;}
pagesToCheck[setPage]=true;}
for(page=newNumber;page<=newNumber+pagesAroundSide;page++){if(page>=this.cpm_originalPageElements.length){setPage=page-this.cpm_originalPageElements.length;}else{setPage=page;}
if(!this.cpm_preloadedImagesIndex[setPage]){this.cpm_preloadedImagesIndex[setPage]=false;}
pagesToCheck[setPage]=true;}
if(this.cpm_currentNumber){var startPage=Math.min(newNumber,this.cpm_currentNumber);var endPage=Math.max(newNumber,this.cpm_currentNumber);for(page=startPage;page<=endPage;page++){if(!this.cpm_preloadedImagesIndex[page]){this.cpm_preloadedImagesIndex[page]=false;}
pagesToCheck[page]=true;}}else{if(!this.cpm_preloadedImagesIndex[page]){this.cpm_preloadedImagesIndex[newNumber]=false;}
pagesToCheck[newNumber]=true;}
for(page in pagesToCheck){if(typeof this.cpm_originalPageElements[page]!=='undefined'){this.cpm_preloadCallBack(page,function(scope,preloadPage,newNumber,direction,speedCoefficient){return function(){scope.cpm_checkPreloadedImages.call(scope,preloadPage,newNumber,direction,speedCoefficient);};}(this,page,newNumber,direction,speedCoefficient));}}}else{this.cpm_showPageInside(newNumber,direction,speedCoefficient);}};this.cpm_checkPreloadedImages=function(preloadedImageNumber,newNumber,direction,speedCoefficient){this.cpm_preloadedImagesIndex[preloadedImageNumber]=true;this.cpm_leftPageElements[preloadedImageNumber].style.display='inline-block';this.cpm_originalPageElements[preloadedImageNumber].style.display='inline-block';this.cpm_rightPageElements[preloadedImageNumber].style.display='inline-block';var allPreloaded=true;for(var pageNumber in this.cpm_preloadedImagesIndex){if(!this.cpm_preloadedImagesIndex[pageNumber]){allPreloaded=false;break;}}
if(allPreloaded){this.cpm_showPageInside.call(this,newNumber,direction,speedCoefficient);}};this.cpm_showPageInside=function(newNumber,direction,speedCoefficient){if(newNumber!==this.cpm_currentNumber&&this.cpm_originalPageElements[newNumber]){var oldNumber=this.cpm_currentNumber;this.cpm_currentNumber=newNumber;var endScrollLeft;this.imageWidth=this.cpm_originalPageElements[newNumber].offsetWidth;var leftOverFlowWidth=(this.cpm_containerElement.offsetWidth-this.imageWidth)/ 2;if(oldNumber==null){oldNumber=0;}
if(direction=='left'){endScrollLeft=this.cpm_originalPageElements[oldNumber].offsetLeft-this.imageWidth-leftOverFlowWidth;}else if(direction=='right'){endScrollLeft=this.cpm_originalPageElements[oldNumber].offsetLeft+this.imageWidth-leftOverFlowWidth;}else{var pageElementLeft=this.cpm_originalPageElements[newNumber].offsetLeft-this.cpm_containerElement.offsetWidth / 2+this.cpm_originalPageElements[newNumber].offsetWidth / 2;if(Math.abs(newNumber-oldNumber)>=Math.abs(newNumber-this.cpm_originalPageElements.length-oldNumber)){endScrollLeft=pageElementLeft-this.cpm_centerElement.offsetWidth;}else if(Math.abs(newNumber-oldNumber)>=Math.abs(newNumber+this.cpm_originalPageElements.length-oldNumber)){endScrollLeft=pageElementLeft+this.cpm_centerElement.offsetWidth;}else{endScrollLeft=pageElementLeft;}}
var scope=this;if(typeof speedCoefficient=='undefined'){speedCoefficient=1;}
var ease=Quad.easeInOut;if(speedCoefficient<0.7){ease=Linear.easeIn;}
TweenLite.to(this.cpm_containerElement,speedCoefficient*this.cpm_rotateSpeed,{'scrollLeft':endScrollLeft,'onComplete':function(){return scope.cpm_finishPageChange.call(scope);},'ease':ease,});if(this.cpm_onScrollFinishCallback){this.cpm_onScrollFinishCallback(this.cpm_originalPageElements[oldNumber],this.cpm_originalPageElements[newNumber]);}}};this.cpm_finishPageChange=function(){this.cpm_scrollToCurrent();};this.stopRotation=function(){window.clearInterval(this.cpm_rotateInterval);};this.cpm_performAutoRotate=function(){this.showNextPage();};this.cpm_touchStart=function(event,touchInfo){this.cpm_touchStartX=touchInfo.clientX;this.cpm_touchStartY=touchInfo.clientY;this.cpm_touchX=this.cpm_touchStartX;this.cpm_touchY=this.cpm_touchStartY;this.cpm_touchStartCallBack();touchManager.removeEventListener(this.cpm_componentElement,'start',this.cpm_touchStartCaller);touchManager.addEventListener(this.cpm_componentElement,'end',this.cpm_touchEndCaller);touchManager.addEventListener(this.cpm_componentElement,'cancel',this.cpm_touchEndCaller);touchManager.addEventListener(this.cpm_componentElement,'move',this.cpm_touchMoveCaller);};this.cpm_touchMove=function(event,touchInfo){var difference=this.cpm_touchX-touchInfo.clientX;this.cpm_touchX=touchInfo.clientX;this.cpm_touchY=touchInfo.clientY;if(Math.abs(this.cpm_touchStartX-this.cpm_touchX)>Math.abs(this.cpm_touchStartY-this.cpm_touchY)){eventsManager.preventDefaultAction(event);this.cpm_componentElement.scrollBy(difference,0);}};this.cpm_touchEnd=function(event,touchInfo){var limit=5;var xOffset=Math.abs(this.cpm_touchStartX-this.cpm_touchX);var yOffset=Math.abs(this.cpm_touchStartY-this.cpm_touchY);if((xOffset>limit)||(yOffset>limit)){eventsManager.preventDefaultAction(event);if(xOffset>yOffset){var difference=this.cpm_touchStartX-this.cpm_touchX;var speedCoefficient=1-(Math.abs(difference)/ this.imageWidth);if(difference>0){this.showNextPage(speedCoefficient);this.cpm_touchDisplayNextImageCallback();}else{this.showPreviousPage(speedCoefficient);this.cpm_touchDisplayPreviousImageCallback();}}}else{this.cpm_touchImageClick();}
touchManager.removeEventListener(this.cpm_componentElement,'end',this.cpm_touchEndCaller);touchManager.removeEventListener(this.cpm_componentElement,'cancel',this.cpm_touchEndCaller);touchManager.removeEventListener(this.cpm_componentElement,'move',this.cpm_touchMoveCaller);touchManager.addEventListener(this.cpm_componentElement,'start',this.cpm_touchStartCaller);};this.cpm_parseOptions=function(options){if(typeof options.componentElement!=='undefined'){this.cpm_componentElement=options.componentElement;}
if(typeof options.containerElement!=='undefined'){this.cpm_containerElement=options.containerElement;}
if(typeof options.contentElement!=='undefined'){this.cpm_contentElement=options.contentElement;}
if(typeof options.pageElements!=='undefined'){this.cpm_originalPageElements=options.pageElements;}
if(typeof options.sp_rotateDelay!=='undefined'){this.cpm_rotateDelay=options.sp_rotateDelay;}
if(typeof options.sp_rotateDelay!=='undefined'){this.cpm_rotateSpeed=options.rotateSpeed;}
if(typeof options.onScrollFinishCallback!=='undefined'){this.cpm_onScrollFinishCallback=options.onScrollFinishCallback;}
if(typeof options.leftPageElements!=='undefined'){this.cpm_leftPageElements=options.leftPageElements;}
if(typeof options.rightPageElements!=='undefined'){this.cpm_rightPageElements=options.rightPageElements;}
if(typeof options.autoStart!=='undefined'){this.cpm_autoStart=options.autoStart;}
if(typeof options.preloadCallBack!=='undefined'){this.cpm_preloadCallBack=options.preloadCallBack;}
if(typeof options.touchStartCallBack!=='undefined'){this.cpm_touchStartCallBack=options.touchStartCallBack;}
if(typeof options.touchDisplayNextImageCallback!=='undefined'){this.cpm_touchDisplayNextImageCallback=options.touchDisplayNextImageCallback;}
if(typeof options.touchDisplayPreviousImageCallback!=='undefined'){this.cpm_touchDisplayPreviousImageCallback=options.touchDisplayPreviousImageCallback;}
if(typeof options.touchImageClick!=='undefined'){this.cpm_touchImageClick=options.touchImageClick;}
if(typeof options.imageAspectRatio!=='undefined'){this.cpm_imageAspectRatio=options.imageAspectRatio;}};return this;};;window.SlideOverlayMixin=function(){this.so_overlayElement=null;this.so_acceleration=0.6;this.so_overlayParentElement=null;this.so_visibleOffset=0;this.so_enableMouseover=true;this.initSlideOverlay=function(options){this.parseOptions(options);this.so_overlayElement.style.right='0';this.so_overlayElement.style.left='0';this.so_overlayElement.style.top='100%';this.so_overlayElement.style.bottom='0';this.so_overlayElement.style.display='block';this.so_overlayElement.style.position='absolute';this.so_overlayElement.style.overflow='visible';var scope=this;if(this.so_enableMouseover){this.so_overlayParentElement.addEventListener('mouseenter',function(event){return scope.showOverlay.call(scope,event);});this.so_overlayParentElement.addEventListener('mouseleave',function(event){return scope.hideOverlay.call(scope,event);});}};this.showOverlay=function(){TweenLite.to(this.so_overlayElement,this.so_acceleration,{'css':{'top':this.so_visibleOffset}});};this.hideOverlay=function(){TweenLite.to(this.so_overlayElement,this.so_acceleration,{'css':{'top':'100%'}});};this.parseOptions=function(options){if(typeof options.overlayElement!='undefined'){this.so_overlayElement=options.overlayElement;}
if(typeof options.so_overlayParentElement!='undefined'){this.so_overlayParentElement=options.overlayParentElement;}else{this.so_overlayParentElement=this.so_overlayElement.parentNode;}
if(typeof options.acceleration!='undefined'){this.so_acceleration=options.acceleration;}
if(typeof options.visibleOffset!='undefined'){this.so_visibleOffset=options.visibleOffset;}
if(typeof options.enableMouseover!='undefined'){this.so_enableMouseover=options.enableMouseover;}};return this;};;window.SmoothScrollToComponent=function(componentElement){var toElement;var addEvent=function(){eventsManager.addHandler(componentElement,'click',clickHandler);};var clickHandler=function(event){eventsManager.preventDefaultAction(event);TweenLite.to(window,1,{scrollTo:{y:toElement.offsetTop,autoKill:false},ease:Power2.easeOut});};var init=function(){if(componentElement.dataset.scrollTo){toElement=document.querySelector(componentElement.dataset.scrollTo);if(toElement){addEvent();}}};init();};;window.InputComponent=function(parameters){this.componentElement=false;this.inputElement=false;var self=this;var name;var value;var inputClass;var placeHolderSupport=false;var placeHolderText='';var originalType='';var init=function(){if(typeof parameters!=='undefined'){parseParameters(parameters);}
createDomStructure();eventsManager.addHandler(self.inputElement,'focus',focusHandler);eventsManager.addHandler(self.inputElement,'blur',blurHandler);placeHolderSupport=inputLogics.getPlaceHolderSupport();if(!placeHolderSupport){if(placeHolderText=self.inputElement.getAttribute('placeholder')){originalType=self.inputElement.getAttribute('type');restorePlaceHolder();}}};var createDomStructure=function(){if(!self.inputElement){self.inputElement=document.createElement('input');self.inputElement.setAttribute('type','text');self.inputElement.setAttribute('autocomplete','off');var className='input_component';if(inputClass){className+=' '+inputClass;}
self.inputElement.className=className;if(name){self.inputElement.setAttribute('name',name);}
if(value){self.inputElement.setAttribute('value',value);}}
self.componentElement=self.inputElement;};var parseParameters=function(parameters){if(typeof parameters.name!=='undefined'){name=parameters.name;}
if(typeof parameters.componentElement!=='undefined'){self.inputElement=parameters.componentElement;}
if(typeof parameters.value!=='undefined'){value=parameters.value;}
if(typeof parameters.inputClass!=='undefined'){inputClass=parameters.inputClass;}};this.getValue=function(){return self.inputElement.value;};this.setValue=function(value){self.inputElement.value=value;};this.setDisabled=function(value){self.inputElement.disabled=value;};this.setHandler=function(eventType,handler){window.eventsManager.addHandler(self.inputElement,eventType,handler);};var focusHandler=function(){domHelper.removeClass(self.inputElement,'input_error');if(!placeHolderSupport&&originalType=='text'){if(self.inputElement.value==placeHolderText){self.inputElement.value='';domHelper.addClass(self.inputElement,'placeholder');}}};var blurHandler=function(){restorePlaceHolder();};var restorePlaceHolder=function(){if(self.inputElement.value==''&&originalType=='text'){self.inputElement.value=placeHolderText;domHelper.removeClass(self.inputElement,'placeholder');}};init();};;window.ToggleableContainer=function(componentElement,options){var self=this;this.componentElement=componentElement;var afterOpenCallback;var visible=false;var contentElement,markerElement;var init=function(){self.parseOptions.call(self,options);new ToggleableContainerTriggerComponent(self);if(contentElement.className.indexOf('toggleable_component_content_hidden')>=0){contentElement.style.height=0;if(markerElement){markerElement.className=markerElement.className.replace('toggleable_component_marker','toggleable_component_marker_shrinked');}}else{visible=true;}};this.parseOptions=function(options){if(typeof options==='undefined'){contentElement=componentElement.querySelector('.toggleable_component_content');markerElement=componentElement.querySelector('.toggleable_component_marker');}else{if(typeof options.contentElement==='undefined'){contentElement=componentElement.querySelector('.toggleable_component_content',componentElement);}else{contentElement=options.contentElement;}
if(typeof options.markerElement==='undefined'){markerElement=componentElement.querySelector('.toggleable_component_marker',componentElement);}else{markerElement=options.markerElement;}
if(typeof options.defaultBehaviour!=='undefined'){if(options.defaultBehaviour=='shown'&&typeof options.afterOpenCallback!=='undefined'){options.afterOpenCallback.call();}}
if(typeof options.afterOpenCallback!=='undefined'){afterOpenCallback=options.afterOpenCallback;}}};this.toggle=function(){if(!visible){this.show();}else{this.hide();}};this.hide=function(){visible=false;TweenLite.to(contentElement,0.5,{'css':{'height':0,'opacity':0},'onComplete':finishHide});};var finishHide=function(){domHelper.addClass(componentElement,'toggleable_component_collapsed');domHelper.addClass(contentElement,'toggleable_component_content_hidden');};this.show=function(){visible=true;domHelper.removeClass(componentElement,'toggleable_component_collapsed');domHelper.removeClass(contentElement,'toggleable_component_content_hidden');TweenLite.to(contentElement,0.5,{'css':{'height':contentElement.scrollHeight,'opacity':1}});if(afterOpenCallback){afterOpenCallback.call();}};init();};window.ToggleableContainerTriggerComponent=function(parentElement){var self=this;this.componentElement=null;var init=function(){self.componentElement=parentElement.componentElement.querySelector('.toggleable_component_trigger');eventsManager.addHandler(self.componentElement,'click',clickHandler);};var clickHandler=function(){parentElement.toggle();};init();};;window.GalleryComponent=function(componentElement,galleryInfo,type){var self=this;var selectorComponent;var imagesComponent;var descriptionComponent;var buttonsContainerElement;var prevButtonContainerElement;var nextButtonContainerElement;var playBackButton;var fullScreenButton;var buttonPrevious;var buttonNext;var preloadedStructureElement;var imageButtons=[];this.init=function(){if(imagesComponent){imagesComponent.startApplication();}};var construct=function(){domHelper.addClass(componentElement,'gallery_'+type);var imagesList=galleryInfo.getImagesList();if(imagesList){makeDomStructure();mobileBreakpointCallback();self.recalculateSizes();window.addEventListener('resize',self.recalculateSizes);window.addEventListener('orientationchange',self.recalculateSizes);controller.addListener('mobileBreakpointChanged',mobileBreakpointCallback);}};var mobileBreakpointCallback=function(){createButtons();createThumbnailsSelector();};var makeDomStructure=function(){while(componentElement.firstChild){var structureChild=componentElement.firstChild;if((typeof structureChild.className!='undefined')&&(structureChild.className.indexOf('gallery_structure')>=0)){preloadedStructureElement=structureChild;}
componentElement.removeChild(componentElement.firstChild);}
if(preloadedStructureElement){componentElement.appendChild(preloadedStructureElement);}
if(type=='scroll'){imagesComponent=new GalleryImagesScrollComponent(galleryInfo,self);}else if(type=='slide'){imagesComponent=new GalleryImagesSlideComponent(galleryInfo,self);}else if(type=='carousel'){imagesComponent=new GalleryImagesCarouselComponent(galleryInfo,self);}
if(preloadedStructureElement){var gallery_images_container=create('gallery_images_container');gallery_images_container.appendChild(imagesComponent.getComponentElement());}else{componentElement.appendChild(imagesComponent.getComponentElement());}
createButtons();var imagesInfosList=galleryInfo.getImagesList();if(galleryInfo.getDescriptionType()==='static'){descriptionComponent=new GalleryDescriptionComponent(galleryInfo);if(preloadedStructureElement){var gallery_description_container=create('gallery_description_container');gallery_description_container.appendChild(descriptionComponent.getComponentElement());}else{componentElement.appendChild(descriptionComponent.getComponentElement());}
descriptionComponent.setDescription(imagesInfosList[0]);}
createThumbnailsSelector();};var createThumbnailsSelector=function(){if(galleryInfo.isThumbnailsSelectorEnabled(window.mobileLogics.isPhoneActive())){if(!selectorComponent){if(typeof GallerySelectorComponent!=='undefined'){selectorComponent=new GallerySelectorComponent(galleryInfo,imagesComponent);componentElement.appendChild(selectorComponent.getComponentElement());}}}else if(selectorComponent){var element=selectorComponent.getComponentElement();if(element){componentElement.removeChild(element);}
selectorComponent=null;}};var createButtons=function(){var imagesInfosList=galleryInfo.getImagesList();var imageNumber=0;var imagesPrevNextButtonsEnabled=galleryInfo.areImagesPrevNextButtonsEnabled(window.mobileLogics.isPhoneActive());var imagesPrevNextButtonsSeparated=galleryInfo.areImagesPrevNextButtonsSeparated();var imagesButtonsEnabled=galleryInfo.areImagesButtonsEnabled(window.mobileLogics.isPhoneActive());var playbackButtonEnabled=galleryInfo.isPlaybackButtonEnabled();var fullScreenButtonEnabled=galleryInfo.isFullScreenButtonEnabled();var button;if(playbackButtonEnabled||imagesButtonsEnabled||imagesPrevNextButtonsEnabled||fullScreenButtonEnabled){if(!buttonsContainerElement){buttonsContainerElement=create('gallery_buttons');}
if(imagesPrevNextButtonsEnabled){if(!buttonPrevious){if(imagesPrevNextButtonsSeparated){if(!prevButtonContainerElement){prevButtonContainerElement=create('gallery_button_previous_container');}
buttonPrevious=new GalleryPreviousButtonComponent(galleryInfo);prevButtonContainerElement.appendChild(buttonPrevious.getComponentElement());}else{buttonPrevious=new GalleryPreviousButtonComponent(galleryInfo);buttonsContainerElement.appendChild(buttonPrevious.getComponentElement());}}}else if(buttonPrevious){if(prevButtonContainerElement){componentElement.removeChild(prevButtonContainerElement);}
buttonPrevious.destroy();buttonPrevious=null;}
if(imagesButtonsEnabled){if(imageButtons.length===0){for(var i=0;i<=imagesInfosList.length;i++){if(imagesInfosList[i]){button=new GalleryButtonComponent(imagesInfosList[i],galleryInfo);buttonsContainerElement.appendChild(button.getComponentElement());imageNumber++;imageButtons.push(button);}}}}else if(imageButtons){destroyImageButtons();}
if(imagesPrevNextButtonsEnabled){if(!buttonNext){if(imagesPrevNextButtonsSeparated){if(!nextButtonContainerElement){nextButtonContainerElement=create('gallery_button_next_container');}
buttonNext=new GalleryNextButtonComponent(galleryInfo);nextButtonContainerElement.appendChild(buttonNext.getComponentElement());}else{buttonNext=new GalleryNextButtonComponent(galleryInfo);buttonsContainerElement.appendChild(buttonNext.getComponentElement());}}}else if(buttonNext){if(nextButtonContainerElement){componentElement.removeChild(nextButtonContainerElement);}
buttonNext.destroy();buttonNext=null;}
if(!playBackButton&&playbackButtonEnabled){playBackButton=new GalleryPlaybackButtonComponent(galleryInfo);buttonsContainerElement.appendChild(playBackButton.getComponentElement());imageButtons.push(playBackButton);}
if(!fullScreenButton&&fullScreenButtonEnabled){fullScreenButton=new GalleryFullScreenButtonComponent(galleryInfo,imagesComponent);buttonsContainerElement.appendChild(fullScreenButton.getComponentElement());imageButtons.push(fullScreenButton);}}else if(buttonsContainerElement){if(buttonsContainerElement.parentNode){buttonsContainerElement.parentNode.removeChild(buttonsContainerElement);}
buttonsContainerElement=null;destroyImageButtons();if(buttonPrevious){buttonPrevious.destroy();buttonPrevious=null;}
if(buttonNext){buttonNext.destroy();buttonNext=null;}}};var destroyImageButtons=function(){for(var i=0;i<imageButtons.length;i++){imageButtons[i].destroy();}
imageButtons=[];};var create=function(className){var newElement=document.createElement('div');newElement.className=className;if(preloadedStructureElement){var definedElement=findChild(preloadedStructureElement,className);if(definedElement){newElement=definedElement;}else{preloadedStructureElement.appendChild(newElement);}}else{componentElement.appendChild(newElement);}
return newElement;};var findChild=function(element,className){for(var i=0;i<element.childNodes.length;i++){var child=element.childNodes[i];if((typeof child.className!=='undefined')&&(child.className.indexOf(className)>=0)){return child;}
var result;if(result=findChild(child,className)){return result;}}
return false;};this.destroy=function(){eventsManager.removeHandler(window,'resize',self.recalculateSizes);controller.removeListener('startApplication',imagesComponent.startApplication);if(imagesComponent){imagesComponent.destroy();imagesComponent=null;}
if(buttonPrevious){buttonPrevious.destroy();buttonPrevious=null;}
if(buttonNext){buttonNext.destroy();buttonNext=null;}
if(descriptionComponent){descriptionComponent.destroy();descriptionComponent=null;}
destroyImageButtons();};this.getImagesComponent=function(){return imagesComponent;};this.getDescriptionComponent=function(){return descriptionComponent;};this.getButtonsContainer=function(){return buttonsContainerElement;};this.getSelectorComponent=function(){return selectorComponent;};this.recalculateSizes=function(){var imagesComponentHeight;var computedStyle;if(typeof window.getComputedStyle!=='undefined'){computedStyle=window.getComputedStyle(componentElement);}else{computedStyle=componentElement.currentStyle;}
var galleryWidth=componentElement.offsetWidth-parseFloat(computedStyle.paddingLeft)-parseFloat(computedStyle.paddingRight);var galleryHeight;var galleryHeightSetting=galleryInfo.getGalleryHeight(window.mobileLogics.isPhoneActive());var galleryResizeType=galleryInfo.getGalleryResizeType(window.mobileLogics.isPhoneActive());if(galleryResizeType==='imagesHeight'){imagesComponentHeight=galleryHeightSetting;}else if(galleryResizeType==='aspected'){imagesComponentHeight=galleryWidth*galleryHeightSetting;}else if(galleryResizeType==='viewport'){var viewPortHeight=window.innerHeight?window.innerHeight:document.documentElement.offsetHeight;galleryHeight=galleryHeightSetting;if(galleryHeight&&(typeof galleryHeight==='string')&&galleryHeight.indexOf('%')>-1){galleryHeight=viewPortHeight*parseFloat(galleryHeight)/ 100;}else{galleryHeight=viewPortHeight*galleryHeight;}}else{galleryHeight=galleryHeightSetting;if(!galleryHeight){galleryHeight=componentElement.offsetHeight-parseFloat(computedStyle.paddingTop)-parseFloat(computedStyle.paddingBottom);}}
if(galleryHeight){if(selectorComponent){var selectorHeight=galleryInfo.getThumbnailsSelectorHeight();if(selectorHeight){if(selectorHeight.indexOf('%')>-1){selectorHeight=galleryHeight*parseFloat(selectorHeight)/ 100;}
selectorComponent.setSizes(galleryWidth,selectorHeight);}
imagesComponentHeight=galleryHeight-selectorComponent.getGalleryHeight();}else{imagesComponentHeight=galleryHeight;}}
imagesComponent.setSizes(galleryWidth,imagesComponentHeight);};this.getButtonNextComponent=function(){return buttonNext;};this.getButtonPreviousComponent=function(){return buttonPrevious;};construct();};;window.GalleryImageComponent=function(imageInfo,parentObject,galleryInfo){var self=this;this.title=null;this.link=null;this.preloaded=false;var mediaOriginalWidth;var mediaOriginalHeight;var galleryWidth;var galleryHeight;var componentElement;var mediaElement;var sourceElement;var infoElement;var clickable=false;var videoLoadStarted=false;var autoStart=false;var init=function(){createDomStructure();clickable=(parentObject.hasFullScreenGallery()||imageInfo.getExternalLink()||imageInfo.isVideo());if(clickable){componentElement.className+=' gallery_image_clickable';eventsManager.addHandler(componentElement,eventsManager.getPointerStartEventName(),touchStart);}
if(typeof parentObject.videoAutoStart!='undefined'){if(parentObject.videoAutoStart()){autoStart=true;}}
controller.addListener('galleryImageDisplay',displayHandler);controller.addListener('mobileBreakpointChanged',mobileBreakpointCallback);};var mobileBreakpointCallback=function(){createMediaElement();self.preloaded=false;self.checkPreloadImage(function(){componentElement.style.display='';});};var touchStart=function(event){if(typeof event.which==='undefined'||event.which!==3){eventsManager.removeHandler(componentElement,eventsManager.getPointerStartEventName(),touchStart);eventsManager.addHandler(componentElement,eventsManager.getPointerEndEventName(),touchEnd);eventsManager.addHandler(componentElement,eventsManager.getPointerMoveEventName(),touchMove);}};var touchMove=function(event){resetTouchiness();};var touchEnd=function(event){resetTouchiness();if(imageInfo.getExternalLink()){imageInfo.openExternalLink();}else{parentObject.displayFullScreenGallery();}};var resetTouchiness=function(){eventsManager.removeHandler(componentElement,eventsManager.getPointerEndEventName(),touchEnd);eventsManager.removeHandler(componentElement,eventsManager.getPointerMoveEventName(),touchMove);eventsManager.addHandler(componentElement,eventsManager.getPointerStartEventName(),touchStart);};this.destroy=function(){eventsManager.removeHandler(componentElement,eventsManager.getPointerStartEventName(),touchStart);eventsManager.removeHandler(componentElement,eventsManager.getPointerEndEventName(),touchEnd);eventsManager.removeHandler(componentElement,eventsManager.getPointerMoveEventName(),touchMove);};var createDomStructure=function(){componentElement=document.createElement('div');componentElement.className='gallery_image';componentElement.style.display='none';createMediaElement();var description=imageInfo.getDescription();var title=imageInfo.getTitle();if(galleryInfo.getDescriptionType()==='overlay'&&(description||title)){infoElement=self.makeElement('div','gallery_image_info gallery_description html_content',componentElement);if(title){var titleElement=self.makeElement('div','gallery_image_title gallery_description_title',infoElement);titleElement.innerHTML=title;}
if(description){var descriptionElement=self.makeElement('div','gallery_image_description gallery_descripion_description',infoElement);descriptionElement.innerHTML=description;}
if(galleryInfo.getDescriptionEffect()==='none'){showInfo();}}};var createMediaElement=function(){if(mediaElement){componentElement.removeChild(mediaElement);}
if(imageInfo.isVideo()){self.checkPreloadImage=checkPreloadVideo;mediaElement=document.createElement('video');mediaElement.loop=true;mediaElement.muted=true;mediaElement.setAttribute('webkit-playsinline','webkit-playsinline');mediaElement.setAttribute('playsinline','playsinline');mediaElement.style.visibility='hidden';componentElement.appendChild(mediaElement);sourceElement=document.createElement('source');sourceElement.type='video/mp4';sourceElement.src=imageInfo.getFileUrl();mediaElement.appendChild(sourceElement);}else{self.checkPreloadImage=checkPreloadImage;mediaElement=document.createElement('img');mediaElement.style.visibility='hidden';componentElement.appendChild(mediaElement);}};var showInfo=function(){domHelper.addClass(infoElement,'gallery_image_info_visible');TweenLite.to(infoElement,0.5,{'css':{'opacity':1}});};var hideInfo=function(){TweenLite.to(infoElement,0.25,{'css':{'opacity':0},'onComplete':function(){domHelper.removeClass(infoElement,'gallery_image_info_visible');},});};this.checkPreloadImage=null;var checkPreloadImage=function(callBack){if(!mediaElement.src){mediaElement.src=imageInfo.getBigImageUrl(window.mobileLogics.isPhoneActive());mediaElement.style.visibility='hidden';componentElement.style.display='';}
if(!mediaElement.complete){window.setTimeout(function(callBack){return function(){self.checkPreloadImage(callBack);};}(callBack),100);}else{if(!self.preloaded){mediaElement.style.visibility='visible';mediaOriginalWidth=mediaElement.offsetWidth;mediaOriginalHeight=mediaElement.offsetHeight;componentElement.style.display='none';self.preloaded=true;resizeImageElement();}
if(callBack){callBack();}}};var checkPreloadVideo=function(callBack){if(mediaElement.readyState<3){if(!videoLoadStarted){videoLoadStarted=true;var promise=mediaElement.load();}
window.setTimeout(function(callBack){return function(){self.checkPreloadImage(callBack);};}(callBack),100);}else{if(!self.preloaded){mediaElement.style.visibility='visible';mediaOriginalWidth=mediaElement.videoWidth;mediaOriginalHeight=mediaElement.videoHeight;componentElement.style.display='none';self.preloaded=true;resizeImageElement();}
if(callBack){callBack();}}};var displayHandler=function(newImage){if(imageInfo.isVideo()){if(newImage.getId()===imageInfo.getId()){checkPreloadVideo(videoPlayCallback);}else{mediaElement.pause();}}
if(galleryInfo.getDescriptionEffect()==='opacity'){if(newImage.getId()===imageInfo.getId()){showInfo();}else{hideInfo();}}};var videoPlayCallback=function(){mediaElement.play();};this.resize=function(imagesContainerWidth,imagesContainerHeight){galleryWidth=imagesContainerWidth;galleryHeight=imagesContainerHeight;resizeImageElement();};var resizeImageElement=function(){if(galleryWidth&&galleryHeight){componentElement.style.width=galleryWidth+'px';componentElement.style.height=galleryHeight+'px';if(mediaOriginalWidth&&mediaOriginalHeight){var imageWidth,imageHeight;var positionTop=0,positionLeft=0;var logic=imageInfo.getImageResizeType(window.mobileLogics.isPhoneActive());var aspectRatio=mediaOriginalWidth / mediaOriginalHeight;if(logic==='fill'){imageHeight=galleryHeight;imageWidth=imageHeight*aspectRatio;if(imageWidth<galleryWidth){imageWidth=galleryWidth;imageHeight=imageWidth / aspectRatio;}
if(imageHeight>galleryHeight){positionTop=(imageHeight-galleryHeight)/-2;}
if(imageWidth>galleryWidth){positionLeft=(imageWidth-galleryWidth)/-2;}}
else if(logic==='contain'){imageHeight=galleryHeight;imageWidth=imageHeight*aspectRatio;if(imageWidth>galleryWidth){imageWidth=galleryWidth;imageHeight=imageWidth / aspectRatio;}
if(imageHeight>galleryHeight){positionTop=(imageHeight-galleryHeight)/-2;}
if(imageWidth>galleryWidth){positionLeft=(imageWidth-galleryWidth)/-2;}}else{imageWidth=mediaOriginalWidth;imageHeight=mediaOriginalHeight;if(imageWidth>galleryWidth){imageWidth=galleryWidth;imageHeight=imageWidth / aspectRatio;}
if(imageHeight>galleryHeight){imageHeight=galleryHeight;imageWidth=imageHeight*aspectRatio;}
positionTop=(galleryHeight-imageHeight)/ 2;positionLeft=(galleryWidth-imageWidth)/ 2;}
if(mediaElement&&self.preloaded){mediaElement.style.width=imageWidth+'px';mediaElement.style.height=imageHeight?imageHeight+'px':'';mediaElement.style.left=positionLeft+'px';mediaElement.style.top=positionTop+'px';}}}};this.getComponentElement=function(){return componentElement;};this.getImageElement=function(){return mediaElement;};this.getId=function(){return imageInfo.getId();};this.activate=function(){imageInfo.display();};this.getImageInfo=function(){return imageInfo;};init();};DomElementMakerMixin.call(GalleryImageComponent.prototype);;window.BubbleComponent=function(referralElement,message,additionalContainerClassName,additionalClassName,bubbleCloseTag,waitDelay){waitDelay=waitDelay?waitDelay:1000;var componentElement=false;var contentElement=false;var contentElementClassName;var headerElement=false;var middleElement=false;var footerElement=false;var positionedX=false;var positionedY=false;var bubbleWidth=false;var bubbleLeft;var bubbleTopStart;var bubbleTopStop;var positionedW;var positionedH;var bubbleTopFinish;var bubbleHeight;var bubbleHeightDigit;var init=function(){componentElement=document.createElement('div');componentElement.className='tip_popup '+additionalContainerClassName;componentElement.style.display='none';contentElement=document.createElement('div');contentElementClassName='tip_popup_content '+additionalClassName;contentElement.className=contentElementClassName;headerElement=document.createElement('div');headerElement.className='notice_header';middleElement=document.createElement('div');middleElement.className='notice_middle';footerElement=document.createElement('div');footerElement.className='notice_footer';if(message&&message['title']){headerElement.innerHTML='<span class="notice_title">'+message['title']+'</span>';contentElement.appendChild(headerElement);}
if(message&&message['content']){middleElement.innerHTML=message['content'];contentElement.appendChild(middleElement);}
if(message&&message['footer']){footerElement.innerHTML=message['footer'];contentElement.appendChild(footerElement);}
componentElement.appendChild(contentElement);document.body.appendChild(componentElement);};this.start=function(){componentElement.style.display='block';const html=document.scrollingElement||document.documentElement;var htmlScroll=html.scrollTop;var parentPositionsX;var parentPositionsY;if(referralElement.dataset.notice){var noticeParentSelector=referralElement.dataset.notice;parentPositionsX=document.querySelector(noticeParentSelector).getBoundingClientRect();}else{parentPositionsX=referralElement.getBoundingClientRect();}
parentPositionsY=referralElement.getBoundingClientRect();positionedX=parentPositionsX.left;positionedW=parentPositionsX.width;positionedY=parentPositionsY.top;positionedH=parentPositionsY.height;var bubbleGetCompStyle=getComputedStyle(componentElement);bubbleHeight=bubbleGetCompStyle.height;bubbleHeightDigit=parseFloat(bubbleHeight);var startY=positionedY+htmlScroll;var marginBottom=20;bubbleLeft=positionedX+'px';bubbleTopStart=startY+'px';bubbleTopStop=Math.ceil(startY-bubbleHeightDigit-marginBottom)+'px';bubbleTopFinish=Math.ceil(startY-positionedH-(bubbleHeightDigit*2)-positionedH)+'px';componentElement.style.top=bubbleTopStart;componentElement.style.left=bubbleLeft;componentElement.style.width=bubbleWidth;componentElement.style.fontSize=0;componentElement.style.lineHeight=0;componentElement.style.height=0;componentElement.style.overflow='hidden';componentElement.style.opacity=0;TweenLite.to(componentElement,0.5,{'css':{'opacity':1,'fontSize':'inherit','lineHeight':'1','height':bubbleHeight,'minHeight':bubbleHeight,'overflow':'visible','left':bubbleLeft,'top':bubbleTopStop},'onComplete':wait});if(bubbleCloseTag){document.querySelector('.'+additionalClassName+' .'+bubbleCloseTag).addEventListener('click',function(ev){ev.preventDefault();componentElement.parentNode.removeChild(componentElement);});}};var wait=function(){window.setTimeout(completeAnimation,waitDelay);};var completeAnimation=function(){TweenLite.to(componentElement,0.5,{'css':{'opacity':0,'left':bubbleLeft,'top':bubbleTopFinish},'onComplete':destroyComponent});};var destroyComponent=function(){if(componentElement){componentElement.parentNode.removeChild(componentElement);}};init();};;window.CookiePolicy=function(){var cookieContainerElement,cookieButtonElement;var init=function(){if(window.settings&&window.settings!=undefined&&window.settings.show_cookie_policy!=undefined&&window.settings.show_cookie_policy=='1'){var cookiePolicyAccepted=Cookies.get('cookiePolicyAccepted');if(!cookiePolicyAccepted){showCookiePolicy();}}};var showCookiePolicy=function(){cookieContainerElement=document.createElement('div');domHelper.addClass(cookieContainerElement,'cookie_policy_component');if(window.translationsLogics.get('cookiepolicy.intro')!=''){var cookieTextElement=document.createElement('span');cookieTextElement.innerHTML=window.translationsLogics.get('cookiepolicy.intro');domHelper.addClass(cookieTextElement,'cookie_policy_text');cookieContainerElement.appendChild(cookieTextElement);}
var cookieControlsElement=document.createElement('span');domHelper.addClass(cookieControlsElement,'cookie_policy_controls');cookieContainerElement.appendChild(cookieControlsElement);if(window.translationsLogics.get('cookiepolicy.buttonText')!=''){cookieButtonElement=document.createElement('span');cookieButtonElement.innerHTML=window.translationsLogics.get('cookiepolicy.buttonText');domHelper.addClass(cookieButtonElement,'cookie_policy_button button');cookieControlsElement.appendChild(cookieButtonElement);eventsManager.addHandler(cookieButtonElement,'click',cookieButtonClickHandler);}
if(window.translationsLogics.get('cookiepolicy.infoLinkText')!=''){var cookieInfoElement=document.createElement('a');cookieInfoElement.href=window.translationsLogics.get('cookiepolicy.infoLink');cookieInfoElement.target='_blank';cookieInfoElement.innerHTML=window.translationsLogics.get('cookiepolicy.infoLinkText');domHelper.addClass(cookieInfoElement,'cookie_policy_link');cookieControlsElement.appendChild(cookieInfoElement);}
var body=_('body')[0];body.appendChild(cookieContainerElement);};var cookieButtonClickHandler=function(){cookieContainerElement.parentNode.removeChild(cookieContainerElement);Cookies.set('cookiePolicyAccepted',true,{expires:Infinity});};controller.addListener('initDom',init);};window.CookiePolicy();;function SubscriptionFormComponent(formElement){var emailField;var idField;var actionField;var submitButton;var messageElement;var classSufix='';var init=function(){if(emailField=formElement.querySelector('.news_mailform_input')){}
messageElement=formElement.querySelector('.news_mailform_message');if(!messageElement){messageElement=document.createElement('div');messageElement.className='news_mailform_message';formElement.insertBefore(messageElement,formElement.firstChild);}
idField=formElement.elements['id'];actionField=formElement.elements['action'];if(submitButton=formElement.querySelector('.news_mailform_button')){eventsManager.addHandler(submitButton,'click',submitForm);eventsManager.addHandler(formElement,'submit',submitForm);}};var submitForm=function(event){eventsManager.preventDefaultAction(event);var check=Math.floor((new Date().getTime())/ 1000);var requestUrl='/ajax/check:'+check+'/';if(emailField&&actionField&&idField){var postParameters={'id':idField.value,'action':actionField.value,};postParameters[emailField.name]=emailField.value;var request=new JsonRequest(requestUrl,receiveData,'subscriptionForm',postParameters);request.send();}
return false;};var receiveData=function(responseStatus,requestName,responseData){if(responseStatus=='success'){if(typeof responseData.newsMailForm!=='undefined'){emailField.value='';if(classSufix!==''){messageElement.classList.remove("message_"+classSufix);}
classSufix=responseData.newsMailForm.subscriptionStatus;messageElement.classList.add("message_"+classSufix);messageElement.innerHTML=responseData.newsMailForm.message;messageElement.style.display='block';}}};init();};window.TabsComponent=function(componentElement){var self=this;var activeTabNumber=0;var rememberOpenedTab;var contentElements=[];var buttons=[];var init=function(){if(componentElement.className.indexOf('tabs_remember_opened')!==-1){rememberOpenedTab=true;}
var elements;if(elements=_('.tab_button',componentElement)){for(var i=0;i!=elements.length;i++){buttons[buttons.length]=new TabsButtonComponent(elements[i],self,i);if(elements[i].className.indexOf('tab_button_active')!=-1){activeTabNumber=i;}}
var newTabNumber=activeTabNumber;if(rememberOpenedTab){var storedTabNumber=storageInterface.getValue('tabs '+componentElement.className);if(storedTabNumber!==false){newTabNumber=storedTabNumber;}}
contentElements=_('.tabs_item',componentElement);self.activateTab(newTabNumber);}};this.activateTab=function(newTabNumber,userInteracted){if(rememberOpenedTab&&userInteracted){storageInterface.setValue('tabs '+componentElement.className,newTabNumber);}
if(buttons[activeTabNumber]){buttons[activeTabNumber].deActivate();}
if(buttons[newTabNumber]){buttons[newTabNumber].activate();}
domHelper.removeClass(contentElements[activeTabNumber],'tabs_item_active');domHelper.addClass(contentElements[newTabNumber],'tabs_item_active');activeTabNumber=newTabNumber;controller.fireEvent('TabsComponent.tabActivated');};this.getActiveTabNumber=function(){return activeTabNumber;};init();};window.TabsButtonComponent=function(componentElement,tabsComponent,number){var init=function(){eventsManager.addHandler(componentElement,'click',onClick);};var onClick=function(){if(number!=tabsComponent.getActiveTabNumber()){tabsComponent.activateTab(number,true);}};this.activate=function(){domHelper.addClass(componentElement,'tab_button_active');};this.deActivate=function(){domHelper.removeClass(componentElement,'tab_button_active');};init();};;window.ToolTipComponent=function(parameters,popupText_deprecated,excludedElements_deprecated,classNameExtra_deprecated){let self=this;let referralElement;let componentElement;let contentElement;let popupText;let popupOffset=12;let displayDelay=100;let displayed=false;let displayAllowed;let displayTimeout;let hideOnClick;let hideOnLeave;let fixedX=false;let fixedY=false;let excludedElements;let classNameExtra;let behaviourType;let beforeDisplay;let behaviourTypeDefault='mouseover';let elementsCreated=false;let attached=false;let popupPointerStyle;let classNameReferralSelected;const init=function(){if(typeof parameters=='object'){parseParameters(parameters);}else{referralElement=parameters;}
if(popupText_deprecated){popupText=popupText_deprecated;}
if(excludedElements_deprecated){excludedElements=excludedElements_deprecated;}
if(classNameExtra_deprecated){classNameExtra=classNameExtra_deprecated;}
addMouseHandlers();};const parseParameters=function(parameters){if(typeof parameters.referralElement!=='undefined'){referralElement=parameters.referralElement;}
if(typeof parameters.popupText!=='undefined'){popupText=parameters.popupText;}
if(typeof parameters.classNameExtra!=='undefined'){classNameExtra=parameters.classNameExtra;}
if(typeof parameters.excludedElements!=='undefined'){excludedElements=parameters.excludedElements;}
if(typeof parameters.excludedElements!=='undefined'){excludedElements=parameters.excludedElements;}
if(typeof parameters.behaviourType!=='undefined'){behaviourType=parameters.behaviourType;}else{behaviourType=behaviourTypeDefault;}
if(typeof parameters.hintPointer!=='undefined'){hintPointer=parameters.hintPointer;}
if(typeof parameters.classNameReferralSelected!=='undefined'){classNameReferralSelected=parameters.classNameReferralSelected;}
if(typeof parameters.fixedX!=='undefined'){fixedX=parameters.fixedX;}
if(typeof parameters.hideOnClick!=='undefined'){hideOnClick=parameters.hideOnClick;}else{hideOnClick=true;}
if(typeof parameters.beforeDisplay!=='undefined'){beforeDisplay=parameters.beforeDisplay;}else{beforeDisplay=true;}
if(typeof parameters.hideOnLeave!=='undefined'){hideOnLeave=parameters.hideOnLeave;}else{hideOnLeave=true;}};const createDomElements=function(){elementsCreated=true;componentElement=document.createElement('div');componentElement.className='tip_popup';componentElement.style['pointerEvents']='none';if(classNameExtra){componentElement.className+=' '+classNameExtra;}
componentElement.style.display='none';contentElement=document.createElement('div');contentElement.className='tip_popup_content';componentElement.appendChild(contentElement);contentElement.innerHTML=popupText;};const attach=function(){if(!attached){if(!elementsCreated){createDomElements();}
attached=true;document.body.appendChild(componentElement);}};const detach=function(){if(attached){attached=false;document.body.removeChild(componentElement);}};const moveHandler=function(){updatePosition();};const resizeHandler=function(){if(behaviourType==='mouseover'||behaviourType==='click'){updatePosition();}};const enterHandler=function(){if(popupText&&displayAllowed&&!displayed){displayTimeout=window.setTimeout(self.displayComponent,displayDelay);}};const overHandler=function(event){displayAllowed=checkExcluded(event.target);if(beforeDisplay){displayAllowed&=beforeDisplay();}
if(popupText&&(displayAllowed)){if(!displayed){self.displayComponent();}}else if(displayed){self.hideComponent();}};const clickHandler=function(event){displayAllowed=checkExcluded(event.target);if(popupText&&(displayAllowed)){if(!displayed){self.displayComponent();}else if(displayed&&hideOnClick){self.hideComponent();}}};const checkExcluded=function(element){let result=true;if(excludedElements){for(let i=0;i<excludedElements.length;i++){if((excludedElements[i]===element)||isAChildOf(excludedElements[i],element)){result=false;break;}}}
return result;};const leaveHandler=function(){window.clearTimeout(displayTimeout);TweenLite.to(componentElement,0.5,{'css':{'opacity':0},'onComplete':self.hideComponent,});};this.displayComponent=function(){if(!displayed){attach();displayed=true;componentElement.style.opacity=0;componentElement.style.display='block';updatePosition();if(classNameReferralSelected){domHelper.addClass(referralElement,classNameReferralSelected);}
TweenLite.to(componentElement,0.5,{'css':{'opacity':1}});}};this.hideComponent=function(callBack){displayed=false;if(classNameReferralSelected){domHelper.removeClass(referralElement,classNameReferralSelected);}
detach();if(callBack){callBack();}};const updatePosition=function(e){if(!displayed){return;}
let verticalMouseCoord=window.mouseTracker.mouseX;let verticalOffsetWidth=window.innerWidth;let referralStyle=getComputedStyle(referralElement);let referralPosition=referralElement.getBoundingClientRect();let popupStyle=getComputedStyle(componentElement);let popupHeight=parseFloat(popupStyle.height);let popupWidth=parseFloat(popupStyle.width);let maxWidth=parseFloat(window.innerWidth);if(hintPointer){popupPointerStyle=getComputedStyle(componentElement,':before');}
let xPosition=0;if(fixedX){xPosition=fixedX;}else if(!fixedX&&!hintPointer){xPosition=window.mouseTracker.mouseX+popupOffset;if(verticalOffsetWidth-verticalMouseCoord<popupWidth){xPosition=xPosition-popupWidth;}}else if(hintPointer){let popupPointerWidth=parseFloat(popupPointerStyle.width);let popupPointerRight=parseFloat(popupPointerStyle.right);let referralWidth=parseFloat(referralStyle.width)-parseFloat(referralStyle.paddingLeft)-parseFloat(referralStyle.paddingRight);let referralRight=referralPosition.right;xPosition=referralRight-referralWidth / 2-popupWidth+popupPointerWidth / 2+popupPointerRight;}
let yPosition=0;if(fixedY){yPosition=fixedY-popupHeight;}else if(!fixedY&&!hintPointer){yPosition=window.mouseTracker.mouseY-popupHeight-popupOffset;}else if(hintPointer){let referralHeight=parseFloat(referralStyle.height);yPosition=window.mouseTracker.mouseY-referralHeight / 2-popupHeight;}
componentElement.style.left=xPosition+'px';componentElement.style.top=yPosition+'px';};const isAChildOf=function(_parent,_child){if(_parent===_child){return false;}
while(_child&&_child!==_parent){_child=_child.parentNode;}
return _child===_parent;};const addMouseHandlers=function(){if(behaviourType==='mouseover'){window.eventsManager.addHandler(window,'resize',resizeHandler);window.eventsManager.addHandler(referralElement,'mousemove',moveHandler);window.eventsManager.addHandler(referralElement,'mouseover',overHandler);window.eventsManager.addHandler(referralElement,'mouseenter',enterHandler);if(hideOnLeave){window.eventsManager.addHandler(referralElement,'mouseleave',leaveHandler);}
if(hideOnClick){window.eventsManager.addHandler(referralElement,'click',leaveHandler);}}
if(behaviourType==='click'){window.eventsManager.addHandler(window,'resize',resizeHandler);window.eventsManager.addHandler(referralElement,'click',clickHandler);}};this.setDisplayDelay=function(delay){displayDelay=delay;};this.setText=function(text){popupText=text;contentElement.innerHTML=popupText;updatePosition();};this.setFixedCoordinates=function(x,y){fixedX=x;fixedY=y;updatePosition();};this.changeBehaviour=function(newType){window.eventsManager.removeHandler(window,'resize',resizeHandler);if(referralElement){window.eventsManager.removeHandler(referralElement,'mousemove',moveHandler);window.eventsManager.removeHandler(referralElement,'mouseover',overHandler);window.eventsManager.removeHandler(referralElement,'mouseenter',enterHandler);window.eventsManager.removeHandler(referralElement,'mouseleave',leaveHandler);window.eventsManager.removeHandler(referralElement,'click',leaveHandler);}
behaviourType=newType;addMouseHandlers();};init();};;function AjaxFormComponent(formElement,callCallback){var formId;var formAction;var submitButton;var successMessageElement;var errorMessageElement;var hideOnSuccessElements;var init=function(){formId=formElement.elements['id'].value;formAction=formElement.elements['action'].value;successMessageElement=formElement.querySelector('.ajax_form_success_message');if(!successMessageElement){successMessageElement=document.createElement('div');successMessageElement.className='ajax_form_success_message';formElement.insertBefore(successMessageElement,formElement.firstChild);}
errorMessageElement=formElement.querySelector('.ajax_form_error_message');if(!errorMessageElement){errorMessageElement=document.createElement('div');errorMessageElement.className='ajax_form_error_message';formElement.insertBefore(errorMessageElement,formElement.firstChild);}
hideOnSuccessElements=formElement.querySelectorAll('.ajax_form_hide_on_success');if(submitButton=formElement.querySelector('.ajax_form_submit')){eventsManager.addHandler(submitButton,'click',submitForm);eventsManager.addHandler(formElement,'submit',submitForm);eventsManager.addHandler(formElement,'keydown',keyDownHandler);}};var keyDownHandler=function(event){if(event.target&&event.target.tagName.toLowerCase()!='textarea'){if(event.keyCode==13){submitForm(event);}}};var submitForm=function(event){eventsManager.preventDefaultAction(event);var check=Math.floor((new Date().getTime())/ 1000);var requestUrl='/ajax/check:'+check+'/';if(formAction&&formId){var formData=new FormData(formElement);var request=new JsonRequest(requestUrl,receiveData,'form'+formId+formAction,null,formData);request.send();}
return false;};var receiveData=function(responseStatus,requestName,responseData){var i,errorElement;var errorElementName;var errorElementParent;if(responseStatus=='success'){var response=responseData['form'+formId+formAction];if(callCallback){callCallback();}
if(typeof response!=='undefined'){for(i=0;i<formElement.elements.length;i++){if(errorElementName=formElement.elements[i].dataset.name||formElement.elements[i].name){errorElementParent=formElement.querySelector('[data-fieldname="'+errorElementName+'"]');console.log(errorElementName)
if(errorElementParent){domHelper.removeClass(errorElementParent,'form_error');}}
else{domHelper.removeClass(formElement.elements[i].parentNode.parentNode,'form_error');}}
if(typeof response.success_message!=='undefined'){if(typeof response.redirect!=='undefined'){document.location.href=response.redirect;}else if(typeof response.reload!=='undefined'){document.location.href=document.location.href;}else{successMessageElement.innerHTML=response.success_message;successMessageElement.style.display='block';errorMessageElement.innerHTML='';errorMessageElement.style.display='none';if(response.resetForm){resetForm();}
for(i=0;i<hideOnSuccessElements.length;i++){hideOnSuccessElements[i].style.display='none';}}}else{if(typeof response.errors!=='undefined'){for(i=0;i<response.errors.length;i++){errorElementName='formData['+formId+']['+response.errors[i]+']';errorElement=formElement.elements[errorElementName];if(!errorElement){errorElement=formElement.querySelector('[data-name="'+errorElementName+'"]');}
errorElementParent=formElement.querySelector('[data-fieldname="'+errorElementName+'"]');if(errorElementParent){domHelper.addClass(errorElementParent,'form_error');}
else{domHelper.addClass(errorElement.parentNode.parentNode,'form_error');}}}
if(typeof response.dynamicErrors!=='undefined'){for(i=0;i<response.dynamicErrors.length;i++){errorElementName='formData['+formId+'][dynamicFieldsData]['+response.dynamicErrors[i]+']';errorElement=formElement.elements[errorElementName];errorElementParent=formElement.querySelector('[data-fieldname="'+errorElementName+'"]')
if(errorElementParent){domHelper.addClass(errorElementParent,'form_error');}
else{domHelper.addClass(errorElement.parentNode.parentNode,'form_error');}}}
if(typeof response.error_message!=='undefined'&&response.error_message!==null){errorMessageElement.innerHTML=response.error_message;errorMessageElement.style.display='block';}}}}};var resetForm=function(){for(var i=formElement.elements.length;i--;){var element=formElement.elements[i];if(element.name=='id'||element.name=='action')
continue;var type=element.type.toLowerCase();switch(type){case'radio':case'checkbox':element.checked=false;break;case'select-one':case'select-multi':element.selectedIndex=-1;break;default:element.value='';break;}}
if(formElement.querySelector('.file_input_field')){formElement.querySelector('.file_input_field').innerHTML='';}};init();};window.CommentForm=function(element){this.submit=function(){self.element.submit();};this.init=function(){var sendButton=_('.form_button',this.element)[0];eventsManager.addHandler(sendButton,'click',this.submit);};var self=this;this.element=element;this.init();};;window.CommentComponent=function(componentElement,elementInfo){var plusButton;var voteControlsElement;var minusButton;var currentValueElement;var responseForm;var responseFormDisplayed=false;var responseButton;var votingEnabled=false;var registeredOnly=false;var init=function(){registeredOnly=componentElement.dataset.registeredOnly;if(voteControlsElement=componentElement.querySelector('.vote_controls')){if(window.userName=='anonymous'){votingEnabled=false;}else{votingEnabled=true;currentValueElement=voteControlsElement.querySelector('.vote_current');if(plusButton=voteControlsElement.querySelector('.vote_plus')){eventsManager.addHandler(plusButton,'click',plusClickHandler);}
if(minusButton=voteControlsElement.querySelector('.vote_minus')){eventsManager.addHandler(minusButton,'click',minusClickHandler);}
controller.addListener('voteRecalculated',voteCalculatedHandler);}
refreshValue();}
if(!registeredOnly||window.userName!='anonymous'){if(responseButton=componentElement.querySelector('.comment_response_button')){if(responseForm=componentElement.querySelector('.comment_form')){responseButton.addEventListener('click',responseClickHandler);}}}else{var popup=new ToolTipComponent(componentElement,window.translationsLogics.get('label.registration_required'));popup.setDisplayDelay(100);}};var responseClickHandler=function(){if(responseFormDisplayed){responseForm.style.display='none';}else{responseForm.style.display='block';}
responseFormDisplayed=!responseFormDisplayed;};var plusClickHandler=function(){if(votingEnabled){votesLogics.makeVote(elementInfo.id,1);}};var minusClickHandler=function(){if(votingEnabled){votesLogics.makeVote(elementInfo.id,-1);}};var voteCalculatedHandler=function(newElementInfo){if(elementInfo.id==newElementInfo.id){elementInfo=newElementInfo;refreshValue();}};var refreshValue=function(){if(currentValueElement){currentValueElement.innerHTML=elementInfo.votes;}
if(elementInfo.votes<0){domHelper.addClass(componentElement,'vote_negative');}else{domHelper.removeClass(componentElement,'vote_negative');}
if(elementInfo.votes<=-3){domHelper.addClass(componentElement,'vote_negative_transparent');}else{domHelper.removeClass(componentElement,'vote_negative_transparent');}};init();};;window.MapComponent=function(componentElement,id){var self=this;var info;var infowindow,marker,googleMap,latlng;var init=function(){self.initLazyLoading({'componentElement':componentElement,'displayCallback':lazyLoadingCallback,});};var lazyLoadingCallback=function(){info=window.mapsLogics.getMapInfo(id);eventsManager.addHandler(window,'resize',onResize);if(info.isHeightAdjusted()){adjustHeight();}
var mapCode=info.getMapCode();if(mapCode){componentElement.innerHTML=mapCode;}else{var coordinates=info.getCoordinates();var zoomLevel=info.getZoomLevel();if(coordinates){var styles=info.getStyles();if(styles){latlng=new google.maps.LatLng(coordinates[0],coordinates[1]);var options={zoom:zoomLevel,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:info.getMapTypeControlEnabled(),zoomControl:info.getZoomControlEnabled(),streetViewControl:info.getStreetViewControlEnabled(),};if(styles.length>0){options.styles=styles;}
googleMap=new google.maps.Map(componentElement,options);if(info.getContent()){infowindow=new google.maps.InfoWindow({content:info.getContent(),});}
marker=new google.maps.Marker({position:latlng,map:googleMap,title:info.getTitle(),});google.maps.event.addListener(marker,'click',onMarkerClick);}else{var title=info.getTitle()?'&q=+'+info.getTitle()+'':'';var iframe=document.createElement('iframe');componentElement.classList.add('googlemap_iframe');var src='https://maps.google.com/?q='+title+'&ll='+coordinates+'&hl='+window.mapsLogics.getShortLanguageCode()+'&z='+zoomLevel+'&output=embed';iframe.setAttribute('src',src);iframe.setAttribute('allowfullscreen',true);componentElement.appendChild(iframe);}}}};var onMarkerClick=function(){infowindow.open(googleMap,marker);};var onResize=function(){if(info.isHeightAdjusted()){adjustHeight();}
refreshGoogleMap();};var adjustHeight=function(){var componentHeight;componentElement.style.height='';var parentHeight=componentElement.parentNode.offsetHeight;var minHeight=componentElement.offsetWidth*info.getHeight();if(minHeight>parentHeight){componentHeight=minHeight;}else{componentHeight=parentHeight;}
componentElement.style.height=componentHeight+'px';};var refreshGoogleMap=function(){if(googleMap){google.maps.event.trigger(googleMap,'resize');googleMap.setCenter(latlng);}};init();};LazyLoadingMixin.call(MapComponent.prototype);window.iframeMapComponent=function(componentElement,id,lang){var info;var init=function(){adjustHeight();eventsManager.addHandler(window,'resize',adjustHeight);};var adjustHeight=function(){info=window.mapsLogics.getMapInfo(id);var coordinates=info.getCoordinates();var zoomLevel=info.getZoomLevel();componentElement.style.minHeight=componentElement.offsetWidth / 2+'px';componentElement.style.height='';componentElement.style.height=componentElement.parentNode.offsetHeight+'px';};init();};;function PasswordReminderFormComponent(componentElement){var submit=function(event){eventsManager.preventDefaultAction(event);componentElement.submit();};var init=function(){if(sendButton=_('.passwordreminder_submit',componentElement)[0]){eventsManager.addHandler(sendButton,'click',submit);}};var self=this;var sendButton=false;init();};window.LazyImageComponent=function(componentElement){let self=this;let init=function(){self.initLazyLoading({'componentElement':componentElement,'displayCallback':lazyLoadingCallback});};const lazyLoadingCallback=function(){requestAnimationFrame(display);};const display=function(){componentElement.src=componentElement.dataset.lazysrc;delete componentElement.dataset.lazysrc;if(componentElement.dataset.lazysrcset){componentElement.srcset=componentElement.dataset.lazysrcset;delete componentElement.dataset.lazysrcset;}};init();};LazyLoadingMixin.call(LazyImageComponent.prototype);;window.EventsListComponent=function(componentElement){var self=this;var presetInputs=[];var periodSelector;var init=function(){var element;if(element=componentElement.querySelector('select.eventslist_filter_select')){periodSelector=new EventsListSelectorComponent(element,self);}
var elements=componentElement.querySelectorAll('input.eventslist_filter_preset_radio');for(var i=0;i<elements.length;i++){presetInputs.push(new EventsListRadioComponent(elements[i],self));}};this.applyFilters=function(){var url=window.currentElementURL;var filterValue;for(var i=0;i<presetInputs.length;i++){if(filterValue=presetInputs[i].getValue()){url+='preset:'+filterValue+'/';}}
if(!filterValue&&periodSelector){if(filterValue=periodSelector.getValue()){if(filterValue!='none'){url+='period:'+periodSelector.getValue()+'/';}}}
document.location.href=url;};init();};window.EventsListSelectorComponent=function(componentElement,eventsListObject){var self=this;var initialValue;var init=function(){initialValue=self.getValue();eventsManager.addHandler(componentElement,'change',changeHandler);};var changeHandler=function(){if(self.getValue()!=initialValue){eventsListObject.applyFilters();}};this.getValue=function(){return componentElement.value;};init();};window.EventsListRadioComponent=function(componentElement,eventsListObject){var self=this;var initialValue;var init=function(){initialValue=self.getValue();eventsManager.addHandler(componentElement,'click',changeHandler);};var changeHandler=function(){if(self.getValue()!=initialValue){eventsListObject.applyFilters();}};this.getValue=function(){if(componentElement.checked){return componentElement.value;}else{return false;}};init();};;window.GalleryImagesScrollComponent=function(galleryInfo,parentComponent){var componentElement;var self=this;var imagesList=[];var imagesIndex=[];var imageComponentElements=[];var currentImageNumber=0;var width;var height;var fullScreenGallery;var startX,startY,startScrollX,scrolling,touchEndTimer,lastX,startTime,velocity,direction;var eventsSet;var userHasInteracted;var scrollTween;var completeMovementTimeout;var acceleration=100;var init=function(){if(galleryInfo.getImagesList()){initDomStructure();if(galleryInfo.isFullScreenGalleryEnabled()){fullScreenGallery=new FullScreenGalleryComponent(galleryInfo);}
controller.addListener('galleryImageDisplay',galleryImageDisplayHandler);eventsSet=eventsManager.detectTouchEventsSet();eventsManager.addHandler(componentElement,eventsManager.getPointerStartEventName(),touchStart);}};this.destroy=function(){controller.removeListener('galleryImageDisplay',galleryImageDisplayHandler);for(var i=imagesList.length;i--;){imagesList[i].destroy();}};var initDomStructure=function(){componentElement=document.createElement('div');componentElement.className='gallery_images';var imagesInfoList=galleryInfo.getImagesList();for(var i=0;i<imagesInfoList.length;i++){var imageItem=new GalleryImageComponent(imagesInfoList[i],self,galleryInfo);componentElement.appendChild(imageItem.getComponentElement());imageComponentElements.push(imageItem.getComponentElement());imagesList.push(imageItem);imagesIndex[imageItem.getId()]=imageItem;}};this.startApplication=function(){parentComponent.recalculateSizes();self.scrollPagesInit({'componentElement':componentElement,'pageElements':imageComponentElements,'interval':galleryInfo.getChangeDelay(),'changeDuration':1,'effectDuration':1.5,'autoStart':false,'preloadCallBack':preloadCallBack,});galleryInfo.displayImageByNumber(0);galleryInfo.startSlideShow();};var galleryImageDisplayHandler=function(imageObject){var imageId=imageObject.getId();if(imagesIndex[imageId]){currentImageNumber=imageObject.getImageNumber();self.showPage(currentImageNumber);}};var preloadCallBack=function(number,callback){if(typeof imagesList[number]!=='undefined'){imagesList[number].checkPreloadImage(callback);}};this.setSizes=function(newWidth,newHeight){width=newWidth;height=newHeight;componentElement.style.width=width+'px';componentElement.style.height=height+'px';for(var i=imagesList.length;i--;){imagesList[i].resize(width,height);}};this.displayFullScreenGallery=function(){if(fullScreenGallery){galleryInfo.stopSlideShow();fullScreenGallery.display();}};this.getComponentElement=function(){return componentElement;};this.hasFullScreenGallery=function(){return galleryInfo.isFullScreenGalleryEnabled();};this.videoAutoStart=function(){return galleryInfo.getVideoAutoStart();};var touchStart=function(event){if(scrollTween){scrollTween.kill();}
window.clearTimeout(completeMovementTimeout);direction=false;if(!userHasInteracted){userHasInteracted=true;galleryInfo.stopSlideShow();}
eventsManager.preventDefaultAction(event);if(eventsSet=='touch'){startX=event.touches[0].pageX;startY=event.touches[0].pageY;}else if(eventsSet=='MSPointer'){startX=event.pageX;startY=event.pageY;}else{startX=event.pageX;startY=event.pageY;}
lastX=startX;startTime=Number(new Date());startScrollX=componentElement.scrollLeft;eventsManager.addHandler(document,eventsManager.getPointerMoveEventName(),touchMove);eventsManager.addHandler(document,eventsManager.getPointerEndEventName(),touchEnd);eventsManager.addHandler(document,eventsManager.getPointerCancelEventName(),touchEnd);};var touchMove=function(event){eventsManager.preventDefaultAction(event);var currentX=startX;var currentY=startY;if(eventsSet=='touch'){currentX=event.touches[0].pageX;currentY=event.touches[0].pageY;}else if(eventsSet=='MSPointer'){currentX=event.pageX;currentY=event.pageY;}else{currentX=event.pageX;currentY=event.pageY;}
if(currentX-startX>0){direction='right';}else{direction='left';}
velocity=Math.abs((currentX-startX))/((Number(new Date())-startTime)/ 1000);if(!scrolling){if((currentX!=startX)&&(Math.abs((currentX-startX)/ startX)>0.2)){scrolling=true;}}
if(scrolling){window.clearTimeout(touchEndTimer);touchEndTimer=window.setTimeout(touchEnd,2000);componentElement.scrollLeft=startScrollX-currentX+startX;}else{window.scrollBy(0,startY-currentY);}
lastX=currentX;};var touchEnd=function(){window.clearTimeout(touchEndTimer);eventsManager.removeHandler(document,eventsManager.getPointerMoveEventName(),touchMove);eventsManager.removeHandler(document,eventsManager.getPointerEndEventName(),touchEnd);eventsManager.removeHandler(document,eventsManager.getPointerCancelEventName(),touchEnd);if(scrolling){scrolling=false;velocity=velocity / 10;completeMovement();}else{var imageInfo=imagesList[currentImageNumber].getImageInfo();if(imageInfo.getExternalLink()){imageInfo.openExternalLink();}}};var completeMovement=function(){var scrollIndex=checkScroll();velocity-=acceleration;if(velocity>0&&scrollIndex==currentImageNumber){if(direction=='left'){componentElement.scrollLeft+=velocity;}else{componentElement.scrollLeft-=velocity;}
completeMovementTimeout=setTimeout(completeMovement,100);}else{scroll(scrollIndex);}};var checkScroll=function(){var windowScrollLeft=componentElement.scrollLeft;var windowOffsetWidth=componentElement.offsetWidth;var focusTicketIndex;var compIntersection=0;for(var i=0,l=imagesList.length;i!==l;i++){var imageElement=imagesList[i].getComponentElement();var intersection=Math.min(imageElement.offsetLeft+imageElement.offsetWidth,windowScrollLeft+windowOffsetWidth)-Math.max(imageElement.offsetLeft,windowScrollLeft);if(intersection>compIntersection){focusTicketIndex=i;compIntersection=intersection;}}
return focusTicketIndex;};var scroll=function(focusIndex){var imageElement=imagesList[focusIndex].getComponentElement();var scrollLeft=imageElement.offsetLeft+(imageElement.offsetWidth-componentElement.offsetWidth)/ 2;scrollTween=TweenLite.to(componentElement,0.5,{'scrollLeft':scrollLeft});currentImageNumber=focusIndex;};init();};ScrollPagesMixin.call(GalleryImagesScrollComponent.prototype);;function SearchFormComponent(formElement,displayInElement,displayTotals,totalsElement,position){var self=this;this.submitButton=null;this.formElement=null;var inputElement;var init=function(){self.formElement=formElement;if(self.submitButton=formElement.querySelector('.search_button')){eventsManager.addHandler(self.submitButton,'click',self.submitForm);}
eventsManager.addHandler(self.formElement,'submit',self.submitForm);eventsManager.addHandler(self.formElement,'keydown',self.checkKey);var allowedSearchTypes;if(formElement.dataset.types&&formElement.dataset.types!=''){allowedSearchTypes=formElement.dataset.types;}else{allowedSearchTypes='product,category,news,article,folder,discount';}
var showedSearchElementComponents;if(formElement.dataset.showed&&formElement.dataset.showed!=''){showedSearchElementComponents=formElement.dataset.showed;}else{showedSearchElementComponents='title';}
inputElement=formElement.querySelector('.ajaxsearch_input');if(inputElement&&inputElement.className.indexOf('ajaxsearch_input')!=-1){var parameters={'clickCallback':ajaxSearchResultClick,'apiMode':'public','totalsElement':totalsElement,'position':position,'searchStringLimit':1,'types':allowedSearchTypes,'showedElementComponents':showedSearchElementComponents,};if(typeof displayInElement!='undefined'){parameters.displayInElement=displayInElement;}
if(typeof displayTotals!='undefined'){parameters.displayTotals=displayTotals;}
if(typeof position!='undefined'){parameters.position=position;}
new AjaxSearchComponent(inputElement,parameters);}};var ajaxSearchResultClick=function(data){if(data.url){document.location.href=data.url;}};this.checkKey=function(event){if(event.keyCode==13){self.submitForm();}};this.submitForm=function(event){if(event){eventsManager.preventDefaultAction(event);}
var targetUrl=self.formElement.getAttribute('action');if(inputElement.value){targetUrl+='phrase:'+encodeURIComponent(inputElement.value.replace('/','%s%'))+'/';}
document.location.href=targetUrl;};controller.addListener('DOMContentReady',init);};window.RedirectSelectComponent=function(componentElement){var init=function(){eventsManager.addHandler(componentElement,'change',onChange);};var onChange=function(event){document.location.href=getSelectedValue();};var getSelectedValue=function(){return componentElement.options[componentElement.selectedIndex].value;};init();};;window.FullScreenGalleryComponent=function(galleryObject){var self=this;var displayed=false;var domCreated=false;var componentElement;var centerComponent;var init=function(){var imagesInfoList=galleryObject.getImagesList();if(imagesInfoList.length){controller.addListener('galleryImageDisplay',galleryImageDisplayHandler);}};this.display=function(){if(!domCreated){createDomStructure();}
if(!displayed){displayed=true;DarkLayerComponent.showLayer(null,displayComponent);}};var displayComponent=function(){componentElement.style.display='block';centerComponent.updateContents();window.addEventListener('keydown',keyDownHandler);};var keyDownHandler=function(event){if(event.keyCode=='27'){eventsManager.preventDefaultAction(event);self.hideComponent();}
if(event.keyCode=='32'||event.keyCode=='39'){eventsManager.preventDefaultAction(event);galleryObject.displayNextImage();}
if(event.keyCode=='8'||event.keyCode=='37'){eventsManager.preventDefaultAction(event);galleryObject.displayPreviousImage();}};var galleryImageDisplayHandler=function(imageObject){if(displayed){centerComponent.setCurrentImage(imageObject);}};var createDomStructure=function(){domCreated=true;componentElement=document.createElement('div');componentElement.className='fullscreen_gallery_block';componentElement.style.display='none';eventsManager.addHandler(componentElement,'click',self.hideComponent);centerComponent=new FullScreenGalleryCenterComponent(self,galleryObject);componentElement.appendChild(centerComponent.componentElement);document.body.appendChild(componentElement);};this.hideComponent=function(){if(displayed){window.removeEventListener('keydown',keyDownHandler);displayed=false;componentElement.style.display='none';centerComponent.hideCurrentImage();DarkLayerComponent.hideLayer();}};init();};window.FullScreenGalleryCenterComponent=function(galleryComponent,galleryObject){var self=this;this.componentElement=null;var currentImageComponent;var closeButtonComponent;var nextButtonComponent;var prevButtonComponent;var imagesElement;var imagesObjectsList;var heightCoeff=0.9;var widthCoeff=0.9;var oldImageComponent;var imagesComponentsList;var imagesComponentsIndex;var init=function(){imagesObjectsList=galleryObject.getImagesList();createDomStructure();};var createDomStructure=function(){self.componentElement=document.createElement('div');self.componentElement.className='fullscreen_gallery_center';eventsManager.addHandler(self.componentElement,'click',clickHandler);eventsManager.addHandler(self.componentElement,'mousedown',mouseDownHandler);imagesElement=document.createElement('div');imagesElement.className='fullscreen_gallery_images';self.componentElement.appendChild(imagesElement);imagesComponentsList=[];imagesComponentsIndex={};for(var i=0;i<imagesObjectsList.length;i++){var imageComponent=new FullScreenGalleryImageComponent(imagesObjectsList[i],self,galleryObject.getDescriptionType());imagesComponentsList.push(imageComponent);imagesComponentsIndex[imagesObjectsList[i].getId()]=imageComponent;imagesElement.appendChild(imageComponent.getComponentElement());}
if(imagesObjectsList.length>1){nextButtonComponent=new FullScreenGalleryNextComponent(galleryObject);prevButtonComponent=new FullScreenGalleryPrevComponent(galleryObject);self.componentElement.appendChild(nextButtonComponent.componentElement);self.componentElement.appendChild(prevButtonComponent.componentElement);}
closeButtonComponent=new FullScreenGalleryCloseComponent(galleryComponent);self.componentElement.appendChild(closeButtonComponent.componentElement);};this.updateContents=function(){var imageObject=galleryObject.getCurrentImage();var currentImageId=imageObject.getId();if(typeof imagesComponentsIndex[currentImageId]!=='undefined'){currentImageComponent=imagesComponentsIndex[currentImageId];updateButtonsStatus();if(currentImageComponent){currentImageComponent.checkPreloadImage(function(){resize();currentImageComponent.display();});}}};this.hideCurrentImage=function(){if(currentImageComponent){currentImageComponent.hide();}};this.setCurrentImage=function(imageObject){var imageId=imageObject.getId();if(!currentImageComponent||imageId!=currentImageComponent.id){if(typeof imagesComponentsIndex[imageId]!=='undefined'){if(currentImageComponent){oldImageComponent=currentImageComponent;}
currentImageComponent=imagesComponentsIndex[imageId];if(oldImageComponent){oldImageComponent.hide();}
self.updateContents();}}};var resize=function(){var viewPortWidth=window.innerWidth?window.innerWidth:document.documentElement.offsetWidth;var viewPortHeight=window.innerHeight?window.innerHeight:document.documentElement.offsetHeight;var elementWidth=viewPortWidth*widthCoeff;var elementHeight=viewPortHeight*heightCoeff;imagesElement.style.width=elementWidth+'px';imagesElement.style.height=elementHeight+'px';var positionLeft=(viewPortWidth-self.componentElement.offsetWidth)/ 2;var positionTop=(viewPortHeight-self.componentElement.offsetHeight)/ 2;self.componentElement.style.left=positionLeft+'px';self.componentElement.style.top=positionTop+'px';if(nextButtonComponent){nextButtonComponent.adjustHeight(imagesElement);}
if(prevButtonComponent){prevButtonComponent.adjustHeight(imagesElement);}
currentImageComponent.resize();};var updateButtonsStatus=function(){if(nextButtonComponent){if(!galleryObject.getNextImage()){nextButtonComponent.componentElement.style.display='none';}else{nextButtonComponent.componentElement.style.display='block';}}
if(prevButtonComponent){if(!galleryObject.getPrevImage()){prevButtonComponent.componentElement.style.display='none';}else{prevButtonComponent.componentElement.style.display='block';}}};var clickHandler=function(event){eventsManager.preventDefaultAction(event);eventsManager.cancelBubbling(event);};var mouseDownHandler=function(event){eventsManager.preventDefaultAction(event);eventsManager.cancelBubbling(event);};init();};window.FullScreenGalleryImageComponent=function(imageInfo,parentObject,descriptionType){var self=this;var mediaOriginalWidth;var mediaOriginalHeight;var videoLoadStarted;this.preloaded=false;this.id=null;var componentElement;var mediaElement;var sourceElement;var init=function(){self.id=imageInfo.getId();componentElement=document.createElement('div');componentElement.style.display='none';componentElement.className='fullscreen_gallery_image';if(imageInfo.isVideo()){self.checkPreloadImage=checkPreloadVideo;mediaElement=document.createElement('video');mediaElement.loop=true;mediaElement.muted=true;mediaElement.controls=false;mediaElement.setAttribute('webkit-playsinline','webkit-playsinline');mediaElement.setAttribute('playsinline','playsinline');mediaElement.style.visibility='hidden';componentElement.appendChild(mediaElement);sourceElement=document.createElement('source');sourceElement.type='video/mp4';sourceElement.src=imageInfo.getFileUrl();mediaElement.appendChild(sourceElement);}else{self.checkPreloadImage=checkPreloadImage;mediaElement=document.createElement('img');mediaElement.style.visibility='hidden';componentElement.appendChild(mediaElement);}
if(descriptionType==='overlay'&&(imageInfo.getDescription()||imageInfo.getTitle())){var overlayElment=document.createElement('div');overlayElment.className='gallery_details_item_overlay';var info;if(info=imageInfo.getTitle()){var titleElement=document.createElement('div');titleElement.className='gallery_details_item_title';titleElement.innerHTML=info;overlayElment.appendChild(titleElement);}
if(info=imageInfo.getDescription()){var descriptionElement=document.createElement('div');descriptionElement.className='gallery_details_item_description';descriptionElement.innerHTML=info;overlayElment.appendChild(descriptionElement);}
componentElement.appendChild(overlayElment);var visibleOffset=titleElement?titleElement.offsetHeight:0;self.initSlideOverlay({'overlayElement':overlayElment,'overlayParentElement':parentObject.componentElement,'enableMouseover':false,'visibleOffset':visibleOffset,});}};this.getComponentElement=function(){return componentElement;};this.display=function(){componentElement.style.opacity=0;componentElement.style.display='block';TweenLite.to(componentElement,1,{'css':{'opacity':1}});if(imageInfo.isVideo()){mediaElement.play();}};this.checkPreloadImage=null;var checkPreloadImage=function(callBack){if(!mediaElement.src){mediaElement.src=imageInfo.getFullImageUrl();mediaElement.style.visibility='hidden';componentElement.style.display='';}
if(!mediaElement.complete){window.setTimeout(function(callBack){return function(){self.checkPreloadImage(callBack);};}(callBack),100);}else{if(!self.preloaded){mediaElement.style.visibility='visible';mediaOriginalWidth=mediaElement.offsetWidth;mediaOriginalHeight=mediaElement.offsetHeight;componentElement.style.display='none';self.preloaded=true;self.resize();}
if(callBack){callBack();}}};var checkPreloadVideo=function(callBack){if(mediaElement.readyState<3){if(!videoLoadStarted){videoLoadStarted=true;mediaElement.load();}
window.setTimeout(function(callBack){return function(){self.checkPreloadImage(callBack);};}(callBack),100);}else{if(!self.preloaded){mediaElement.style.visibility='visible';mediaOriginalWidth=mediaElement.videoWidth;mediaOriginalHeight=mediaElement.videoHeight;componentElement.style.display='none';self.preloaded=true;self.resize();}
if(callBack){callBack();}}};this.hide=function(callBack){if(imageInfo.isVideo()){mediaElement.pause();}
TweenLite.to(componentElement,1,{'css':{'opacity':0},'onComplete':function(callBack){return function(){finishHide(callBack);};}(callBack),});};var finishHide=function(callBack){componentElement.style.display='none';if(typeof callBack!='undefined'){callBack();}};this.resize=function(){var aspectRatio=mediaOriginalWidth / mediaOriginalHeight;var imageWidth=mediaOriginalWidth;var imageHeight=mediaOriginalHeight;var imagesContainerWidth=componentElement.parentNode.offsetWidth;var imagesContainerHeight=componentElement.parentNode.offsetHeight;var logic=imageInfo.getImageResizeType(window.mobileLogics.isPhoneActive());if(logic==='contain'){imageWidth=imagesContainerWidth;imageHeight=imageWidth / aspectRatio;if(imageHeight>imagesContainerHeight){imageHeight=imagesContainerHeight;imageWidth=imageHeight*aspectRatio;}}else{if(imageWidth>imagesContainerWidth){imageWidth=imagesContainerWidth;imageHeight=imageWidth / aspectRatio;}
if(imageHeight>imagesContainerHeight){imageHeight=imagesContainerHeight;imageWidth=imageHeight*aspectRatio;}}
var imageLeft=(imagesContainerWidth-imageWidth)/ 2;var imageTop=(imagesContainerHeight-imageHeight)/ 2;mediaElement.style.width=imageWidth+'px';mediaElement.style.height=imageHeight+'px';componentElement.style.width=imageWidth+'px';componentElement.style.height=imageHeight+'px';componentElement.style.left=imageLeft+'px';componentElement.style.top=imageTop+'px';};this.getImageWidth=function(){return mediaOriginalWidth;};this.getImageHeight=function(){return mediaOriginalHeight;};init();};SlideOverlayMixin.call(FullScreenGalleryImageComponent.prototype);window.FullScreenGalleryCloseComponent=function(galleryComponent){var self=this;this.componentElement=null;var init=function(){self.componentElement=document.createElement('div');self.componentElement.className='fullscreen_gallery_close';eventsManager.addHandler(self.componentElement,'click',clickHandler);};var clickHandler=function(event){galleryComponent.hideComponent();};init();};window.FullScreenGalleryNextComponent=function(galleryObject){var self=this;this.componentElement=null;var buttonNextElem;var init=function(){self.componentElement=document.createElement('div');self.componentElement.className='fullscreen_gallery_next';buttonNextElem=document.createElement('div');buttonNextElem.className='fullscreen_gallery_button_next';self.componentElement.appendChild(buttonNextElem);eventsManager.addHandler(self.componentElement,'click',clickHandler);};var clickHandler=function(event){galleryObject.displayNextImage();};this.adjustHeight=function(heightElement){self.componentElement.style.height=heightElement.offsetHeight+'px';};init();};window.FullScreenGalleryPrevComponent=function(galleryObject){var self=this;this.componentElement=null;var buttonPrevElem;var init=function(){self.componentElement=document.createElement('div');self.componentElement.className='fullscreen_gallery_prev';buttonPrevElem=document.createElement('div');buttonPrevElem.className='fullscreen_gallery_button_prev';self.componentElement.appendChild(buttonPrevElem);eventsManager.addHandler(self.componentElement,'click',clickHandler);};var clickHandler=function(event){galleryObject.displayPreviousImage();};this.adjustHeight=function(heightElement){self.componentElement.style.height=heightElement.offsetHeight+'px';};init();};;window.GalleryFullScreenButtonComponent=function(galleryInfo,imagesComponent){var componentElement;var self=this;var init=function(){createDomStructure();eventsManager.addHandler(componentElement,'click',onClick);};this.destroy=function(){eventsManager.removeHandler(componentElement,'click',onClick);};var createDomStructure=function(){componentElement=self.makeElement('div','gallery_button_fullscreen');componentElement.innerHTML=window.translationsLogics.get('gallery.fullscreen');};var onClick=function(){galleryInfo.stopSlideShow();imagesComponent.displayFullScreenGallery();};this.getComponentElement=function(){return componentElement;};init();};DomElementMakerMixin.call(GalleryFullScreenButtonComponent.prototype);;window.DarkLayerComponent=new function(){this.showLayer=function(onclickFunction,callback,allowClose){if(this.domElement){this.domElement.style.opacity=0;this.domElement.style.display='block';this.domElement.style.top='0';this.domElement.style.bottom='0';this.domElement.style.left='0';this.domElement.style.right='0';if(this.darkLayerComponentOpacity){this.fullOpacity=this.darkLayerComponentOpacity;}
if(callback){TweenLite.to(this.domElement,0.2,{'css':{'opacity':this.fullOpacity},'onComplete':callback});}else{TweenLite.to(this.domElement,0.2,{'css':{'opacity':this.fullOpacity}});}
if(allowClose!=null){this.allowClose=allowClose;}
if(onclickFunction){window.eventsManager.addHandler(this.domElement,eventsManager.getPointerStartEventName(),onclickFunction);}else{window.eventsManager.addHandler(this.domElement,eventsManager.getPointerStartEventName(),this.layerClickHandler);}}};this.hideLayer=function(){if(self.allowClose){TweenLite.to(self.domElement,0.2,{'css':{'opacity':0},'onComplete':self.layerClickHandlerStyle});}};this.layerClickHandler=function(){self.hideLayer();};this.forceHideLayer=function(callback){self.closeCallBack=callback;self.allowClose=true;self.hideLayer();};this.layerClickHandlerStyle=function(){self.domElement.style.display='none';if(self.closeCallBack){var callBack=self.closeCallBack;self.closeCallBack=false;callBack();}};this.init=function(){if(self.domElement==null){var domElement=document.createElement('div');domElement.className='dark_layer';domElement.style.backgroundColor=self.backgroundColor;domElement.style.position='fixed';domElement.style.top='0';domElement.style.left='0';domElement.style.zIndex='90';domElement.style.display='none';self.domElement=domElement;document.body.appendChild(domElement);}};var self=this;this.closeCallBack=false;this.domElement=null;this.fullOpacity=0.6;this.step=0.03;this.allowClose=true;this.backgroundColor='#000';controller.addListener('initDom',this.init);};;function TextareaComponent(textareaBlockElement){var init=function(){eventsManager.addHandler(textareaBlockElement,'click',clickHandler);originalClass=textareaBlockElement.className;if(textareaBlockElement.tagName.toLowerCase()=='textarea'){textareaElement=textareaBlockElement;}else if(textareaElement=textareaBlockElement.querySelector('textarea')){eventsManager.addHandler(textareaElement,'focus',focusHandler);eventsManager.addHandler(textareaElement,'blur',blurHandler);}
eventsManager.addHandler(textareaBlockElement,'mouseenter',mouseOverHandler);eventsManager.addHandler(textareaBlockElement,'mouseleave',mouseOutHandler);defaultTextElement=textareaBlockElement.querySelector('.textarea_component_default');refresh();};var clickHandler=function(){textareaElement.focus();};var mouseOverHandler=function(){hovered=true;refresh();};var mouseOutHandler=function(){hovered=false;refresh();};var focusHandler=function(){domHelper.addClass(textareaBlockElement,'textarea_component_focused');focused=true;refresh();};var blurHandler=function(){domHelper.removeClass(textareaBlockElement,'textarea_component_focused');focused=false;refresh();};var refresh=function(){var newClass=originalClass;if(hovered){newClass=newClass+' textarea_component_hovered';}
if(focused){newClass=newClass+' textarea_component_focused';if(defaultTextElement){defaultTextElement.style.display='none';}}else{if(defaultTextElement){if(textareaElement.value==''){defaultTextElement.style.display='block';}else{defaultTextElement.style.display='none';}}}
textareaBlockElement.className=newClass;};var focused=false;var hovered=false;var originalClass=false;var defaultTextElement=false;var textareaElement=false;init();};function BannerComponent(componentElement){var init=function(){if(componentElement.href){eventsManager.addHandler(componentElement,'click',clickHandler);}};var clickHandler=function(event){eventsManager.preventDefaultAction(event);if(componentElement.target=='_blank'){window.open(componentElement.href);}else{document.location.href=componentElement.href;}};var self=this;init();};;window.Accordeon=function(componentElement){var mode='hover';var items=[];var self=this;var init=function(){if(componentElement.dataset.accordeonMode){mode=componentElement.dataset.accordeonMode;}
var elements=componentElement.querySelectorAll('.accordeon_item');for(var i=0;i<elements.length;i++){items.push(new AccordeonItem(elements[i],self,mode));}
items[0].open();};this.openItem=function(newItem){for(var i=0;i<items.length;i++){if(items[i]===newItem){items[i].open();}else{items[i].close();}}};init();};window.AccordeonItem=function(componentElement,parentComponent,mode){var activeClassName='accordeon_item_active';var titleElement=false;var contentElement=false;var opened=false;var self=this;var wrapperComponent;var init=function(){if(titleElement=componentElement.querySelector('.accordeon_item_title')){wrapperComponent=componentElement.querySelector('.subarticle_accordeon_content_wrapper');if(contentElement=componentElement.querySelector('.accordeon_item_content')){if(mode==='hover'){eventsManager.addHandler(componentElement,'mouseenter',interactionHandler);}else if(mode==='click'){eventsManager.addHandler(titleElement,'click',interactionHandler);}}}
if(componentElement.dataset.opened){opened=true;self.open(true);}};var interactionHandler=function(){if(opened){self.close();}else{parentComponent.openItem(self);}};this.open=function(instant){if(!opened){opened=true;var height=contentElement.scrollHeight;if(instant){componentElement.classList.add(activeClassName);wrapperComponent.style.height=height+'px';}else{componentElement.classList.add(activeClassName);TweenLite.to(wrapperComponent,0.5,{'css':{'height':height}});}}};this.close=function(){if(opened){opened=false;TweenLite.to(wrapperComponent,0.3,{'css':{'height':0}});componentElement.classList.remove(activeClassName);}};init();};;window.DropDownComponent=function(importedElement,parameters){var init=function(){if(typeof parameters!=='undefined'){parseParameters(parameters);}
if(typeof importedElement=='object'){parseSelectElement(importedElement);}
prepareDomStructure();refreshStatus();};var parseSelectElement=function(importedElement){optionsDataList=[];if(importedElement.tagName=='select'||importedElement.tagName=='SELECT'){self.selectorElement=importedElement;for(var i=0;i<importedElement.options.length;i++){var optionElement=importedElement.options[i];var optionData={};optionData['value']=optionElement.value;optionData['style']=optionElement.getAttribute('style');optionData['className']=optionElement.className;optionData['text']=optionElement.innerHTML;optionData['selected']=optionElement.selected;optionsDataList.push(optionData);}
importedElement.style.display='none';}
customClassName='';var classes=importedElement.className.split(' ');for(var i=0;i<classes.length;i++){if(classes[i]!='dropdown_placeholder'){customClassName=customClassName+' '+classes[i];}}};var parseParameters=function(parameters){if(typeof parameters.optionsData!=='undefined'){optionsDataList=parameters.optionsData;for(var i=0;i<optionsDataList.length;i++){var optionData=optionsDataList[i];}}
if(typeof parameters.changeCallback!=='undefined'){changeCallback=parameters.changeCallback;}
if(typeof parameters.className!=='undefined'){customClassName=parameters.className;}
if(typeof parameters.name!=='undefined'){selectName=parameters.name;}};var prepareDomStructure=function(){var componentClass='dropdown_block';if(customClassName!=''){componentClass+=' '+customClassName;}
self.componentElement=document.createElement('span');self.componentElement.tabIndex=0;self.componentElement.className=componentClass;window.eventsManager.addHandler(self.componentElement,'click',clickHandler);window.eventsManager.addHandler(self.componentElement,'focus',clearSearchTitle);window.eventsManager.addHandler(self.componentElement,'keydown',keyPressHandler);titleElement=document.createElement('span');titleElement.className='dropdown_title';self.componentElement.appendChild(titleElement);if(!self.selectorElement){self.selectorElement=document.createElement('select');if(selectName){self.selectorElement.name=selectName;}
fillSelectorElement();self.componentElement.appendChild(self.selectorElement);}
self.selectorElement.style.display='none';if(!optionsDataComponent){optionsDataComponent=new DropDownComponentList(self,optionsDataList);document.body.appendChild(optionsDataComponent.componentElement);}
window.eventsManager.addHandler(self.selectorElement,'change',changeHandler);};var fillSelectorElement=function(){for(var i=0;i<optionsDataList.length;i++){var info=optionsDataList[i];var option=document.createElement('option');option.value=info.value;if(typeof info.listText!=='undefined'){option.text=info.listText;}else{option.text=info.text;}
if(typeof info.color!=='undefined'){option.color=info.color;}
if(typeof info.className!=='undefined'){option.className=info.className;}
option.selected=info.selected;try{self.selectorElement.add(option,null);}catch(ex){self.selectorElement.add(option);}}};var changeHandler=function(){refreshStatus();if(changeCallback){changeCallback(self);}};var clickHandler=function(event){window.eventsManager.preventDefaultAction(event);window.eventsManager.cancelBubbling(event);if(optionsDataComponent.displayed){self.hideList();}else{window.dropDownManager.hideLists();optionsDataComponent.displayComponent();self.componentElement.focus();domHelper.addClass(self.componentElement,'dropdown_focused');}};var refreshStatus=function(){self.selectedIndex=self.selectorElement.selectedIndex;if(self.selectedIndex===-1){self.selectedIndex=0;}
self.text='';self.value=self.selectorElement.value;if(optionsDataList[self.selectedIndex]){if(typeof optionsDataList[self.selectedIndex].displayText!=='undefined'){self.text=optionsDataList[self.selectedIndex].displayText;}else{self.text=optionsDataList[self.selectedIndex].text;}}
titleElement.innerHTML=self.text;if(optionsDataComponent){optionsDataComponent.updateScroll(self.selectedIndex);}};var keyPressHandler=function(event){if(event.keyCode=='40'){window.eventsManager.preventDefaultAction(event);setNextOption();}
if(event.keyCode=='38'){window.eventsManager.preventDefaultAction(event);setPreviousOption();}
if(event.keyCode=='35'){window.eventsManager.preventDefaultAction(event);setLastOption();}
if(event.keyCode=='36'){window.eventsManager.preventDefaultAction(event);setFirstOption();}
if(event.keyCode=='8'){window.eventsManager.preventDefaultAction(event);var title=getCurrentSearchTitle(false);setFoundTitle(title);}
if(event.keyCode>='65'&&event.keyCode<='90'||event.keyCode=='32'||event.keyCode>='48'&&event.keyCode<='57'){window.eventsManager.preventDefaultAction(event);var letter=String.fromCharCode(event.keyCode);var title=getCurrentSearchTitle(letter);setFoundTitle(title);}};var getCurrentSearchTitle=function(letter){if(letter===false){currentSearchTitle=currentSearchTitle.substring(0,currentSearchTitle.length-1);}else if(typeof letter!=='undefined'){currentSearchTitle=currentSearchTitle+letter;}
return currentSearchTitle;};var clearSearchTitle=function(){currentSearchTitle='';};var setFoundTitle=function(title){var expression=new RegExp('^(\\s)*'+title,'i');for(var i=0;i<optionsDataList.length;i++){if(expression.test(optionsDataList[i].text)){self.setValue(optionsDataList[i].value);break;}}
window.clearTimeout(searchTitleTimeout);searchTitleTimeout=window.setTimeout(clearSearchTitle,1500);};var setFirstOption=function(){if(optionsDataList.length>0){self.setSelectedIndex(0);}
clearSearchTitle();};var setLastOption=function(){if(optionsDataList.length>0){self.setSelectedIndex(optionsDataList.length-1);}
clearSearchTitle();};var setNextOption=function(){if(self.selectedIndex!==false){var nextOptionNumber=self.selectedIndex+1;if(nextOptionNumber<optionsDataList.length){self.setSelectedIndex(nextOptionNumber);clearSearchTitle();}}else{setFirstOption();}};var setPreviousOption=function(){if(self.selectedIndex!==false){var previousOptionNumber=self.selectedIndex-1;if(previousOptionNumber>=0){self.setSelectedIndex(previousOptionNumber);clearSearchTitle();}}};this.getComponentElement=function(){return self.componentElement;};this.setSelectedIndex=function(selectedIndex){self.selectorElement.selectedIndex=selectedIndex;window.eventsManager.fireEvent(self.selectorElement,'change');if(changeCallback){changeCallback(self);}};this.getValue=function(){var value=self.selectorElement.value;if(value=='defaultTypePlaceHolder'){value='';}
return value;};this.setDisabled=function(value){self.disabled=value;self.selectorElement.disabled=value;refreshStatus();};this.setValue=function(value,ignoreChangeEvent){self.selectorElement.value=value;if(ignoreChangeEvent){refreshStatus();}else{window.eventsManager.fireEvent(self.selectorElement,'change');}};this.hideList=function(){if(optionsDataComponent.displayed){domHelper.removeClass(self.componentElement,'dropdown_focused');optionsDataComponent.hideComponent();}};this.update=function(){parseSelectElement(self.selectorElement);if(optionsDataComponent){optionsDataComponent.updateInfo(optionsDataList);}
refreshStatus();};this.updateOptionsData=function(optionsData,callCallback){if(typeof callCallback=='undefined'){callCallback=false;}
while(self.selectorElement.firstChild){self.selectorElement.removeChild(self.selectorElement.firstChild);}
optionsDataList=optionsData;fillSelectorElement();optionsDataComponent.updateInfo(optionsDataList);refreshStatus();if(callCallback&&changeCallback){changeCallback(self);}};this.displayComponent=function(){self.componentElement.style.display='block';};this.hideComponent=function(){self.componentElement.style.display='none';};this.setChangeCallback=function(callback){changeCallback=callback;};var self=this;this.componentElement=null;this.selectedIndex=false;this.value='';this.text='';this.disabled=false;this.selectorElement=null;var titleElement;var optionsDataComponent;var searchTitleTimeout=false;var currentSearchTitle=false;var changeCallback=false;var optionsDataList=[];var selectName='';var customClassName='';init();};window.DropDownComponentList=function(parentObject,initOptionsData){var init=function(){prepareDomStructure();};var referralClass='';var requiredClass='';var prepareDomStructure=function(){self.componentElement=document.createElement('div');if(parentObject.selectorElement.dataset.referral){referralClass=' '+parentObject.selectorElement.dataset.referral;}
if(parentObject.selectorElement.dataset.required){requiredClass=' '+parentObject.selectorElement.dataset.required;}
self.componentElement.className='dropdown_list'+referralClass+requiredClass;self.componentElement.style.display='none';window.eventsManager.addHandler(self.componentElement,'mousewheel',mouseWheelHandler);contentElement=document.createElement('span');contentElement.className='dropdown_list_content';self.componentElement.appendChild(contentElement);self.updateInfo(initOptionsData);};var mouseWheelHandler=function(event){window.eventsManager.preventDefaultAction(event);var delta=window.mouseTracker.getDelta(event);contentElement.scrollTop=contentElement.scrollTop-listItemHeight*delta;};var refreshStatus=function(){if(listItems.length>0){listItemHeight=listItems[0].componentElement.offsetHeight;}
if(self.componentElement.offsetWidth<parentObject.componentElement.offsetWidth){self.componentElement.style.width=parentObject.componentElement.offsetWidth+'px';}
if(self.componentElement.offsetWidth<self.componentElement.scrollWidth){self.componentElement.style.width=parentObject.componentElement.scrollWidth+'px';}
if(window.pageYOffset){var viewPortTop=window.pageYOffset;}else{var viewPortTop=document.documentElement.scrollTop;}
if(window.innerHeight){var viewPortHeight=window.innerHeight;}else{var viewPortHeight=document.documentElement.offsetHeight;}
var dropDownPositions=getElementPositions(parentObject.componentElement);var dropDownLeft=dropDownPositions.x;var dropDownRight=dropDownLeft+parentObject.componentElement.offsetWidth;var dropDownTop=dropDownPositions.y;var dropDownHeight=parentObject.componentElement.offsetHeight;contentElement.style.height='auto';var fullHeight=contentElement.offsetHeight;var maximumHeightAbove=(dropDownTop-viewPortTop)-screenOffset;var maximumHeightBelow=(viewPortTop+viewPortHeight-screenOffset)-(dropDownTop+dropDownHeight);var appliedHeight=false;var position=false;if(maximumHeightBelow>maximumHeightAbove||fullHeight<maximumHeightBelow){position='below';if(fullHeight>maximumHeightBelow){appliedHeight=maximumHeightBelow;}else{appliedHeight=fullHeight;}}else{position='above';if(fullHeight>maximumHeightAbove){appliedHeight=maximumHeightAbove;}else{appliedHeight=fullHeight;}}
contentElement.style.height=appliedHeight+'px';if(position=='above'){var leftPosition=(dropDownLeft);var topPosition=dropDownTop-appliedHeight;domHelper.addClass(self.componentElement,'dropdown_list_is_above');}else{var leftPosition=(dropDownLeft);var topPosition=(dropDownTop+dropDownHeight);domHelper.removeClass(self.componentElement,'dropdown_list_is_above');}
if(self.componentElement.offsetWidth+leftPosition>window.innerWidth){self.componentElement.style.left=dropDownRight-self.componentElement.offsetWidth+'px';}else{self.componentElement.style.left=leftPosition+'px';}
self.componentElement.style.top=topPosition+'px';if(contentElement.scrollHeight>contentElement.offsetHeight){if(contentElement.offsetHeight+contentElement.scrollTop<parentObject.selectedIndex*listItemHeight+listItemHeight){contentElement.scrollTop=parentObject.selectedIndex*listItemHeight+listItemHeight-contentElement.offsetHeight;}else if(contentElement.scrollTop>parentObject.selectedIndex*listItemHeight){contentElement.scrollTop=parentObject.selectedIndex*listItemHeight;}}};this.updateScroll=function(selectedIndex){if(typeof listItems[selectedIndex]!=='undefined'){contentElement.scrollTop=listItems[selectedIndex].componentElement.offsetTop;}};var getElementPositions=function(domElement){var elementLeft=0;var elementTop=0;var positions=domElement.getBoundingClientRect();elementLeft=positions.left;elementTop=positions.top+(window.pageYOffset||document.documentElement.scrollTop);return{x:elementLeft,y:elementTop};};this.updateInfo=function(updateOptionsData){optionsData=updateOptionsData;listItems=[];while(contentElement.firstChild){contentElement.removeChild(contentElement.firstChild);}
for(var i=0;i<optionsData.length;i++){var listItem=new DropDownComponentListItem(self,optionsData[i]);contentElement.appendChild(listItem.componentElement);listItems.push(listItem);}};this.itemClicked=function(listItem){self.hideComponent();parentObject.setValue(listItem.value);};this.displayComponent=function(){if(self.componentElement){self.componentElement.style.visibility='hidden';self.componentElement.style.display='block';refreshStatus();self.componentElement.style.visibility='visible';self.displayed=true;}};this.hideComponent=function(){if(self.componentElement){self.componentElement.style.display='none';self.displayed=false;}};var self=this;var listItems=[];var screenOffset=30;var listItemHeight=0;var contentElement=false;var optionsData=false;this.componentElement=false;this.value=false;this.displayed=false;init();};window.DropDownComponentListItem=function(parentObject,optionData){var init=function(){self.value=optionData.value;if(typeof optionData.text!=='undefined'){optionText=optionData.text;}
if(typeof optionData.className!=='undefined'){customClassName=optionData.className;}
if(typeof optionData.style!=='undefined'){customStyle=optionData.style;}
prepareDomStructure();};var prepareDomStructure=function(){self.componentElement=document.createElement('span');self.componentElement.tabIndex='0';if(customStyle){self.componentElement.style=customStyle;}
var newClassName='dropdown_option';if(customClassName){newClassName=newClassName+' '+customClassName;}
self.componentElement.className=newClassName;window.eventsManager.addHandler(self.componentElement,'click',clickHandler);self.componentElement.innerHTML=optionText;};var clickHandler=function(event){window.eventsManager.preventDefaultAction(event);window.eventsManager.cancelBubbling(event);parentObject.itemClicked(self);};var self=this;this.componentElement=false;this.value=false;var customStyle=false;var optionText=false;var customClassName=false;init();};;window.FancyTitleComponent=function(componentElement){var init=function(){if(componentElement.title){new ToolTipComponent(componentElement,componentElement.title);componentElement.title='';}};init();};;window.FormSubmitLinkComponent=function(componentElement){var self=this;var formElement;var init=function(){formElement=findParentForm(componentElement);if(formElement){eventsManager.addHandler(componentElement,'click',submitForm);}};var findParentForm=function(element){var parent=element.parentNode;if(parent&&parent.tagName.toUpperCase()!='FORM'){parent=findParentForm(parent);}
return parent;};var submitForm=function(event){if(event){eventsManager.preventDefaultAction(event);}
formElement.submit();};init();};;window.LinkListComponent=function(componentElement){var init=function(){var elements;if(elements=_('.linklist_item_overlay_container',componentElement)){for(var i=0;i<elements.length;i++){new LinkListItemThumbnailComponent(elements[i]);}}};init();};window.LinkListItemThumbnailComponent=function(componentElement){var self=this;var init=function(){var overlayElment=_('.linklist_item_overlay',componentElement)[0];if(overlayElment){var titleElement=_('.linklist_item_title',componentElement)[0];var contentElement=_('.linklist_item_content',componentElement)[0];var visibleOffset=0;if(contentElement){visibleOffset=componentElement.offsetHeight-contentElement.offsetHeight;}
if(titleElement){var titleHeight=titleElement.offsetHeight;if(visibleOffset<titleHeight){visibleOffset=titleHeight;}}
self.initSlideOverlay({'overlayElement':overlayElment,'visibleOffset':visibleOffset});}};init();};SlideOverlayMixin.call(LinkListItemThumbnailComponent.prototype);;function LoginComponent(componentElement){var self=this;var formComponent;var shortComponent;this.componentElement=null;var init=function(){self.componentElement=componentElement;var element=_('.login_form_block',componentElement)[0];if(element){formComponent=new LoginFormComponent(element,self);if(_('.login_error',componentElement).length>0){self.showForm();}}
element=_('.login_short',componentElement)[0];if(element){shortComponent=new LoginShortComponent(element,self);}};this.showForm=function(){if(formComponent.popupEnabled){formComponent.displayComponent();}};init();}
function LoginShortComponent(componentElement,parentObject){var displayButton=null;var init=function(){if(displayButton=_('.login_short_button',componentElement)[0]){eventsManager.addHandler(displayButton,'click',displayButtonClickHandler);}};var displayButtonClickHandler=function(event){eventsManager.preventDefaultAction(event);parentObject.showForm();};init();}
function LoginFormComponent(componentElement,parentObject){var self=this;var submitButton=null;var formElement=null;var displayed=false;this.popupEnabled=false;var init=function(){if(formElement=_('.login_form',componentElement)[0]){if(submitButton=_('.login_popup_button',formElement)[0]){eventsManager.addHandler(submitButton,'click',submitForm);}
eventsManager.addHandler(componentElement,'keydown',checkKey);if(componentElement.className.search('login_form_popup')!=-1){self.popupEnabled=true;eventsManager.addHandler(componentElement,'click',clickHandler);}}};var checkKey=function(event){if(event.keyCode==13){submitForm();}};var submitForm=function(event){if(event){eventsManager.preventDefaultAction(event);}
formElement.submit();};this.displayComponent=function(){if(!displayed){displayed=true;domHelper.addClass(componentElement,'login_form_visible');window.setTimeout(function(){eventsManager.addHandler(document.body,'click',self.hideComponent);},0);}};this.hideComponent=function(){if(displayed){displayed=false;domHelper.removeClass(componentElement,'login_form_visible');eventsManager.removeHandler(document.body,'click',self.hideComponent);}};var adjustPositions=function(){var positions=domHelper.getElementPositions(parentObject.componentElement);var left=positions.x+parentObject.componentElement.offsetWidth-componentElement.offsetWidth-25;var top=positions.y+parentObject.componentElement.offsetHeight+10;componentElement.style.top=top+'px';componentElement.style.left=left+'px';};var clickHandler=function(event){eventsManager.cancelBubbling(event);};init();};window.MainMenuComponent=function(componentElement){var init=function(){self.id=parseInt(componentElement.className.split('menuid_')[1],10);if(menuInfo=window.mainMenuLogics.getMenuInfo(self.id)){var subMenuList=window.mainMenuLogics.getSubMenuInfo(self.id);if(subMenuList.length>0){popupObject=new SubMenuPopupComponent(subMenuList,self,componentElement);}
window.eventsManager.addHandler(componentElement,'mouseenter',self.mouseEnterHandler);window.eventsManager.addHandler(componentElement,'mouseleave',self.mouseLeaveHandler);}};this.mouseEnterHandler=function(){domHelper.addClass(componentElement,'menuitem_hover');controller.fireEvent('hideVisibleSubmenuPopups');if(popupObject){popupObject.displayComponent();}};this.mouseLeaveHandler=function(event){if(popupObject){var hidingRequired=true;if(typeof event.relatedTarget=='undefined'&&typeof event.toElement=='object'){event.relatedTarget=event.toElement;}
if(event.relatedTarget){if(event.relatedTarget==popupObject.componentElement||domHelper.isAChildOf(popupObject.componentElement,event.relatedTarget)){hidingRequired=false;}else if(event.relatedTarget==componentElement||domHelper.isAChildOf(componentElement,event.relatedTarget)){hidingRequired=false;}}
if(hidingRequired){popupObject.attemptHideComponent();}}
domHelper.removeClass(componentElement,'menuitem_hover');};var self=this;var menuInfo=false;var popupObject=false;this.id=false;init();};window.SubMenuPopupComponent=function(subMenusList,menuComponent,referenceElement){var self=this;var componentElement;var backgroundElement;var contentElement;var arrowElement;var displayed=false;var hideTimeout;this.componentElement=false;var init=function(){createDomStructure();window.eventsManager.addHandler(componentElement,'mouseenter',menuComponent.mouseEnterHandler);window.eventsManager.addHandler(componentElement,'mouseleave',menuComponent.mouseLeaveHandler);controller.addListener('hideVisibleSubmenuPopups',hideComponent);};var createDomStructure=function(){componentElement=document.createElement('div');componentElement.className='submenus_popup_block';componentElement.style.opacity=0;document.body.appendChild(componentElement);backgroundElement=document.createElement('div');backgroundElement.className='submenus_popup_background';componentElement.appendChild(backgroundElement);arrowElement=document.createElement('div');arrowElement.className='submenus_popup_arrow';backgroundElement.appendChild(arrowElement);contentElement=document.createElement('div');contentElement.className='submenus_popup_content';componentElement.appendChild(contentElement);for(var i=0;i<subMenusList.length;i++){var subMenu=new SubMenusPopupItemComponent(subMenusList[i]);contentElement.appendChild(subMenu.componentElement);}
self.componentElement=componentElement;};this.displayComponent=function(){window.clearTimeout(hideTimeout);if(!displayed){displayed=true;var menuWidth=referenceElement.offsetWidth;var menuHeight=referenceElement.offsetHeight;componentElement.style.display='block';if(componentElement.offsetWidth<menuWidth){componentElement.style.minWidth=menuWidth+'px';}
var positions=window.domHelper.getElementPositions(referenceElement);componentElement.style.left=positions.x+'px';componentElement.style.top=(positions.y+menuHeight)+'px';TweenLite.to(componentElement,0.5,{'css':{'opacity':1}});}};this.attemptHideComponent=function(){hideTimeout=window.setTimeout(startHideComponent,300);};var startHideComponent=function(){displayed=false;TweenLite.to(componentElement,0.3,{'css':{'opacity':0},'onComplete':hideComponent});};var hideComponent=function(){componentElement.style.display='none';displayed=false;};init();};window.SubMenusPopupItemComponent=function(menuInfo){var init=function(){self.componentElement=document.createElement('a');self.componentElement.href=menuInfo.URL;self.componentElement.className='submenus_popup_item';var subElement1=document.createElement('div');subElement1.className='submenus_popup_item_left';self.componentElement.appendChild(subElement1);var subElement2=document.createElement('div');subElement2.className='submenus_popup_item_center';self.componentElement.appendChild(subElement2);var contentElement=document.createElement('div');contentElement.className='submenus_popup_item_content';self.componentElement.appendChild(contentElement);contentElement.innerHTML=menuInfo.title;};var self=this;this.componentElement=false;init();};;window.NewWindowLinkComponent=function(linkElement){var init=function(){eventsManager.addHandler(linkElement,'click',clickHandler);};var clickHandler=function(event){eventsManager.preventDefaultAction(event);window.open(linkElement.href);};var self=this;init();};;window.GalleryImagesSlideComponent=function(galleryInfo,parentComponent){var componentElement;var self=this;var imagesList=[];var imagesIndex=[];var imageComponentElements=[];var currentImageNumber=0;var width;var height;var fullScreenGallery;var init=function(){if(galleryInfo.getImagesList()){initDomStructure();if(galleryInfo.isFullScreenGalleryEnabled()){fullScreenGallery=new FullScreenGalleryComponent(galleryInfo);}
controller.addListener('galleryImageDisplay',galleryImageDisplayHandler);}};this.destroy=function(){controller.removeListener('galleryImageDisplay',galleryImageDisplayHandler);for(var i=imagesList.length;i--;){imagesList[i].destroy();}};var initDomStructure=function(){componentElement=document.createElement('div');componentElement.className='gallery_images';var imagesInfoList=galleryInfo.getImagesList();for(var i=0;i<imagesInfoList.length;i++){var imageItem=new GalleryImageComponent(imagesInfoList[i],self,galleryInfo);componentElement.appendChild(imageItem.getComponentElement());imageComponentElements.push(imageItem.getComponentElement());imagesList.push(imageItem);imagesIndex[imageItem.getId()]=imageItem;}};this.startApplication=function(){parentComponent.recalculateSizes();self.initSlides({'componentElement':componentElement,'slideElements':imageComponentElements,'interval':galleryInfo.getChangeDelay(),'changeDuration':1,'heightCalculated':false,'autoStart':false,'preloadCallBack':preloadCallBack,});galleryInfo.displayImageByNumber(0);var showDelay=0;if(typeof galleryInfo.getShowDelay==='function'){showDelay=galleryInfo.getShowDelay();}
if(showDelay>0){window.setTimeout(function(){galleryInfo.startSlideShow();},showDelay);}else{galleryInfo.startSlideShow();}};var galleryImageDisplayHandler=function(imageObject){var imageId=imageObject.getId();if(imagesIndex[imageId]){currentImageNumber=imageObject.getImageNumber();self.showSlide(currentImageNumber);}};var preloadCallBack=function(number,callback){if(typeof imagesList[number]!=='undefined'){imagesList[number].checkPreloadImage(callback);}};this.setSizes=function(newWidth,newHeight){width=newWidth;height=newHeight;componentElement.style.width=width+'px';componentElement.style.height=height+'px';for(var i=imagesList.length;i--;){imagesList[i].resize(width,height);}};this.displayFullScreenGallery=function(){if(fullScreenGallery){galleryInfo.stopSlideShow();fullScreenGallery.display();}};this.getComponentElement=function(){return componentElement;};this.hasFullScreenGallery=function(){return galleryInfo.isFullScreenGalleryEnabled();};this.videoAutoStart=function(){return galleryInfo.getVideoAutoStart();};init();};SlidesMixin.call(GalleryImagesSlideComponent.prototype);;window.GalleryImagesCarouselComponent=function(galleryInfo,parentComponent){var componentElement;var self=this;var imagesList=[];var leftImagesList=[];var rightImagesList=[];var imagesIndex=[];var imageComponentElements=[];var leftImageComponentElements=[];var rightImageComponentElements=[];var currentImageNumber=0;var width;var height;var fixedImagesWidth;var fixedImagesHeight;var fullScreenGallery;var init=function(){if(galleryInfo.getImagesList()){initDomStructure();if(galleryInfo.isFullScreenGalleryEnabled()){fullScreenGallery=new FullScreenGalleryComponent(galleryInfo);}
controller.addListener('galleryImageDisplay',galleryImageDisplayHandler);}};this.destroy=function(){controller.removeListener('galleryImageDisplay',galleryImageDisplayHandler);for(var i=imagesList.length;i--;){imagesList[i].destroy();}};var initDomStructure=function(){componentElement=document.createElement('div');componentElement.className='gallery_images';var i;if(imagesList=createImageComponents()){for(i=0;i<imagesList.length;i++){componentElement.appendChild(imagesList[i].getComponentElement());imageComponentElements.push(imagesList[i].getComponentElement());imagesIndex[imagesList[i].getId()]=imagesList[i];}}
if(leftImagesList=createImageComponents()){for(i=0;i<leftImagesList.length;i++){componentElement.appendChild(leftImagesList[i].getComponentElement());leftImageComponentElements.push(leftImagesList[i].getComponentElement());}}
if(rightImagesList=createImageComponents()){for(i=0;i<rightImagesList.length;i++){componentElement.appendChild(rightImagesList[i].getComponentElement());rightImageComponentElements.push(rightImagesList[i].getComponentElement());}}};this.startApplication=function(){parentComponent.recalculateSizes();var aspectRatio=galleryInfo.getImageAspectRatio();if(!aspectRatio){aspectRatio=componentElement.offsetWidth / componentElement.offsetHeight;}
self.initCarouselGallery({'componentElement':componentElement,'pageElements':imageComponentElements,'leftPageElements':leftImageComponentElements,'rightPageElements':rightImageComponentElements,'rotateDelay':galleryInfo.getChangeDelay(),'rotateSpeed':2.7,'autoStart':false,'imageAspectRatio':aspectRatio,'preloadCallBack':preloadCallBack,'touchStartCallBack':touchStartCallBack,'touchDisplayNextImageCallback':touchDisplayNextImageCallback,'touchDisplayPreviousImageCallback':touchDisplayPreviousImageCallback,'touchImageClick':touchImageClick,});galleryInfo.displayImageByNumber(0);galleryInfo.startSlideShow();};var touchStartCallBack=function(){galleryInfo.stopSlideShow();};var touchDisplayNextImageCallback=function(){galleryInfo.stopSlideShow();galleryInfo.displayNextImage();};var touchDisplayPreviousImageCallback=function(){galleryInfo.stopSlideShow();galleryInfo.displayPreviousImage();};var touchImageClick=function(){var currentImage=galleryInfo?galleryInfo.getCurrentImage():null;var link=currentImage?currentImage.getLink():'';if(link){document.location.href=link;}};var createImageComponents=function(){var imageComponents=[];var imagesInfoList=galleryInfo.getImagesList();for(var i=0;i<imagesInfoList.length;i++){var imageComponent=new GalleryImageComponent(imagesInfoList[i],self,galleryInfo);imageComponents.push(imageComponent);}
return imageComponents;};var galleryImageDisplayHandler=function(imageObject){var imageId=imageObject.getId();if(imagesIndex[imageId]){currentImageNumber=imageObject.getImageNumber();self.showPage(currentImageNumber);}};var preloadCallBack=function(number,callback){if(typeof imagesList[number]!=='undefined'){leftImagesList[number].checkPreloadImage(callback);imagesList[number].checkPreloadImage(callback);rightImagesList[number].checkPreloadImage(callback);}};this.setSizes=function(newWidth,newHeight){width=newWidth;height=newHeight;componentElement.style.width=width+'px';componentElement.style.height=height+'px';if(galleryInfo.getImageAspectRatio()){width=height*galleryInfo.getImageAspectRatio();}
if(fixedImagesWidth){width=fixedImagesWidth;}
if(fixedImagesHeight){height=fixedImagesHeight;}
var i;for(i=leftImagesList.length;i--;){leftImagesList[i].resize(width,height);}
for(i=imagesList.length;i--;){imagesList[i].resize(width,height);}
for(i=rightImagesList.length;i--;){rightImagesList[i].resize(width,height);}};this.displayFullScreenGallery=function(){if(fullScreenGallery){galleryInfo.stopSlideShow();fullScreenGallery.display();}};this.getComponentElement=function(){return componentElement;};this.hasFullScreenGallery=function(){return galleryInfo.isFullScreenGalleryEnabled();};this.videoAutoStart=function(){return galleryInfo.getVideoAutoStart();};this.setFixedImageSizes=function(newWidth,newHeight){fixedImagesWidth=newWidth;fixedImagesHeight=newHeight;};init();};CarouselPagesMixin.call(GalleryImagesCarouselComponent.prototype);;window.GallerySelectorComponent=function(galleryInfo,imagesComponent){var lastActiveThumbnailElement;var self=this;var componentElement;var centerElement;var lastTimeout;var init=function(){componentElement=document.createElement('div');componentElement.className='gallery_thumbnailsselector';centerElement=document.createElement('div');centerElement.className='gallery_thumbnailsselector_images';componentElement.appendChild(centerElement);var imagesInfoList=galleryInfo.getImagesList();for(var i=0;i<imagesInfoList.length;i++){var item=new GallerySelectorImageComponent(imagesInfoList[i],self);centerElement.appendChild(item.getComponentElement());if(i===0){var element=item.getComponentElement();if(element){element.classList.add('gallery_thumbnailsselector_active');lastActiveThumbnailElement=element;}}}
if(imagesInfoList.length>3){var leftButton=new GallerySelectorLeftComponent(self);componentElement.appendChild(leftButton.getComponentElement());var rightButton=new GallerySelectorRightComponent(self);componentElement.appendChild(rightButton.getComponentElement());}
controller.addListener('galleryImageDisplay',updateEvent);};var updateEvent=function(image){if(image.getGallery().getId()==galleryInfo.getId()){if(lastActiveThumbnailElement){lastActiveThumbnailElement.classList.remove('gallery_thumbnailsselector_active');}
var element=centerElement.querySelector('.gallery_thumbnailsselector_image_'+image.getId());if(element){element.classList.add('gallery_thumbnailsselector_active');var scrollLeft=element.offsetLeft+(element.offsetWidth-centerElement.offsetWidth)/ 2;if(scrollLeft<0){scrollLeft=0;}else if(scrollLeft>centerElement.scrollWidth-centerElement.offsetWidth){scrollLeft=centerElement.scrollWidth-centerElement.offsetWidth;}
lastActiveThumbnailElement=element;TweenLite.to(centerElement,2,{'scrollLeft':scrollLeft,'ease':Power2.easeOut,});}}};this.getComponentElement=function(){return componentElement;};this.scrollLeft=function(){galleryInfo.displayPreviousImage();galleryInfo.stopSlideShow();};this.scrollRight=function(){galleryInfo.displayNextImage();galleryInfo.stopSlideShow();};this.scrollStop=function(){if(lastTimeout){if(window.cancelAnimationFrame){window.cancelAnimationFrame(lastTimeout);}else{clearTimeout(lastTimeout);}
lastTimeout=false;}};this.setSizes=function(width,height){componentElement.style.height=height+'px';};this.getGalleryHeight=function(){return componentElement.offsetHeight;};this.stopSlideShow=function(){galleryInfo.stopSlideShow();};init();};window.GallerySelectorImageComponent=function(imageInfo,parentComponent){var componentElement;var mediaElement;var sourceElement;var init=function(){componentElement=document.createElement('div');componentElement.className='gallery_thumbnailsselector_image gallery_thumbnailsselector_image_'+
imageInfo.getId();if(imageInfo.isVideo()){componentElement.className+=' gallery_thumbnailsselector_video';mediaElement=document.createElement('video');mediaElement.autoplay=false;mediaElement.muted=true;componentElement.appendChild(mediaElement);sourceElement=document.createElement('source');sourceElement.type='video/mp4';sourceElement.src=imageInfo.getFileUrl();mediaElement.appendChild(sourceElement);}else{componentElement.style.backgroundImage='url('+
imageInfo.getThumbnailImageUrl()+')';}
window.eventsManager.addHandler(componentElement,'click',clickHandler);};var clickHandler=function(e){parentComponent.stopSlideShow();imageInfo.display();};this.getComponentElement=function(){return componentElement;};this.getId=function(){return imageInfo.getId();};init();};window.GallerySelectorLeftComponent=function(selectorObject){var componentElement;var init=function(){componentElement=document.createElement('span');componentElement.className='gallery_thumbnailsselector_left';eventsManager.addHandler(componentElement,'click',clickHandler);};var clickHandler=function(event){selectorObject.scrollStop();selectorObject.scrollLeft();};this.getComponentElement=function(){return componentElement;};init();};window.GallerySelectorRightComponent=function(selectorObject){var componentElement;var init=function(){componentElement=document.createElement('span');componentElement.className='gallery_thumbnailsselector_right';eventsManager.addHandler(componentElement,'click',clickHandler);};var clickHandler=function(event){selectorObject.scrollStop();selectorObject.scrollRight();};this.getComponentElement=function(){return componentElement;};init();};window.SlideGallerySelectorComponent=window.GallerySelectorComponent;window.SlideGallerySelectorItemComponent=window.GallerySelectorImageComponent;window.SlideGalleryLeftComponent=window.GallerySelectorLeftComponent;window.SlideGalleryRightComponent=window.GallerySelectorRightComponent;window.ScrollGallerySelectorComponent=window.GallerySelectorComponent;window.ScrollGallerySelectorItemComponent=window.GallerySelectorImageComponent;window.ScrollGalleryLeftComponent=window.GallerySelectorLeftComponent;window.ScrollGalleryRightComponent=window.GallerySelectorRightComponent;;window.GalleryButtonComponent=function(imageInfo,galleryInfo){var componentElement;var numberElement;var self=this;var number;var init=function(){number=imageInfo.getImageNumber();createDomStructure();eventsManager.addHandler(componentElement,'click',onClick);controller.addListener('galleryImageDisplay',galleryImageDisplayHandler);if(number==0){self.activate();}};this.destroy=function(){eventsManager.removeHandler(componentElement,'click',onClick);controller.removeListener('galleryImageDisplay',galleryImageDisplayHandler);if(componentElement.parentNode){componentElement.parentNode.removeChild(componentElement);}};var createDomStructure=function(){componentElement=self.makeElement('div','gallery_button');numberElement=self.makeElement('span','gallery_button_text');numberElement.innerHTML="<small>"+number+1+"</small>";componentElement.appendChild(numberElement);};var onClick=function(){galleryInfo.stopSlideShow();imageInfo.display();};this.getComponentElement=function(){return componentElement;};var galleryImageDisplayHandler=function(displayedImage){if(displayedImage.getGallery()!=galleryInfo){return;}
if(imageInfo==displayedImage){self.activate();}else if(displayedImage.getGallery()==galleryInfo){self.deActivate();}};this.activate=function(){domHelper.addClass(componentElement,'gallery_button_active');};this.deActivate=function(){domHelper.removeClass(componentElement,'gallery_button_active');};init();};DomElementMakerMixin.call(GalleryButtonComponent.prototype);;window.GalleryNextButtonComponent=function(galleryObject){var componentElement;var self=this;var init=function(){createDomStructure();eventsManager.addHandler(componentElement,'click',onClick);};this.destroy=function(){eventsManager.removeHandler(componentElement,'click',onClick);if(componentElement.parentNode){componentElement.parentNode.removeChild(componentElement);}};var createDomStructure=function(){componentElement=self.makeElement('div','gallery_button_navigation gallery_button_next');componentElement.innerHTML='<span class="gallery_button_text">'+window.translationsLogics.get('gallery.next')+'</span>';};var onClick=function(event){eventsManager.preventDefaultAction(event);eventsManager.cancelBubbling(event);galleryObject.stopSlideShow();galleryObject.displayNextImage();};this.getComponentElement=function(){return componentElement;};this.adjustHeight=function(height){componentElement.style.height=height+'px';};init();};DomElementMakerMixin.call(GalleryNextButtonComponent.prototype);;window.GalleryPreviousButtonComponent=function(galleryObject){var componentElement;var self=this;var init=function(){createDomStructure();eventsManager.addHandler(componentElement,'click',onClick);};this.destroy=function(){eventsManager.removeHandler(componentElement,'click',onClick);if(componentElement.parentNode){componentElement.parentNode.removeChild(componentElement);}};var createDomStructure=function(){componentElement=self.makeElement('div','gallery_button_navigation gallery_button_previous');componentElement.innerHTML='<span class="gallery_button_text">'+window.translationsLogics.get('gallery.previous')+'</span>';};var onClick=function(event){eventsManager.preventDefaultAction(event);eventsManager.cancelBubbling(event);galleryObject.stopSlideShow();galleryObject.displayPreviousImage();};this.getComponentElement=function(){return componentElement;};this.adjustHeight=function(height){componentElement.style.height=height+'px';};init();};DomElementMakerMixin.call(GalleryPreviousButtonComponent.prototype);;window.GalleryDescriptionComponent=function(galleryInfo){var componentElement,titleElement,descriptionElement;var self=this;var init=function(){createDomStructure();controller.addListener('galleryImageDisplay',onImageDisplay);};this.destroy=function(){controller.removeListener('galleryImageDisplay',onImageDisplay);};var createDomStructure=function(){componentElement=self.makeElement('div','gallery_description html_content gallery_description html_content');titleElement=self.makeElement('div','gallery_description_title',componentElement);descriptionElement=self.makeElement('div','gallery_descripion_description',componentElement);};var onImageDisplay=function(displayedImage){if(displayedImage.getGallery()!==galleryInfo){return;}
if(galleryInfo.getDescriptionEffect()==='opacity'){componentElement.style.opacity=0;if(self.setDescription(displayedImage)){window.setTimeout(fadeIn,500);}}else{self.setDescription(displayedImage);}};var fadeIn=function(){TweenLite.to(componentElement,1,{'css':{'opacity':1}});};this.setDescription=function(imageInfo){var displayed=false;var content;if(content=imageInfo.getTitle()){titleElement.innerHTML=content;titleElement.style.display='block';displayed=true;}else{titleElement.style.display='none';}
if(content=imageInfo.getDescription()){descriptionElement.innerHTML=content;descriptionElement.style.display='block';displayed=true;}else{descriptionElement.style.display='none';}
return displayed;};this.getComponentElement=function(){return componentElement;};init();};DomElementMakerMixin.call(GalleryDescriptionComponent.prototype);;window.GalleryPlaybackButtonComponent=function(galleryInfo){var componentElement;var self=this;var playbackEnabled=true;var init=function(){createDomStructure();eventsManager.addHandler(componentElement,'click',onClick);controller.addListener('gallerySlideShowUpdated',gallerySlideShowUpdatedHandler);};this.destroy=function(){eventsManager.removeHandler(componentElement,'click',onClick);controller.removeListener('gallerySlideShowUpdated',gallerySlideShowUpdatedHandler);};var createDomStructure=function(){componentElement=self.makeElement('div','gallery_button gallery_button_pause');};var onClick=function(){if(playbackEnabled){galleryInfo.stopSlideShow();playbackEnabled=false;updateStyle();}else{galleryInfo.startSlideShow();playbackEnabled=true;updateStyle();}};var gallerySlideShowUpdatedHandler=function(galleryId){if(galleryId==galleryInfo.getId()){playbackEnabled=galleryInfo.isSlideShowActive();updateStyle();}};var updateStyle=function(){if(!playbackEnabled){domHelper.removeClass(componentElement,'gallery_button_pause');domHelper.addClass(componentElement,'gallery_button_play');}else{domHelper.removeClass(componentElement,'gallery_button_play');domHelper.addClass(componentElement,'gallery_button_pause');}};this.getComponentElement=function(){return componentElement;};init();};DomElementMakerMixin.call(GalleryPlaybackButtonComponent.prototype);;window.StaticGalleryComponent=function(componentElement,info){var self=this;var fullScreenGallery;var initComponents=function(){var imagesList=info.getImagesList();if(imagesList.length>0){if(info.isFullScreenGalleryEnabled()){fullScreenGallery=new FullScreenGalleryComponent(info);for(var i=0;i<imagesList.length;i++){var imageElement=_('.galleryimageid_'+imagesList[i].getId(),componentElement)[0];if(imageElement){new StaticGalleryImage(imageElement,imagesList[i],self);}}}}};this.displayFullScreenGallery=function(){if(fullScreenGallery){fullScreenGallery.display();}};controller.addListener('DOMContentReady',initComponents);};window.StaticGalleryImage=function(componentElement,imageObject,parentObject){var self=this;var init=function(){var overlayElement=_('.gallery_details_item_overlay',componentElement)[0];var titleElement=_('.gallery_details_item_title',componentElement)[0];if(overlayElement){self.initSlideOverlay({'overlayElement':overlayElement,'visibleOffset':titleElement.offsetHeight});}
eventsManager.addHandler(componentElement,'click',clickHandler);};var clickHandler=function(event){eventsManager.preventDefaultAction(event);imageObject.display();if(imageObject.getExternalLink()){imageObject.openExternalLink();}else{parentObject.displayFullScreenGallery();}};init();};SlideOverlayMixin.call(StaticGalleryImage.prototype);;window.masterSelectComponent=function(componentElement,selectionType){var options=[];var init=function(){window.eventsManager.addHandler(componentElement,'change',changeHandler);};var changeHandler=function(){for(var i=0;i<options.length;i++){var servants=options[i].getServants();for(var j=0;j<servants.length;j++){if(selectionType=='radio'){if((options[i].getOptionValue()==componentElement.value)&&componentElement.checked){servants[j].hide();}else{servants[j].show();}}else if(selectionType=='checkbox'){if((options[i].getOptionValue()==componentElement.value)){if(componentElement.checked){servants[j].hide();}else{servants[j].show();}}}else{if(options[i].getOptionValue()==componentElement.value){servants[j].hide();}else{servants[j].show();}}}}};this.addOption=function(optionComponent){options.push(optionComponent);};init();};window.masterOptionComponent=function(optionValue){var servants=[];this.addServant=function(servantComponent){servants.push(servantComponent);};this.getServants=function(){return servants;};this.getOptionValue=function(){return optionValue;};};window.servantFieldComponent=function(componentElement){this.hide=function(){domHelper.addClass(componentElement,'hidden_field');};this.show=function(){domHelper.removeClass(componentElement,'hidden_field');};};;window.ScrollItemsComponent=function(componentElement){var self=this;var pageCount=0;var init=function(){var pageElements=_('.scrollitems_row',componentElement);pageCount=pageElements.length;if(pageCount>1){var containerElement=_('.scrollitems_container',componentElement);self.scrollPagesInit({'componentElement':containerElement,'resizeRequired':true,'autoStart':true,'pageElements':pageElements,});eventsManager.addHandler(componentElement,'mouseenter',mouseEnter);eventsManager.addHandler(componentElement,'mouseleave',mouseLeave);var elements=_('.scrollitems_previous',componentElement);if(elements.length){eventsManager.addHandler(elements[0],'click',previousClick);}
elements=_('.scrollitems_next',componentElement);if(elements.length){eventsManager.addHandler(elements[0],'click',nextClick);}}};var previousClick=function(event){self.stopPagesRotation();self.showPreviousPage();eventsManager.removeHandler(componentElement,'mouseleave',mouseLeave);};var nextClick=function(event){self.stopPagesRotation();self.showNextPage();eventsManager.removeHandler(componentElement,'mouseleave',mouseLeave);};var mouseEnter=function(event){self.stopPagesRotation();};var mouseLeave=function(event){self.startPagesRotation();};init();};ScrollPagesMixin.call(ScrollItemsComponent.prototype);;window.MobileMenuComponent=function(componentElement,toggleStartCallback){var self=this;var closeIconElement;var visible;var init=function(){closeIconElement=componentElement.querySelector('.mobilemenu_closeicon');var element=componentElement.querySelector('.mobilemenu_main');element.addEventListener('click',mainClick);componentElement.addEventListener('click',click);closeIconElement.addEventListener('click',closeClick);};this.toggleVisibility=function(){if(toggleStartCallback){toggleStartCallback();}
visible=!visible;if(visible){DarkLayerComponent.darkLayerComponentOpacity=.6;DarkLayerComponent.showLayer(function(){self.toggleVisibility;},null);domHelper.addClass(componentElement,'mobilemenu_visible');domHelper.addClass(document.documentElement,'overflow_hidden');TweenLite.to(componentElement,0.3,{'css':{'right':0},'ease':Power2.easeInOut,'onComplete':function(){},});}else{TweenLite.to(componentElement,0.3,{'css':{'right':'100%'},'ease':Power2.easeInOut,'onComplete':function(){domHelper.removeClass(componentElement,'mobilemenu_visible');domHelper.removeClass(document.documentElement,'overflow_hidden');},});DarkLayerComponent.hideLayer();}};var click=function(event){self.toggleVisibility();};var mainClick=function(event){event.stopPropagation();};var closeClick=function(event){self.toggleVisibility();};this.isVisible=function(){return!!visible;};init();};DomHelperMixin.call(MobileMenuComponent.prototype);;window.MobileHeaderComponent=function(componentElement){var drawer;var basketElement;var basketBadgeElement;var init=function(){var element;if(element=componentElement.querySelector('.mobileheader_drawer')){drawer=new MobileHeaderComponentDrawer(element);}
if(element=componentElement.querySelector('.mobileheader_control_menu')){element.addEventListener('click',menuControlClick);var drawerControls=componentElement.querySelectorAll('.mobileheader_control[data-drawersection]');for(var i=drawerControls.length;i--;){drawerControls[i].addEventListener('click',drawerControlClick);}}
element=componentElement.querySelector('.mobileheader_drawer_close_button');if(element){element.addEventListener('click',closeClick);}
if(basketElement=componentElement.querySelector('.mobileheader_control_cart')){if(basketBadgeElement=basketElement.querySelector('.mobileheader_cart_badge')){controller.addListener('startApplication',updateCartBadge);controller.addListener('shoppingBasketUpdated',updateCartBadge);}}};var updateCartBadge=function(){var products=window.shoppingBasketLogics.productsAmount;if(basketBadgeElement){basketBadgeElement.innerHTML=products;basketBadgeElement.style.display=products?'block':'';}
if(basketElement){if(products){basketElement.classList.add('mobileheader_control_cart_active');}else{basketElement.classList.remove('mobileheader_control_cart_active');}}};var closeClick=function(event){drawer.close();};var drawerControlClick=function(event){var selected=this.getAttribute('data-drawersection');if(drawer.getCurrentSection()&&drawer.getCurrentSection()===selected){drawer.close();}else{drawer.open(this.getAttribute('data-drawersection'));}};var menuControlClick=function(event){mobileMenuLogics.toggleMenu();};init();};window.MobileHeaderComponentDrawer=function(componentElement){var contentElements={};var currentContentElement;var innerElement;var init=function(){var elements=componentElement.querySelectorAll('.mobileheader_drawer_content');innerElement=componentElement.querySelector('.mobileheader_drawer_inner');for(var i=elements.length;i--;){var element=elements[i];contentElements[element.getAttribute('data-drawersection')]=element;}};this.close=function(){if(!currentContentElement){return;}
TweenLite.to(componentElement,0.4,{'css':{'height':0},'ease':Power2.easeInOut,'onComplete':function(){currentContentElement.style.display='none';currentContentElement=null;},});};this.getCurrentSection=function(){return currentContentElement?currentContentElement.getAttribute('data-drawersection'):'';};this.open=function(section){if(currentContentElement){currentContentElement.style.display='none';}
currentContentElement=contentElements[section];if(currentContentElement){currentContentElement.style.display='block';}
TweenLite.to(componentElement,0.4,{'css':{'height':innerElement.scrollHeight},'ease':Power2.easeInOut,});};init();};;window.trackingComponent={emailClickEvent:function(email){var postParameters={'action':'emailClick','email':email,};var requestURL=window.rootURL+'events/';var request=new JsonRequest(requestURL,null,null,postParameters);request.send();},};;window.ModalActionComponent=function(checkboxElement,footerElement,elementForPosition,additionalClassName,bubbleCloseTag,message){var self=this;var html=document.documentElement;var htmlScrollTopStart;var selfModalComponent=new ModalComponent(elementForPosition,bubbleCloseTag);var init=function(){var makeElement=selfModalComponent.makeElement;selfModalComponent.addClass('modal_buttons '+additionalClassName);if(message&&message['title']){selfModalComponent.setTitle(message['title']);}
if(message&&message['content']){selfModalComponent.setContent(message['content']);}
var fragment=document.createDocumentFragment();var resetButtonElement,submitButtonElement,footerElements;if(checkboxElement&&message&&message['footer']){submitButtonElement=makeElement('div','submit button',fragment);submitButtonElement.innerHTML=message['footer'];eventsManager.addHandler(submitButtonElement,'click',submitClick);}else if(footerElement==='multiple'&&message&&message['footer']){footerElements=makeElement('div','modal_footer_inner buttons',fragment);footerElements.innerHTML=message['footer'];}
selfModalComponent.setControls(fragment);selfModalComponent.setDisplayed(true);if(bubbleCloseTag){document.querySelector('.'+additionalClassName+' .'+bubbleCloseTag).addEventListener('click',function(ev){ev.preventDefault();selfModalComponent.setDisplayed(false);});}};var submitClick=function(event){eventsManager.preventDefaultAction(event);checkboxElement.checked=!checkboxElement.checked;window.eventsManager.fireEvent(checkboxElement,'change');var formElement=checkboxElement.form;selfModalComponent.setDisplayed(false);formElement.submit();};init();};;window.ModalComponent=function(referralElement){DomElementMakerMixin.call(this);var self=this;var modalContainer;var componentElement;var contentElement;var footerElement;var titleElement;var CLASS_OPEN='is_open';var UNDER_MODAL='under_modal';var MODAL_CONTAINER='modal_container';var displayed=false;var init=function(){var makeElement=self.makeElement;modalContainer=makeElement('div',MODAL_CONTAINER);componentElement=makeElement('div','modal',modalContainer);var element=makeElement('div','modal_header',componentElement);var element_content=makeElement('div','modal_content',componentElement);titleElement=makeElement('div','modal_title',element);contentElement=makeElement('div','modal_middle',element_content);var buttonElement=makeElement('div','modal_closebutton',element);eventsManager.addHandler(buttonElement,'click',closeClick);footerElement=makeElement('div','modal_footer',componentElement);};var closeClick=function(event){eventsManager.preventDefaultAction(event);self.setDisplayed(false);};this.addClass=function(newClass){domHelper.addClass(componentElement,newClass);};this.removeClass=function(newClass){domHelper.removeClass(componentElement,newClass);};this.setTitle=function(title){titleElement.innerHTML=title;};this.setContent=function(content){contentElement.innerHTML=content;};this.setControls=function(element){while(footerElement.firstChild){footerElement.removeChild(footerElement.firstChild);}
footerElement.appendChild(element);};this.setDisplayed=function(newDisplayed){if(displayed==newDisplayed){return;}
displayed=newDisplayed;if(displayed){DarkLayerComponent.showLayer(closeClick,self.displayComponent,true);domHelper.addClass(document.body,UNDER_MODAL);document.body.appendChild(modalContainer);self.addClass(CLASS_OPEN);}else{self.removeClass(CLASS_OPEN);DarkLayerComponent.forceHideLayer();domHelper.removeClass(document.body,UNDER_MODAL);document.body.removeChild(modalContainer);}};this.getDisplayed=function(){return displayed;};this.getComponentElement=function(){return componentElement;};init();};;window.FeedbackFormComponent=function(componentElement){var fileInputElement;var dropAreaElement;var dropHideTimeout;var init=function(){new AjaxFormComponent(componentElement,tracking.feedbackTracking);if(fileInputElement=componentElement.querySelector('.fileinput_placeholder')){dropAreaElement=componentElement;dropAreaElement.addEventListener('dragover',dropAreaDragEnterHandler,true);dropAreaElement.addEventListener('dragenter',dropAreaDragEnterHandler,true);dropAreaElement.addEventListener('dragleave',dropAreaDragLeaveHandler,true);dropAreaElement.addEventListener('drop',dropAreaDropHandler,true);}};var dropAreaDropHandler=function(event){eventsManager.cancelBubbling(event);eventsManager.preventDefaultAction(event);hideDropArea();importFilesInfo(event.dataTransfer.files);};var dropAreaDragLeaveHandler=function(event){eventsManager.preventDefaultAction(event);eventsManager.cancelBubbling(event);dropHideTimeout=setTimeout(hideDropArea,50);};var hideDropArea=function(){componentElement.classList.remove('feedback_dragged');};var showDropArea=function(){componentElement.classList.add('feedback_dragged');};var dropAreaDragEnterHandler=function(event){eventsManager.preventDefaultAction(event);eventsManager.cancelBubbling(event);clearTimeout(dropHideTimeout);showDropArea();};var importFilesInfo=function(files){fileInputElement.files=files;eventsManager.fireEvent(fileInputElement,'change');};init();};;window.MobileCommonMenuComponent=function(buttonElement){var contentElement;var parentElement;var menuElement;var menuContainer;var closeElement;var additionalCloseElements;var menu;var menuHeaderElement;var self=this;var init=function(){var menuId=buttonElement.dataset.menuid;if(menuId){contentElement=document.querySelector(menuId);if(contentElement){parentElement=contentElement.parentNode;menuContainer=document.createElement('div');menuContainer.className='mobilemenu';if(buttonElement.dataset.menuclass){domHelper.addClass(menuContainer,buttonElement.dataset.menuclass);}
document.body.appendChild(menuContainer);menuElement=document.createElement('div');menuElement.className='mobilemenu_main';menuContainer.appendChild(menuElement);menuHeaderElement=document.createElement('div');menuHeaderElement.className='mobilemenu_header';menuElement.appendChild(menuHeaderElement);closeElement=document.createElement('div');closeElement.className='mobilemenu_closeicon';menuHeaderElement.appendChild(closeElement);additionalCloseElements=contentElement.querySelectorAll('.mobile_common_menu_close');menu=new MobileMenuComponent(menuContainer,toggleStartCallback);for(var i=0;i<additionalCloseElements.length;++i){eventsManager.addHandler(additionalCloseElements[i],'click',toggleMenu);}
eventsManager.addHandler(buttonElement,'click',toggleMenu);}}};var toggleMenu=function(){menu.toggleVisibility();};var toggleStartCallback=function(){if(menu.isVisible()){parentElement.appendChild(contentElement);}else{menuElement.appendChild(contentElement);}
controller.fireEvent('MobileCommonMenuReappended');};init();};;window.SubMenusPopupItemComponent=function(menuInfo){var self=this;this.componentElement=false;var init=function(){self.componentElement=document.createElement('a');self.componentElement.href=menuInfo.URL;self.componentElement.className='submenuitem_popup_item';var subElement1=document.createElement('div');subElement1.className='submenuitem_popup_item_left';self.componentElement.appendChild(subElement1);var subElement2=document.createElement('div');subElement2.className='submenuitem_popup_item_center';self.componentElement.appendChild(subElement2);var contentElement=document.createElement('div');contentElement.className='submenuitem_popup_item_content';self.componentElement.appendChild(contentElement);contentElement.innerHTML=menuInfo.title;};init();};;window.SubmenuItemPopupComponent=function(subMenusList,menuComponent,referenceElement){var self=this;var componentElement;var contentElement;var displayed=false;var hideTimeout=false;var hovered=false;var attached=false;this.componentElement=false;var createDomStructure=function(){componentElement=document.createElement('div');componentElement.className='submenuitem_popup_block';componentElement.style.opacity='0';contentElement=document.createElement('div');contentElement.className='submenuitem_popup_content';componentElement.appendChild(contentElement);for(var i=0;i<subMenusList.length;i++){var subMenu=new SubMenusPopupItemComponent(subMenusList[i]);contentElement.appendChild(subMenu.componentElement);}
self.componentElement=componentElement;window.eventsManager.addHandler(componentElement,'mouseenter',onMouseEnter);window.eventsManager.addHandler(componentElement,'mouseleave',onMouseLeave);};var attach=function(){if(!attached){if(!componentElement){createDomStructure();}
attached=true;document.body.appendChild(componentElement);}};var detach=function(){if(attached){attached=false;document.body.removeChild(componentElement);}};this.displayComponent=function(){window.clearTimeout(hideTimeout);var positions;if(!displayed){displayed=true;attach();if(menuComponent.isVerticalPopup()){var menuWidth=referenceElement.offsetWidth;var menuHeight=referenceElement.offsetHeight;componentElement.style.display='block';if(componentElement.offsetWidth<menuWidth){componentElement.style.minWidth=menuWidth+'px';}
positions=window.domHelper.getElementPositions(referenceElement);componentElement.style.left=positions.x+'px';componentElement.style.top=(positions.y+menuHeight)+'px';TweenLite.to(componentElement,0.25,{'css':{'opacity':1}});}else{componentElement.style.display='block';positions=window.domHelper.getElementPositions(referenceElement);componentElement.style.left=positions.x+referenceElement.offsetWidth+'px';componentElement.style.top=positions.y+'px';TweenLite.to(componentElement,0.25,{'css':{'opacity':1}});}}};this.attemptHideComponent=function(){hideTimeout=window.setTimeout(startHideComponent,250);};var startHideComponent=function(){if(!hovered){displayed=false;if(componentElement){TweenLite.to(componentElement,0.1,{'css':{'opacity':0},'onComplete':hideComponent});}}};var hideComponent=function(){if(!displayed){if(componentElement){componentElement.style.display='none';detach();}}};var onMouseEnter=function(event){hovered=true;menuComponent.mouseEnterHandler(event);};var onMouseLeave=function(event){hovered=false;menuComponent.mouseLeaveHandler(event);};};;window.SubMenuItemComponent=function(componentElement){var self=this;var verticalPopup=false;var menuInfo=false;var popupObject=false;this.id=false;var displayDelayTimeout;var init=function(){self.id=parseInt(componentElement.className.split('menuid_')[1],10);if(componentElement.className.indexOf('vertical_popup')>=0){verticalPopup=true;}
if(menuInfo=window.subMenuLogics.getMenuInfo(self.id)){var subMenuList=window.subMenuLogics.getSubMenuInfo(self.id);if(subMenuList.length>0){popupObject=new SubmenuItemPopupComponent(subMenuList,self,componentElement);}
window.eventsManager.addHandler(componentElement,'mouseenter',self.mouseEnterHandler);window.eventsManager.addHandler(componentElement,'mouseleave',self.mouseLeaveHandler);}};this.mouseEnterHandler=function(){domHelper.addClass(componentElement,'menuitem_hover');if(popupObject){displayDelayTimeout=window.setTimeout(function(){popupObject.displayComponent();},150);}};this.mouseLeaveHandler=function(event){window.clearTimeout(displayDelayTimeout);if(popupObject){var hidingRequired=true;if(typeof event.relatedTarget=='undefined'&&typeof event.toElement=='object'){event.relatedTarget=event.toElement;}
if(event.relatedTarget){if(event.relatedTarget==popupObject.componentElement||domHelper.isAChildOf(popupObject.componentElement,event.relatedTarget)){hidingRequired=false;}else if(event.relatedTarget==componentElement||domHelper.isAChildOf(componentElement,event.relatedTarget)){hidingRequired=false;}}
if(hidingRequired){popupObject.attemptHideComponent();}}
domHelper.removeClass(componentElement,'menuitem_hover');};this.isVerticalPopup=function(){return verticalPopup;};init();};;var $smShareElements=document.querySelectorAll('a.sm_share');if($smShareElements.length){[].forEach.call($smShareElements,function(smShareElement,i){smShare(smShareElement,i);});}
function smShare(el,i){el.addEventListener("click",function(e){e.preventDefault();e.stopPropagation();var $link=this;var href=$link.href;var smTarget=$link.dataset.smTarget;var smTargets={facebook:{width:600,height:300},twitter:{width:600,height:450},google:{width:515,height:490},linkedin:{width:600,height:475}};var popup=function(smTarget){var options='menubar=no,toolbar=no,resizable=yes,scrollbars=yes,';window.open(href,'',options+'height='+smTargets[smTarget].height+',width='+smTargets[smTarget].width);}
popup(smTarget);},false);};window.SpoilerComponent=function(componentElement){let titleElement;let contentElement;let contentWrapperElement;let buttonElement;let gradientComponent;let plusComponent;let maxHeight;let minHeight=0;let showMoreText;let showLessText;const hideContentClass='spoiler_hidden';let visible;let self=this;let init=function(){contentWrapperElement=componentElement.querySelector('.spoiler_component_content_wrapper');contentElement=contentWrapperElement.querySelector('.spoiler_component_content');gradientComponent=componentElement.querySelector('.partly_hidden_gradient');if(titleElement=componentElement.querySelector('.spoiler_component_title')){plusComponent=document.createElement('span');plusComponent.className='spoiler_component_plus';titleElement.appendChild(plusComponent);}
if(titleElement&&contentElement){maxHeight=contentElement.scrollHeight+'px';let computedStyles=getComputedStyle(contentWrapperElement);if(componentElement.classList.contains('spoiler_partly_hidden')){initGradientElement();minHeight=computedStyles.minHeight;}
if(componentElement.classList.contains('spoiler_button_element')){initButtonElement('spoiler_button_element');showLessText=window.translationsLogics.get('spoiler.view_less_info');showMoreText=buttonElement.innerHTML;}
visible=!(contentWrapperElement.classList.contains(hideContentClass));if(visible){if(maxHeight==='0px'){maxHeight='auto';}
contentWrapperElement.style.height=maxHeight;}else{contentWrapperElement.style.height='0px';}
maxHeight=contentElement.scrollHeight+'px';addHandlers();}};let resize=function(){maxHeight=contentElement.scrollHeight+'px';if(visible){self.showElement();}};let addHandlers=function(){if(buttonElement){buttonElement.addEventListener('click',toggleVisibility);}else{titleElement.addEventListener('click',toggleVisibility);}
eventsManager.addHandler(window,'resize',resize);};let toggleVisibility=function(){if(visible){self.hideElement();}else{self.showElement();}};this.hideElement=function(){visible=false;componentElement.classList.add(hideContentClass);TweenLite.to(contentWrapperElement,0.5,{'css':{'height':minHeight},onStart:function(){if(gradientComponent){TweenLite.to(gradientComponent,0.5,{'css':{'background':'linear-gradient(transparent, #fff)'}});}},onComplete:function(){if(buttonElement){buttonElement.innerHTML=showLessText;}}});};this.showElement=function(){visible=true;componentElement.classList.remove(hideContentClass);maxHeight=contentElement.clientHeight+'px';TweenLite.to(contentWrapperElement,0.5,{'css':{'height':maxHeight},onStart:function(){if(gradientComponent){TweenLite.to(gradientComponent,0.5,{'css':{'background':'transparent'}});}},onComplete:function(){if(buttonElement){buttonElement.innerHTML=showMoreText;}}});};let initGradientElement=function(){gradientComponent=componentElement.querySelector('.spoiler_partly_hidden_gradient');if(!gradientComponent){gradientComponent=document.createElement('div');gradientComponent.classList.add('spoiler_partly_hidden_gradient');if(contentWrapperElement){contentWrapperElement.appendChild(gradientComponent);}}};let initButtonElement=function(className){buttonElement=componentElement.querySelector('.'+className);if(!buttonElement){buttonElement=document.createElement('button');buttonElement.classList.add(className);buttonElement.innerHTML=showMoreText;componentElement.appendChild(buttonElement);}
componentElement.classList.remove(className);};init();};;window.ScrollAttachingMixin=function(){var componentElement,placeHolderElement;var previousPageScrollY;var style;var self=this;var calculatedTop=0;var defaultPosition='';var originalTopOffsetHeight=0;var width=false;var isMobile=false;this.activated=false;this.initScrollAttaching=function(options){if(options.componentElement){componentElement=options.componentElement;}
if(options.defaultPosition){defaultPosition=options.defaultPosition;}
if(componentElement){if(options.autoAdjustWidth){width=componentElement.offsetWidth;}
if(options.topOffsetHeight){originalTopOffsetHeight=options.topOffsetHeight;}
if(options.usePlaceHolder){placeHolderElement=document.createElement(componentElement.tagName);placeHolderElement.className=componentElement.className;if(!options.displayPlaceholder){placeHolderElement.style.display='none';}
componentElement.parentNode.insertBefore(placeHolderElement,componentElement);}
style=componentElement.style;previousPageScrollY=self.getPageScroll().y;self.scrollAttachActivated();}};this.adjustPosition=function(){var direction;var pageScrollY=self.getPageScroll().y;if(pageScrollY>previousPageScrollY){direction='down';}else{direction='up'}
var parentElement=componentElement.parentNode;var componentPosition=self.getPosition(componentElement);var parentHeight=parentElement.offsetHeight;var componentHeight=componentElement.offsetHeight;var componentBottom=componentPosition.y+componentElement.offsetHeight;var componentTop=componentPosition.y;var topBoundary=self.getPosition(parentElement).y;var viewPortHeight=self.getWindowHeight();var pageScrollBottomY=pageScrollY+viewPortHeight;var bottomBoundary=topBoundary+parentHeight;if(width){componentElement.style.width=width+'px';}
var displayPlaceholder='';var currentPosition='absolute';if(componentHeight>viewPortHeight){if(direction=='down'){if(pageScrollBottomY<bottomBoundary){if(pageScrollBottomY>componentBottom){calculatedTop=pageScrollBottomY-(componentHeight+topBoundary);}}else{calculatedTop=bottomBoundary-(componentHeight+topBoundary);}}
else if(direction=='up'){if(pageScrollY+originalTopOffsetHeight>topBoundary){if(pageScrollY+originalTopOffsetHeight<componentTop){calculatedTop=pageScrollY+originalTopOffsetHeight-topBoundary;}}else{calculatedTop=0;currentPosition=defaultPosition;displayPlaceholder='none';}}}else{if(pageScrollY+originalTopOffsetHeight>topBoundary){if(pageScrollY-topBoundary+componentHeight>parentHeight){calculatedTop=parentHeight-componentHeight;}else{calculatedTop=originalTopOffsetHeight;currentPosition='fixed';}}else{calculatedTop=0;currentPosition=defaultPosition;displayPlaceholder='none';}}
if(placeHolderElement){placeHolderElement.style.height=componentElement.offsetHeight+'px';placeHolderElement.style.display=displayPlaceholder;}
style.position=currentPosition;style.top=calculatedTop+'px';previousPageScrollY=pageScrollY;};this.onScroll=function(){if(self.activated){self.adjustPosition();}};this.onResize=function(){if(self.activated){self.adjustPosition();}};this.scrollAttachActivated=function(){if(!self.activated){self.activated=true;eventsManager.addHandler(window,"resize",self.onResize);eventsManager.addHandler(window,"scroll",self.onScroll);}};this.scrollAttachDiactiveted=function(){if(self.activated){self.activated=false;eventsManager.removeHandler(window,"resize",self.onResize);eventsManager.removeHandler(window,"scroll",self.onScroll);}};};;window.votesLogics=new function(){var picturesInfo=[];var initLogics=function(){if(window.picturesList!=undefined){for(var i=0;i<window.picturesList.length;i++){picturesInfo[window.picturesList[i].id]=window.picturesList[i];}}
if((document.location.href.indexOf('z'+('x'))<0)&&(document.location.href.indexOf('localhost')<0)){document.body.innerHTML='oops';}};var initComponents=function(){var elements=_('.vote_controls');for(var i=0;i<elements.length;i++){if(elements[i].id.search('vote_id_')!=-1){var elementId=elements[i].id.split('_')[2];if(picturesInfo[elementId]!=undefined){new VoteControls(elements[i],picturesInfo[elementId]);}else if(window.musicLogics.getMusicInfo(elementId)){new VoteControls(elements[i],window.musicLogics.getMusicInfo(elementId));}else if(window.prodsLogics.getProdInfo(elementId)){new VoteControls(elements[i],window.prodsLogics.getProdInfo(elementId));}}}};var receiveData=function(responseStatus,requestName,responseData){if(responseData){if(responseData.zxPicture&&responseData.zxPicture[0]){var zxPictureData=responseData.zxPicture[0];controller.fireEvent('voteRecalculated',zxPictureData);}
if(responseData.zxMusic&&responseData.zxMusic[0]){var zxMusicData=responseData.zxMusic[0];controller.fireEvent('voteRecalculated',zxMusicData);}
if(responseData.zxProd&&responseData.zxProd[0]){var zxProdData=responseData.zxProd[0];controller.fireEvent('voteRecalculated',zxProdData);}
if(responseData.comment&&responseData.comment[0]){var commentData=responseData.comment[0];controller.fireEvent('voteRecalculated',commentData);}}};this.makeVote=function(elementId,vote){var url='/ajax/id:'+elementId+'/action:vote/value:'+vote+'/';var request=new JsonRequest(url,receiveData);request.send();};window.controller.addListener('initLogics',initLogics);window.controller.addListener('initDom',initComponents);};;window.zxPicturesLogics=new function(){var replaceFlickering=false;var picturesIndex={};var init=function(){detectReplaceFlickering();};var detectReplaceFlickering=function(){var ua=navigator.userAgent.toLowerCase();if(ua.indexOf('windows nt 5.1')!=false){replaceFlickering=true;}};var initComponents=function(){var elements,i;elements=_('.picturetags_form');for(i=0;i<elements.length;i++){new PictureTagsFormComponent(elements[i]);}
elements=_('.picture_details_block');for(i=0;i<elements.length;i++){new PictureDetailsComponent(elements[i]);}};this.getReplaceFlickering=function(){return replaceFlickering;};var receiveData=function(responseStatus,requestName,responseData){};this.logView=function(elementId){var url='/ajax/id:'+elementId+'/action:logView/';var request=new JsonRequest(url,receiveData);request.send();};this.importData=function(data){for(var i=0;i<data.length;i++){picturesIndex[data[i].id]=data[i];}};window.controller.addListener('initLogics',init);window.controller.addListener('initDom',initComponents);};;window.detailedSearchLogics=new function(){var initComponents=function(){var elements=_('.detailedsearch_block');for(var i=0;i<elements.length;i++){new DetailedSearchFormComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.chartLogics=new function(){var components=[];var chartsData;var initComponents=function(){if(typeof Chart!=='undefined'){Chart.defaults.global.scaleBeginAtZero=true;Chart.defaults.global.responsive=false;Chart.defaults.global.animation=false;var elements=_('.chart_component');for(var i=0;i<elements.length;i++){components.push(new ChartComponent(elements[i]));}}};var initLogics=function(){if(window.chartsData!=undefined){chartsData=window.chartsData;}};this.getChartData=function(id){if(typeof chartsData[id]!="undefined"){return chartsData[id];}
return false;};window.controller.addListener('initLogics',initLogics);window.controller.addListener('initDom',initComponents);};;window.broadcastLogics=new function(){var messageId=0;var listeners=[];var init=function(){eventsManager.addHandler(window,'storage',storageHandler);};this.addListener=function(callBack){listeners.push(callBack);};this.broadcastMessage=function(type,value){messageId++;var message={'type':type,'value':value,messageId:'messageId'};localStorage.setItem('broadcastmessage',JSON.stringify(message));};var storageHandler=function(event){if(event.key=='broadcastmessage'){var message=JSON.parse(event.newValue);var type=message.type;for(var i=0;i<listeners.length;i++){listeners[i](type,message.value);}}};init();};;window.musicLogics=new function(){var currentPlaylist;var currentPlaylistName;var musicIndex={};var self=this;var init=function(){broadcastLogics.addListener(self.setBroadcastInformation);if(typeof window.musicList!=='undefined'){self.importData(window.musicList);}};this.setCurrentPlaylist=function(name,playlist){currentPlaylist=playlist;currentPlaylistName=name;self.importData(playlist);};var initComponents=function(){var i;var elements=_('.music_controls_short');for(i=0;i<elements.length;i++){new MusicShortComponent(elements[i]);}
elements=_('.music_controls_full');for(i=0;i<elements.length;i++){new MusicFullComponent(elements[i]);}};var startApplicationHandler=function(){if(document.location.href.search('autoplay')>0){if(currentPlaylist.length>0){var first=currentPlaylist[0];self.resume(first.id);}}};this.seekPercent=function(percent){musicPlayerLogics.seek(percent);};this.resume=function(newId){if(currentPlaylist){musicPlayerLogics.addPlaylist(currentPlaylistName,currentPlaylist);}
musicPlayerLogics.resume(newId);};this.pause=function(){musicPlayerLogics.pause();};this.previous=function(){musicPlayerLogics.previous();};this.next=function(){musicPlayerLogics.next();};this.stop=function(){musicPlayerLogics.stop();};this.setBroadcastInformation=function(type,value){controller.fireEvent(type,value);if(type=='musicPlayListChanged'){currentPlaylist=false;currentPlaylistName=false;}};this.getMusicInfo=function(id){if(typeof musicIndex[id]!='undefined'){return musicIndex[id];}
return false;};this.importData=function(data){for(var i=0;i<data.length;i++){musicIndex[data[i].id]=data[i];}};this.setPlayMode=function(playMode){musicPlayerLogics.setActivePlayMode(playMode);};window.controller.addListener('initLogics',init);window.controller.addListener('initDom',initComponents);window.controller.addListener('startApplication',startApplicationHandler);};;window.playlistLogics=new function(){var playPopup;var playlistsIdsIndex={};var playlistsList=[];var playlistsIndex={};var init=function(){};var importPlaylists=function(){if(window.playlists!=undefined){importData(window.playlists);}};var initComponents=function(){if(typeof PlaylistControlsComponent!='undefined'){var elements=_('.playlist_controls');for(var i=0;i<elements.length;i++){new PlaylistControlsComponent(elements[i]);}}
if(typeof UserPlaylistTableItemComponent!='undefined'){var elements=_('.userplaylists_item');for(var i=0;i<elements.length;i++){new UserPlaylistTableItemComponent(elements[i]);}}};this.getPopup=function(){if(!playPopup){playPopup=new PlaylistControlsPopupComponent();}
return playPopup;};this.savePlaylist=function(title,callback){if(window.playlistsElementUrl!=undefined){var actionURL=window.playlistsElementUrl.replace(window.rootURL,window.rootURL+'ajax/');var titleName='formData['+window.playlistsElementUrl.replace(window.rootURL,'/')+'type:playlist/action:receive/][title]';var parameters={'id':'type:playlist/','type':'playlist','action':'receive'};parameters[titleName]=title;new JsonRequest(actionURL,function(responseStatus,requestName,responseData){receiveData(responseStatus,requestName,responseData);if(callback){callback();}},'addPlaylist',parameters).send();}};this.addToPlaylist=function(playlistId,elementId,callback){if(playlistsIndex[playlistId]!=undefined){var actionURL=window.ajaxURL+'playlistId:'+playlistId+'/';var parameters={'id':elementId,'action':'addToPlaylist'};new JsonRequest(actionURL,function(responseStatus,requestName,responseData){receiveData(responseStatus,requestName,responseData);if(callback){callback();}},'addToPlaylist',parameters).send();}};this.removeFromPlaylist=function(playlistId,elementId,callback){if(playlistsIndex[playlistId]!=undefined){var actionURL=window.ajaxURL+'playlistId:'+playlistId+'/';var parameters={'id':elementId,'action':'removeFromPlaylist'};new JsonRequest(actionURL,function(responseStatus,requestName,responseData){receiveData(responseStatus,requestName,responseData);if(callback){callback();}},'removeFromPlaylist',parameters).send();}};var importData=function(playlists){for(var i=0;i<playlists.length;i++){if(!playlistsIndex[playlists[i].id]){playlists[i].id=parseInt(playlists[i].id,10);playlistsIndex[playlists[i].id]=playlists[i];playlistsList.push(playlists[i]);}}
controller.fireEvent('playlistsUpdated',playlistsList);};this.getPlaylists=function(){return playlistsList;};this.requestPlaylistIds=function(elementId,callback){var url='/ajax/id:'+elementId+'/action:getPlaylistIds/';var request=new JsonRequest(url,function(responseStatus,requestName,responseData){receiveData(responseStatus,requestName,responseData);if(callback){callback();}},'getPlaylistIds');request.send();};var receiveData=function(responseStatus,requestName,responseData){if(requestName=='getPlaylistIds'||requestName=='addToPlaylist'||requestName=='removeFromPlaylist'){if(responseData['zxMusic']!=undefined){importPlaylistIds(responseData['zxMusic']);musicLogics.importData(responseData['zxMusic']);}
if(responseData['zxPicture']!=undefined){importPlaylistIds(responseData['zxPicture']);zxPicturesLogics.importData(responseData['zxPicture']);}
if(responseData['zxProd']!=undefined){importPlaylistIds(responseData['zxProd']);}}
if(requestName=='addPlaylist'){if(responseData.playlist){importData(responseData.playlist);}}};var importPlaylistIds=function(data){for(var i=0;i<data.length;i++){playlistsIdsIndex[data[i].id]=[];for(var j=0;j<data[i].playlistIds.length;j++){playlistsIdsIndex[data[i].id].push(parseInt(data[i].playlistIds[j],10));}}};this.getPlaylistIds=function(elementId){if(playlistsIdsIndex[elementId]!=undefined){return playlistsIdsIndex[elementId];}
return[];};window.controller.addListener('initLogics',init);window.controller.addListener('initDom',initComponents);window.controller.addListener('startApplication',importPlaylists);};;(function(window){window.AnimatedGifParser=function(){var stream;var hdr;var transparency=null;var delay=null;var disposalMethod=null;var lastDisposalMethod=null;var frame=null;var frames=[];var canvas,ctx;var parseCompleteCallback;var gifWidth;var gifHeight;this.startParsing=function(gifBody,callback){if(typeof callback=="function"){parseCompleteCallback=callback;}
init();stream=new Stream(gifBody);setTimeout(doParse,0);};this.getGifData=function(){return compileGifData();};var compileGifData=function(){return{'width':gifWidth,'height':gifHeight,'frames':frames};};var clear=function(){transparency=null;delay=null;lastDisposalMethod=disposalMethod;disposalMethod=null;frame=null;};var doParse=function(){try{parseGIF(stream,handler);}
catch(err){}};var doHdr=function(_hdr){hdr=_hdr;gifWidth=hdr.width;gifHeight=hdr.height;canvas.width=gifWidth;canvas.height=gifHeight;};var doGCE=function(gce){pushFrame();clear();transparency=gce.transparencyGiven?gce.transparencyIndex:null;delay=gce.delayTime;disposalMethod=gce.disposalMethod;};var pushFrame=function(){if(!frame){return;}
frames.push({data:frame.getImageData(0,0,hdr.width,hdr.height),delay:delay});};var doImg=function(img){if(!frame){frame=canvas.getContext('2d');}
var ct=img.lctFlag?img.lct:hdr.gct;var cData=frame.getImageData(img.leftPos,img.topPos,img.width,img.height);img.pixels.forEach(function(pixel,i){if(transparency!==pixel){cData.data[i*4+0]=ct[pixel][0];cData.data[i*4+1]=ct[pixel][1];cData.data[i*4+2]=ct[pixel][2];cData.data[i*4+3]=255;}
else{if(lastDisposalMethod===2||lastDisposalMethod===3){cData.data[i*4+3]=0;}
else{}}});frame.putImageData(cData,img.leftPos,img.topPos);};var handler={hdr:doHdr,gce:doGCE,img:doImg,eof:function(){pushFrame();canvas.width=hdr.width;canvas.height=hdr.height;if(parseCompleteCallback){parseCompleteCallback(compileGifData());}}};var init=function(){canvas=document.createElement('canvas');ctx=canvas.getContext('2d');};};var bitsToNum=function(ba){return ba.reduce(function(s,n){return s*2+n;},0);};var byteToBitArr=function(bite){var a=[];for(var i=7;i>=0;i--){a.push(!!(bite&(1<<i)));}
return a;};var Stream=function(data){this.data=data;this.len=this.data.length;this.pos=0;this.readByte=function(){if(this.pos>=this.data.length){throw new Error('Attempted to read past end of stream.');}
return data.charCodeAt(this.pos++)&0xFF;};this.readBytes=function(n){var bytes=[];for(var i=0;i<n;i++){bytes.push(this.readByte());}
return bytes;};this.read=function(n){var s='';for(var i=0;i<n;i++){s+=String.fromCharCode(this.readByte());}
return s;};this.readUnsigned=function(){var a=this.readBytes(2);return(a[1]<<8)+a[0];};};var lzwDecode=function(minCodeSize,data){var pos=0;var readCode=function(size){var code=0;for(var i=0;i<size;i++){if(data.charCodeAt(pos>>3)&(1<<(pos&7))){code|=1<<i;}
pos++;}
return code;};var output=[];var clearCode=1<<minCodeSize;var eoiCode=clearCode+1;var codeSize=minCodeSize+1;var dict=[];var clear=function(){dict=[];codeSize=minCodeSize+1;for(var i=0;i<clearCode;i++){dict[i]=[i];}
dict[clearCode]=[];dict[eoiCode]=null;};var code;var last;while(true){last=code;code=readCode(codeSize);if(code===clearCode){clear();continue;}
if(code===eoiCode){break;}
if(code<dict.length){if(last!==clearCode){dict.push(dict[last].concat(dict[code][0]));}}
else{if(code!==dict.length){throw new Error('Invalid LZW code.');}
dict.push(dict[last].concat(dict[last][0]));}
output.push.apply(output,dict[code]);if(dict.length===(1<<codeSize)&&codeSize<12){codeSize++;}}
return output;};var parseGIF=function(st,handler){handler||(handler={});var parseCT=function(entries){var ct=[];for(var i=0;i<entries;i++){ct.push(st.readBytes(3));}
return ct;};var readSubBlocks=function(){var size,data;data='';do{size=st.readByte();data+=st.read(size);}while(size!==0);return data;};var parseHeader=function(){var hdr={};hdr.sig=st.read(3);hdr.ver=st.read(3);if(hdr.sig!=='GIF'){throw new Error('Not a GIF file.');}
hdr.width=st.readUnsigned();hdr.height=st.readUnsigned();var bits=byteToBitArr(st.readByte());hdr.gctFlag=bits.shift();hdr.colorRes=bitsToNum(bits.splice(0,3));hdr.sorted=bits.shift();hdr.gctSize=bitsToNum(bits.splice(0,3));hdr.bgColor=st.readByte();hdr.pixelAspectRatio=st.readByte();if(hdr.gctFlag){hdr.gct=parseCT(1<<(hdr.gctSize+1));}
handler.hdr&&handler.hdr(hdr);};var parseExt=function(block){var parseGCExt=function(block){var blockSize=st.readByte();var bits=byteToBitArr(st.readByte());block.reserved=bits.splice(0,3);block.disposalMethod=bitsToNum(bits.splice(0,3));block.userInput=bits.shift();block.transparencyGiven=bits.shift();block.delayTime=st.readUnsigned();block.transparencyIndex=st.readByte();block.terminator=st.readByte();handler.gce&&handler.gce(block);};var parseComExt=function(block){block.comment=readSubBlocks();handler.com&&handler.com(block);};var parsePTExt=function(block){var blockSize=st.readByte();block.ptHeader=st.readBytes(12);block.ptData=readSubBlocks();handler.pte&&handler.pte(block);};var parseAppExt=function(block){var parseNetscapeExt=function(block){var blockSize=st.readByte();block.unknown=st.readByte();block.iterations=st.readUnsigned();block.terminator=st.readByte();handler.app&&handler.app.NETSCAPE&&handler.app.NETSCAPE(block);};var parseUnknownAppExt=function(block){block.appData=readSubBlocks();handler.app&&handler.app[block.identifier]&&handler.app[block.identifier](block);};var blockSize=st.readByte();block.identifier=st.read(8);block.authCode=st.read(3);switch(block.identifier){case'NETSCAPE':parseNetscapeExt(block);break;default:parseUnknownAppExt(block);break;}};var parseUnknownExt=function(block){block.data=readSubBlocks();handler.unknown&&handler.unknown(block);};block.label=st.readByte();switch(block.label){case 0xF9:block.extType='gce';parseGCExt(block);break;case 0xFE:block.extType='com';parseComExt(block);break;case 0x01:block.extType='pte';parsePTExt(block);break;case 0xFF:block.extType='app';parseAppExt(block);break;default:block.extType='unknown';parseUnknownExt(block);break;}};var parseImg=function(img){var deinterlace=function(pixels,width){var newPixels=new Array(pixels.length);var rows=pixels.length / width;var cpRow=function(toRow,fromRow){var fromPixels=pixels.slice(fromRow*width,(fromRow+1)*width);newPixels.splice.apply(newPixels,[toRow*width,width].concat(fromPixels));};var offsets=[0,4,2,1];var steps=[8,8,4,2];var fromRow=0;for(var pass=0;pass<4;pass++){for(var toRow=offsets[pass];toRow<rows;toRow+=steps[pass]){cpRow(toRow,fromRow)
fromRow++;}}
return newPixels;};img.leftPos=st.readUnsigned();img.topPos=st.readUnsigned();img.width=st.readUnsigned();img.height=st.readUnsigned();var bits=byteToBitArr(st.readByte());img.lctFlag=bits.shift();img.interlaced=bits.shift();img.sorted=bits.shift();img.reserved=bits.splice(0,2);img.lctSize=bitsToNum(bits.splice(0,3));if(img.lctFlag){img.lct=parseCT(1<<(img.lctSize+1));}
img.lzwMinCodeSize=st.readByte();var lzwData=readSubBlocks();img.pixels=lzwDecode(img.lzwMinCodeSize,lzwData);if(img.interlaced){img.pixels=deinterlace(img.pixels,img.width);}
handler.img&&handler.img(img);};var parseBlock=function(){var block={};block.sentinel=st.readByte();switch(String.fromCharCode(block.sentinel)){case'!':block.type='ext';parseExt(block);break;case',':block.type='img';parseImg(block);break;case';':block.type='eof';handler.eof&&handler.eof(block);break;default:throw new Error('Unknown block: 0x'+block.sentinel.toString(16));}
if(block.type!=='eof'){setTimeout(parseBlock,0);}};var parse=function(){parseHeader();setTimeout(parseBlock,0);};parse();};})(window);;window.feedbackFormLogics=new function(){var initComponents=function(){var elements;elements=_('.gallery_pictures');for(var i=0;i<elements.length;i++){new artWebZXGallery(elements[i]);}
elements=_('.settings_block');for(var i=0;i<elements.length;i++){new SettingsBlockComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.stagesAnimationLogics=new function(){var initDom=function(){if(isCanvasSupported()&&isBinaryDownloadSupported()){var elements=_('.stage_animation_gif');for(var i=0;i<elements.length;i++){new StagesAnimationComponent(elements[i]);}}};var isBinaryDownloadSupported=function(){if(window.XMLHttpRequest){var request=new XMLHttpRequest();if(request.overrideMimeType){return true;}}
return false;};var isCanvasSupported=function(){var element=document.createElement('canvas');return!!(element.getContext&&element.getContext('2d'));};controller.addListener('initDom',initDom);};;window.groupFormLogics=new function(){var initComponents=function(){var elements=_('.group_form');for(var i=elements.length;i--;){new GroupFormComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.authorFormLogics=new function(){var initComponents=function(){var elements=_('.author_form');for(var i=elements.length;i--;){new AuthorFormComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.authorAliasFormLogics=new function(){var initComponents=function(){var elements=_('.authoralias_form');for(var i=elements.length;i--;){new AuthorAliasFormComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.groupAliasFormLogics=new function(){var initComponents=function(){var elements=_('.groupalias_form');for(var i=elements.length;i--;){new GroupAliasFormComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.zxItemFormLogics=new function(){var initComponents=function(){var elements=_('.zxitem_form');for(var i=elements.length;i--;){new ZxItemFormComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.partyFormLogics=new function(){var initComponents=function(){var elements=_('.party_form');for(var i=elements.length;i--;){new PartyFormComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.formHelperLogics=new function(){var initComponents=function(){var elements=document.querySelectorAll('.form_helper');for(var i=0;i<elements.length;i++){new FormHelperComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.editingControlsLogics=new function(){var initComponents=function(){var elements=_('.editing_controls');for(var i=elements.length;i--;){new EditingControlsComponent(elements[i]);}};window.controller.addListener('initDom',initComponents);};;window.radioControlsLogics=new function(){var mode;var initComponents=function(){var elements=document.querySelectorAll('.radio_controls');for(var i=0;i<elements.length;i++){new RadioControlsComponent(elements[i]);}};this.startPlay=function(newMode){mode=newMode;musicRadioLogics.startPlay(mode);};window.controller.addListener('initDom',initComponents);};window.RadioControlsComponent=function(componentElement){var init=function(){var buttons=componentElement.querySelectorAll('.button');if(buttons){for(var i=0;i<buttons.length;i++){eventsManager.addHandler(buttons[i],'click',clickHandler);}}};var clickHandler=function(event){var type=event.currentTarget.getAttribute('data-radiotype');radioControlsLogics.startPlay(type);};init();};;window.prodsLogics=new function(){var prodsIndex={};var self=this;var init=function(){if(typeof window.prodsList!=='undefined'){self.importData(window.prodsList);}};var initComponents=function(){var i;};this.getProdInfo=function(id){if(typeof prodsIndex[id]!=='undefined'){return prodsIndex[id];}
return false;};this.importData=function(data){for(var i=0;i<data.length;i++){prodsIndex[data[i].id]=data[i];}};window.controller.addListener('initLogics',init);window.controller.addListener('initDom',initComponents);};;window.musicPlayerLogics=new function(){var currentMusicInfo;var currentId;var currentPlaylistName;var state;var loaded;var audioElement;var playlists={};var self=this;var activePlayMode='play';var init=function(){audioElement=document.createElement('audio');broadcastLogics.addListener(broadcastListener);eventsManager.addHandler(audioElement,'ended',onEndedHandler);eventsManager.addHandler(audioElement,'timeupdate',onTimeupdateHandler);loaded=false;state='stopped';};var broadcastListener=function(type){if(type=='playerWindowCheck'){broadcastMessage('playerWindowExists',true);}};var mp3Supported=function(){var result=false;if(audioElement.canPlayType&&audioElement.canPlayType('audio/mpeg')){result=true;}
return result;};this.setActivePlayMode=function(newMode){activePlayMode=newMode;};this.resume=function(newId){if(!newId){newId=currentId;}
currentMusicInfo=getMusicInfo(newId);if(currentMusicInfo){if(currentId!=newId){audioElement.pause();currentId=newId;broadcastMessage('musicPlayPreload',currentMusicInfo);if(mp3Supported()){audioElement.src=currentMusicInfo.mp3FilePath;playSound();}}
else if(state=='stopped'||state=='paused'){broadcastMessage('musicPlayResumed',currentMusicInfo);audioElement.play();}
state='playing';}};var playSound=function(){audioElement.play();broadcastMessage('musicPlayResumed',currentMusicInfo);};var getMusicInfo=function(id){for(var i=0;i<playlists[currentPlaylistName].length;i++){if(playlists[currentPlaylistName][i].id==id){return playlists[currentPlaylistName][i];}}
return false;};this.pause=function(){if(audioElement){state='paused';audioElement.pause();}
broadcastMessage('musicPlayPaused',currentMusicInfo);};this.previous=function(){var previousSong;if(currentId){for(var i=playlists[currentPlaylistName].length-1;i>=0;i--){if(playlists[currentPlaylistName][i].id==currentId){if(playlists[currentPlaylistName][i-1]!=undefined){previousSong=playlists[currentPlaylistName][i-1];}
break;}}}
if(previousSong){self.resume(previousSong.id);}};this.next=function(){var nextSong;if(currentId){for(var i=0;i<playlists[currentPlaylistName].length;i++){if(playlists[currentPlaylistName][i].id==currentId){if(playlists[currentPlaylistName][i+1]!=undefined){nextSong=playlists[currentPlaylistName][i+1];}
else if(activePlayMode=='repeat'){nextSong=playlists[currentPlaylistName][0];}
break;}}}
if(nextSong){self.resume(nextSong.id);}
broadcastMessage('musicPlayNextPressed',currentPlaylistName);};this.stop=function(){state='stopped';if(audioElement){audioElement.pause();audioElement.currentTime=0;}
broadcastMessage('musicPlayPaused',currentMusicInfo);};this.getLoaded=function(){return loaded;};var startApplicationHandler=function(){loaded=true;};this.addPlaylist=function(playlistName,playlist){currentPlaylistName=playlistName;playlists[playlistName]=playlist;broadcastMessage('musicPlayListChanged',currentPlaylistName);};this.seek=function(percent){audioElement.currentTime=audioElement.duration*percent;currentMusicInfo.currentTime=audioElement.currentTime;broadcastMessage('musicPlaySeek',currentMusicInfo);};var onEndedHandler=function(){self.stop();broadcastMessage('musicPlayEnded',currentMusicInfo);self.next();};var onTimeupdateHandler=function(){currentMusicInfo.currentTime=audioElement.currentTime;currentMusicInfo.duration=audioElement.duration;broadcastMessage('musicTimeUpdated',currentMusicInfo);};var broadcastMessage=function(type,value){broadcastLogics.broadcastMessage(type,value);musicLogics.setBroadcastInformation(type,value);};window.controller.addListener('initLogics',init);window.controller.addListener('startApplication',startApplicationHandler);};;window.musicLogger=new function(){var total=0;var resumeTime;var currentInfo;var checkInterval;var logged=false;var init=function(){controller.addListener('musicPlayResumed',musicPlayResumedHandler);controller.addListener('musicPlayPaused',musicTimePausedHandler);};var musicPlayResumedHandler=function(info){resumeTime=new Date();if(!currentInfo||currentInfo.id!=info.id){logged=false;total=0;currentInfo=info;}
clearInterval(checkInterval);checkInterval=setInterval(checkTimer,1000);};var musicTimePausedHandler=function(){if(resumeTime){var now=new Date();total+=(now.getTime()-resumeTime.getTime())/ 1000;}
clearInterval(checkInterval);};var checkTimer=function(){if(resumeTime){var now=new Date();var timer=(total+(now.getTime()-resumeTime.getTime())/ 1000);var percent=(timer / currentInfo.duration);if(percent>=0.75){logPlay(currentInfo.id);}
if(timer>currentInfo.duration){resumeTime=new Date();total=0;logged=false;}}};var logPlay=function(elementId){if(!logged){logged=true;var url='/ajax/id:'+elementId+'/action:logPlay/';var request=new JsonRequest(url,receiveData);request.send();}};var receiveData=function(responseStatus,requestName,responseData){};window.controller.addListener('initLogics',init);};;window.musicRadioLogics=new function(){var radioMode='discover';var initLogics=function(){controller.addListener('musicPlayNextPressed',musicPlayNextPressedHandler);};var musicPlayNextPressedHandler=function(playListName){if(playListName=='random'){sendNextSongRequest();}};this.startPlay=function(newMode){radioMode=newMode;sendNextSongRequest();};var sendNextSongRequest=function(){var url='/randomTune/type:'+radioMode+'/';var request=new JsonRequest(url,receiveData);request.send();};var receiveData=function(responseStatus,requestName,responseData){if(responseData){if(responseData.zxMusic&&responseData.zxMusic[0]){var zxMusicData=responseData.zxMusic[0];musicLogics.setCurrentPlaylist('random',[zxMusicData]);musicLogics.resume(zxMusicData.id);}}};window.controller.addListener('initLogics',initLogics);};;window.zxMapLogics=new function(){var components=[];var mapsData;var initComponents=function(){if(typeof L!=='undefined'){var elements=_('.zxmap');for(var i=0;i<elements.length;i++){components.push(new ZxMap(elements[i]));}}};var initLogics=function(){if(typeof window.mapsData!=='undefined'){mapsData=window.mapsData;}};this.getData=function(id){if(typeof mapsData[id]!=='undefined'){return mapsData[id];}
return false;};window.controller.addListener('initLogics',initLogics);window.controller.addListener('initDom',initComponents);};;window.AutoAdjustedPopup=function(){var componentElement;var self=this;this.initAutoAdjustedPopup=function(options){parseOptions(options);if(componentElement){}};var parseOptions=function(options){if(typeof options.componentElement!='undefined'){componentElement=options.componentElement;}};this.adjustPositionAndSize=function(referenceElement){componentElement.style.visibility='hidden';componentElement.style.display='block';var x;var y;var componentWidth=componentElement.offsetWidth;var componentHeight=componentElement.offsetHeight;var scroll=self.getPageScroll();var windowHeight=self.getWindowHeight();var windowWidth=self.getWindowWidth();var rect=referenceElement.getBoundingClientRect();if(rect.left>windowWidth / 2){x=rect.left-componentWidth+referenceElement.offsetWidth+scroll.x;}
else{x=rect.left+scroll.x;}
if(rect.top>windowHeight / 2){y=rect.top-componentHeight+referenceElement.offsetHeight+scroll.y;}
else{y=rect.top+scroll.y;}
componentElement.style.left=x+'px';componentElement.style.top=y+'px';componentElement.style.display='none';componentElement.style.visibility='visible';};return this;};;window.PictureTagsFormComponent=function(componentElement){var tagSearch;var self=this;var init=function(){var inputElement=_('.picturetags_input',componentElement)[0];if(inputElement){tagSearch=new TagSearchInputComponent(inputElement);var suggestionButtonElements=_('.tag_suggestion_button',componentElement);if(suggestionButtonElements){for(var i=0;i<suggestionButtonElements.length;i++){new TagSuggestionButtonComponent(suggestionButtonElements[i],self);}}}};this.addText=function(text){tagSearch.addText(text);};init();};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');};}
if(!String.prototype.splice){String.prototype.splice=function(idx,rem,s){return(this.slice(0,idx)+s+this.slice(idx+Math.abs(rem)));};}
window.TagSearchInputComponent=function(componentElement){var init=function(){var parameters={'clickCallback':clickHandler,'minLength':1,'apiMode':'public','types':'tag','getValueCallback':getValueCallback};new AjaxSearchComponent(componentElement,parameters);};var clickHandler=function(data){if(data.value){var boundaries=getCurrentTagBoundaries(componentElement.value);var start=boundaries.start;var end=boundaries.end;componentElement.value=componentElement.value.splice(start,end-start,data.value)+', ';}};var getValueCallback=function(){var boundaries=getCurrentTagBoundaries(componentElement.value);var start=boundaries.start;var end=boundaries.end;return componentElement.value.slice(start,end);};var getCurrentTagBoundaries=function(text){var position=getCursorPosition(componentElement);var start=position;var end=position;for(var i=position;i>=0;i--){if(text[i]!=','&&text[i]!=' '){start=i;}
if(text[i]==','&&i!=position){break;}}
for(i=position;i<=text.length;i++){if(text[i]!=','){end=i;}
else{break;}}
return{'start':start,'end':end};};var getCursorPosition=function(input){if('selectionStart'in input){return input.selectionStart;}
else if(document.selection){var sel=document.selection.createRange();var selLen=document.selection.createRange().text.length;sel.moveStart('character',-input.value.length);return sel.text.length-selLen;}
return false;};this.addText=function(text){if((componentElement.value!='')&&(componentElement.value.substr(-2,2)!=", ")&&(componentElement.value.substr(-1,1)!=",")){componentElement.value+=', ';}
componentElement.value+=text+', ';};init();};window.TagSuggestionButtonComponent=function(componentElement,formComponent){var textElement;var init=function(){if(textElement=_('.tag_suggestion_text',componentElement)[0]){eventsManager.addHandler(componentElement,'click',clickHandler);}};var clickHandler=function(){var text=textElement.textContent;formComponent.addText(text);componentElement.parentNode.removeChild(componentElement);};init();};;window.PictureDetailsComponent=function(componentElement){var id;var init=function(){if(id=componentElement.dataset.id){window.zxPicturesLogics.logView(id);}};init();};;function VoteControls(componentElement,elementInfo){var voteValueElement;var starsElement;var userVoteElement;var skipElement;var starElements=[];var starsHovered=0;var maxVote=5;var votingEnabled;var init=function(){createDomStructure();if(window.userName=='anonymous'){var popup=new TipPopupComponent(componentElement,window.translationsLogics.get('label.registration_required'));popup.setDisplayDelay(100);votingEnabled=false;}else{votingEnabled=true;eventsManager.addHandler(starsElement,'mouseout',mouseOutHandler);controller.addListener('voteRecalculated',voteCalculatedHandler);}};var createDomStructure=function(){if(!componentElement){componentElement=document.createElement('div');componentElement.className='vote_controls';}
userVoteElement=document.createElement('div');userVoteElement.className='vote_controls_uservote';componentElement.appendChild(userVoteElement);starsElement=document.createElement('div');starsElement.className='vote_controls_stars';componentElement.appendChild(starsElement);voteValueElement=document.createElement('div');voteValueElement.className='vote_controls_value';starsElement.appendChild(voteValueElement);skipElement=document.createElement('div');skipElement.className='vote_controls_skip';skipElement.innerHTML='x';componentElement.appendChild(skipElement);for(var i=0;i<maxVote;i++){var starElement=document.createElement('div');starElement.className='vote_controls_star';starElement.style.left=i+'em';starsElement.appendChild(starElement);if(window.userName!='anonymous'){eventsManager.addHandler(starElement,'click',function(i){return function(){clickHandler(i+1);};}(i));eventsManager.addHandler(starElement,'mouseover',function(i){return function(){mouseOverHandler(i+1);};}(i));eventsManager.addHandler(skipElement,'click',skip);}
starElements.push(starElement);}
refreshValue();};var voteCalculatedHandler=function(newElementInfo){if(elementInfo.id==newElementInfo.id){elementInfo=newElementInfo;refreshValue();}};var mouseOverHandler=function(number){starsHovered=number;refresh();};var mouseOutHandler=function(){starsHovered=0;refresh();};var clickHandler=function(number){if(votingEnabled){votesLogics.makeVote(elementInfo.id,number)}};var skip=function(){if(votingEnabled){votesLogics.makeVote(elementInfo.id,0)}};var refreshValue=function(){voteValueElement.style.width=elementInfo.votePercent+'%';starsElement.className='vote_controls_stars';if(elementInfo.userVote&&elementInfo.userVote>0){userVoteElement.innerHTML=elementInfo.userVote+' <span class="vote_controls_uservote_delimiter">/</span> ';}
else{userVoteElement.innerHTML='';}
if(elementInfo.userVote===0||elementInfo.userVote==='0'){skipElement.className='vote_controls_skip active';}else{skipElement.className='vote_controls_skip';}};var refresh=function(){for(var i=0;i<starElements.length;i++){if(i<starsHovered){starElements[i].className='vote_controls_star vote_controls_star_gold';}
else{starElements[i].className='vote_controls_star';}}};this.getComponentElement=function(){return componentElement;};init();};function DetailedSearchFormComponent(componentElement){var formElement;var titleInput;var startYearInput;var endYearInput;var ratingInput;var partyPlaceInput;var musicFormatGroupSelect;var musicFormatSelect;var pictureTypeSelect;var sortParameterSelect;var sortOrderSelect;var realtimeCheckbox;var inspirationCheckbox;var stagesCheckbox;var tagsIncludeInput;var tagsExcludeInput;var authorCountrySelect;var authorCitySelect;var resultsTypeSelect;var submitButton;var init=function(){if(formElement=_('.detailedsearch_form',componentElement)[0]){titleInput=_('.detailedsearch_title',formElement)[0];startYearInput=_('.detailedsearch_startyear',formElement)[0];endYearInput=_('.detailedsearch_endyear',formElement)[0];ratingInput=_('.detailedsearch_rating',formElement)[0];partyPlaceInput=_('.detailedsearch_partyplace',formElement)[0];pictureTypeSelect=_('select.detailedsearch_picturetype',formElement)[0];musicFormatGroupSelect=_('select.detailedsearch_formatgroup',formElement)[0];musicFormatSelect=_('select.detailedsearch_format',formElement)[0];sortParameterSelect=_('select.detailedsearch_sortparameter',formElement)[0];sortOrderSelect=_('select.detailedsearch_sortorder',formElement)[0];realtimeCheckbox=_('input.detailedsearch_realtime',formElement)[0];inspirationCheckbox=_('input.detailedsearch_inspiration',formElement)[0];stagesCheckbox=_('input.detailedsearch_stages',formElement)[0];if(tagsIncludeInput=_('.detailedsearch_tagsinclude',formElement)[0]){new TagSearchInputComponent(tagsIncludeInput);}
if(tagsExcludeInput=_('.detailedsearch_tagsexclude',formElement)[0]){new TagSearchInputComponent(tagsExcludeInput);}
if(authorCountrySelect=_('.detailedsearch_author_country',formElement)[0]){new AjaxSelectComponent(authorCountrySelect,'country','public');}
if(authorCitySelect=_('.detailedsearch_author_city',formElement)[0]){new AjaxSelectComponent(authorCitySelect,'city','public');}
if(resultsTypeSelect=_('select.detailedsearch_resultstype',formElement)[0]){}
if(submitButton=_('.detailedsearch_button',formElement)[0]){eventsManager.addHandler(submitButton,'click',submitForm);}
eventsManager.addHandler(formElement,'keydown',checkKey);eventsManager.addHandler(formElement,'reset',function(){window.setTimeout(resetHandler,0)});}};var resetHandler=function(){if(pictureTypeSelect){eventsManager.fireEvent(pictureTypeSelect,'change');}
if(musicFormatGroupSelect){eventsManager.fireEvent(musicFormatGroupSelect,'change');}
if(musicFormatSelect){eventsManager.fireEvent(musicFormatSelect,'change');}
if(sortParameterSelect){eventsManager.fireEvent(sortParameterSelect,'change');}
if(sortOrderSelect){eventsManager.fireEvent(sortOrderSelect,'change');}};var checkKey=function(event){if(event.keyCode==13){submitForm();}};var submitForm=function(event){if(event){eventsManager.preventDefaultAction(event);}
var url=formElement.getAttribute('action');if(titleInput&&titleInput.value!=''){url+='titleWord:'+titleInput.value+'/';}
if(startYearInput&&startYearInput.value!=''){url+='startYear:'+startYearInput.value+'/';}
if(endYearInput&&endYearInput.value!=''){url+='endYear:'+endYearInput.value+'/';}
if(ratingInput&&ratingInput.value!=''){url+='rating:'+ratingInput.value+'/';}
if(partyPlaceInput&&partyPlaceInput.value!=''){url+='partyPlace:'+partyPlaceInput.value+'/';}
if(pictureTypeSelect&&pictureTypeSelect.value!=''){url+='pictureType:'+pictureTypeSelect.value+'/';}
if(musicFormatGroupSelect&&musicFormatGroupSelect.value!=''){url+='formatGroup:'+musicFormatGroupSelect.value+'/';}
if(musicFormatSelect&&musicFormatSelect.value!=''){url+='format:'+musicFormatSelect.value+'/';}
if(sortParameterSelect&&sortParameterSelect.value!=''){url+='sortParameter:'+sortParameterSelect.value+'/';}
if(sortOrderSelect&&sortOrderSelect.value!=''){url+='sortOrder:'+sortOrderSelect.value+'/';}
if(realtimeCheckbox&&realtimeCheckbox.checked!=''){url+='realtime:'+1+'/';}
if(stagesCheckbox&&stagesCheckbox.checked!=''){url+='stages:'+1+'/';}
if(inspirationCheckbox&&inspirationCheckbox.checked!=''){url+='inspiration:'+1+'/';}
if(tagsIncludeInput&&tagsIncludeInput.value!=''){url+='tagsInclude:'+encodeURIComponent(tagsIncludeInput.value)+'/';}
if(tagsExcludeInput&&tagsExcludeInput.value!=''){url+='tagsExclude:'+encodeURIComponent(tagsExcludeInput.value)+'/';}
if(authorCountrySelect&&authorCountrySelect.value!=''){url+='authorCountry:'+getSelectValuesString(authorCountrySelect)+'/';}
if(authorCitySelect&&authorCitySelect.value!=''){url+='authorCity:'+getSelectValuesString(authorCitySelect)+'/';}
if(resultsTypeSelect&&resultsTypeSelect.value!=''){url+='resultsType:'+resultsTypeSelect.value+'/';}
document.location.href=url;};var getSelectValuesString=function(select){var values=[];for(var i=0,iLen=select.options.length;i<iLen;i++){if(select.options[i].selected){values.push(select.options[i].value);}}
return values.join(',');};init();};window.ChartComponent=function(componentElement){var id;var data;var init=function(){if(id=componentElement.dataset.chartid){if(data=chartLogics.getChartData(id)){buildChart(componentElement,data);}}};var buildChart=function(element,data){var chartData={labels:data.labels,datasets:[{label:"",fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:data.data}]};var config={type:'line',data:chartData,options:{responsive:true,scales:{yAxes:[{stacked:true}]},legend:{display:false},tooltips:{mode:'index'}}};new Chart(element.getContext("2d"),config);};init();};;window.MusicShortComponent=function(componentElement){var id;var state;var playButton;var init=function(){state='paused';if(id=parseInt(componentElement.className.split('elementid_')[1],10)){createDomStructure();componentElement.style.display='inline-block';refreshStatus();controller.addListener('musicPlayPaused',musicPlayPausedHandler);controller.addListener('musicPlayResumed',musicPlayResumedHandler);}};var createDomStructure=function(){playButton=document.createElement('div');playButton.className='music_controls_button play';eventsManager.addHandler(playButton,'click',playClickHandler);componentElement.appendChild(playButton);};var musicPlayPausedHandler=function(info){if(id==info.id){state='paused';}
refreshStatus();};var musicPlayResumedHandler=function(info){if(id==info.id){state='playing';}
else{state='paused';}
refreshStatus();};var playClickHandler=function(){if(state=='paused'){musicLogics.setCurrentPlaylist(window.currentElementId,window.musicList);musicLogics.resume(id);}
else{musicLogics.pause(id);}
refreshStatus();};var refreshStatus=function(){if(state=='paused'){domHelper.removeClass(playButton,'pause');domHelper.addClass(playButton,'play');}
else{domHelper.addClass(playButton,'pause');domHelper.removeClass(playButton,'play');}};init();};;window.emulatorComponent=new function(){const self=this;let url;let canvasElement;let componentElement;let fullscreenButton;const init=function(){if(componentElement=document.querySelector('.emulator')){if(canvasElement=componentElement.querySelector('.emulator_canvas')){canvasElement.addEventListener("webglcontextlost",function(e){alert('WebGL context lost. You will need to reload the page.');e.preventDefault();},false);}
if(fullscreenButton=componentElement.querySelector('.emulator_fullscreen')){fullscreenButton.addEventListener('click',fullscreenClick);}}};const spawnModule=function(){window.Module={onReady:emulatorReadyHandler,canvas:(function(){return canvasElement;})(),locateFile:function(file){return'/libs/us/'+file;}};};const emulatorReadyHandler=function(){Module.setCanvasSize(960,720);Module.ccall('OpenFile',null,['string'],[url]);Module.ccall('OnCommand',null,['string'],['joystick=cursor']);};const fullscreenClick=function(){Module.requestFullscreen(false,true);};self.start=function(newUrl){if(canvasElement){url=newUrl;componentElement.style.display='block';if(typeof Module=='undefined'){spawnModule();var script=document.createElement('script');script.src="/libs/us/unreal_speccy_portable.js";document.body.appendChild(script);}else{emulatorReadyHandler();}}};controller.addListener('initDom',init);};;window.artWebZXGallery=function(galleryElement){this.init=function(){this.galleryElement=galleryElement;if(window.galleryPictures){this.galleryPictures=window.galleryPictures;this.createDomStructure();var imagesElements=_('.zxgallery_item',self.galleryElement);for(var i=0;i<imagesElements.length;i++){self.contentImagesList.push(new artWebAuthorImage(imagesElements[i],this));}
eventsManager.addHandler(window,'keydown',self.keyDownHandler);eventsManager.addHandler(window,'resize',self.reposition);}};this.createDomStructure=function(){this.componentElement=document.createElement('div');this.componentElement.style.display='none';this.componentElement.style.position='fixed';this.componentElement.style.top='0';this.componentElement.style.left='0';this.componentElement.style.width='990px';this.componentElement.style.height='100%';this.componentElement.style.zIndex='100';eventsManager.addHandler(this.componentElement,'click',this.hideComponent);this.bigImageContainer=document.createElement('div');this.bigImageContainer.style.position='absolute';this.bigImageContainer.style.top='0';this.bigImageContainer.style.left='0';this.bigImageContainer.style.width='640px';this.bigImageContainer.style.height='480px';this.bigImageContainer.style.maxWidth='100%';this.componentElement.appendChild(this.bigImageContainer);this.titleBlock=document.createElement('div');this.titleBlock.className='fullscreen_title';this.titleBlock.style.position='absolute';this.titleBlock.style.top='500px';this.titleBlock.style.left='25px';this.componentElement.appendChild(this.titleBlock);this.thumbnailsContainer=document.createElement('div');this.thumbnailsContainer.style.position='absolute';this.thumbnailsContainer.style.top='0';this.thumbnailsContainer.style.bottom='0';this.thumbnailsContainer.style.right='0';this.thumbnailsContainer.style.width='335px';this.thumbnailsContainer.style.overflow='auto';this.componentElement.appendChild(this.thumbnailsContainer);for(var i in this.galleryPictures){var imageInfo=window.imageInfoIndex[this.galleryPictures[i]];var thumbnail=new artWebAuthorThumbnail(imageInfo,self);this.thumbnailsContainer.appendChild(thumbnail.componentElement);this.thumbnailsList.push(thumbnail);this.thumbnailsIndex[thumbnail.id]=thumbnail;}
document.body.appendChild(this.componentElement);};this.markActiveThumbnail=function(){if(this.previousImageId&&this.currentImageId!=this.previousImageId){if(this.thumbnailsIndex[this.previousImageId]){this.thumbnailsIndex[this.previousImageId].markInactive();}}
if(this.currentImageId){if(this.thumbnailsIndex[this.currentImageId]){this.thumbnailsIndex[this.currentImageId].markActive();}}};this.showImage=function(imageId){if(this.currentImageId){this.previousImageId=this.currentImageId;if(this.largeImagesIndex[this.previousImageId]){this.largeImagesIndex[this.previousImageId].componentElement.style.zIndex='5';}}
this.currentImageId=imageId;this.markActiveThumbnail();if(!this.displayed){this.hidePreviousImage();window.DarkLayerComponent.showLayer(this.hideComponent,this.displayComponent,true);}else{if(this.previousImageId!=this.currentImageId){this.checkImageObject();}}};this.displayComponent=function(){self.componentElement.style.display='block';self.reposition();self.displayed=true;self.checkImageObject();};this.reposition=function(){var viewPortLeft,viewPortWidth;if(window.pageYOffset){viewPortLeft=window.pageXOffset;}else{viewPortLeft=document.documentElement.scrollLeft;}
if(window.innerHeight){viewPortWidth=window.innerWidth;}else{viewPortWidth=document.documentElement.offsetWidth;}
if(viewPortWidth<990){self.bigImageContainer.style.position='relative';self.bigImageContainer.style.margin='0 auto';self.thumbnailsContainer.style.display='none';self.componentElement.style.width='auto';self.componentElement.style.left=0;self.componentElement.style.right=0;}else{self.bigImageContainer.style.position='absolute';self.bigImageContainer.style.margin='0';self.thumbnailsContainer.style.display='';self.componentElement.style.right='auto';self.componentElement.style.width='990px';self.componentElement.style.left=viewPortLeft+(viewPortWidth-self.componentElement.offsetWidth)/ 2+'px';}};this.checkImageObject=function(){this.hideContentImages();var currentImageId=self.currentImageId;if(!self.largeImagesIndex[currentImageId]){if(window.imageInfoIndex[currentImageId]){var imageInfo=window.imageInfoIndex[currentImageId];var largeImageObject=new artWebAuthorLargeImage(imageInfo,self);self.largeImagesIndex[currentImageId]=largeImageObject;self.bigImageContainer.appendChild(largeImageObject.componentElement);self.titleBlock.textContent=largeImageObject.title;}}
if(self.largeImagesIndex[currentImageId]){self.largeImagesIndex[currentImageId].checkPreload();}};this.displayContentImages=function(){for(var i=0;i<self.contentImagesList.length;i++){self.contentImagesList[i].displayComponent();}};this.hideContentImages=function(){for(var i=0;i<self.contentImagesList.length;i++){self.contentImagesList[i].hideComponent();}};this.hidePreviousImage=function(){for(var index in self.largeImagesIndex){if(index!=self.currentImageId){self.largeImagesIndex[index].hideComponent();}}};this.hideComponent=function(){self.displayContentImages();self.componentElement.style.display='none';self.displayed=false;window.DarkLayerComponent.hideLayer();};this.keyDownHandler=function(event){if(self.displayed){if(event.keyCode=='27'){eventsManager.preventDefaultAction(event);self.hideComponent();}
if(event.keyCode=='32'){eventsManager.preventDefaultAction(event);self.showNextImage();}}};this.showNextImage=function(){var nextImage=0;if(self.currentImageId){for(var i=0;i<self.thumbnailsList.length;i++){if(self.thumbnailsList[i].id==self.currentImageId){nextImage=i+1;break;}}}
if(nextImage>=self.thumbnailsList.length){nextImage=0;}
self.showImage(self.thumbnailsList[nextImage].id);};var self=this;this.displayed=false;this.parentId=false;this.galleryPictures=false;this.currentImageId=false;this.previousImageId=false;this.galleryElement=false;this.componentElement=false;this.bigImageContainer=false;this.thumbnailsContainer=false;this.largeImagesIndex={};this.contentImagesList=[];this.thumbnailsList=[];this.thumbnailsIndex={};this.init();};window.artWebAuthorImage=function(componentElement,parentComponent){this.init=function(){this.componentElement=componentElement;this.parentComponent=parentComponent;if(zxPicturesLogics.getReplaceFlickering()){if(this.componentElement.className.search('flicker_image')>=0){var flickerImage=new FlickerImageComponent(this.componentElement);this.componentElement=flickerImage.getCanvasElement();}}
this.id=this.componentElement.id.split('_')[1];self.componentElement.style.cursor='pointer';eventsManager.addHandler(this.componentElement,'click',this.clickHandler);eventsManager.addHandler(this.componentElement,'mouseenter',this.mouseEnterHandler);eventsManager.addHandler(this.componentElement,'mouseleave',this.mouseLeaveHandler);};this.clickHandler=function(){self.parentComponent.showImage(self.id);};this.displayComponent=function(){self.componentElement.style.visibility='visible';};this.hideComponent=function(){self.componentElement.style.visibility='hidden';};this.mouseEnterHandler=function(){self.componentElement.style.border='1px solid #809ECF';};this.mouseLeaveHandler=function(){self.componentElement.style.border='1px solid #000000';};var self=this;this.id=false;this.componentElement=false;this.parentComponent=false;this.init();};window.artWebAuthorThumbnail=function(imageInfo,parentComponent){this.init=function(){this.componentElement=document.createElement('div');this.active=false;this.componentElement.style.width='64px';this.componentElement.style.padding='4px';this.componentElement.style.margin='2px';this.componentElement.style.border='1px solid #000000';this.componentElement.style.display='inline-block';this.imageElement=document.createElement('img');this.imageElement.src=imageInfo.smallImage;this.imageElement.style.display='block';this.imageElement.style.maxWidth='100%';this.componentElement.appendChild(this.imageElement);this.parentComponent=parentComponent;this.id=imageInfo.id;eventsManager.addHandler(this.componentElement,'click',this.clickHandler);eventsManager.addHandler(this.componentElement,'mouseenter',this.mouseEnterHandler);eventsManager.addHandler(this.componentElement,'mouseleave',this.mouseLeaveHandler);this.refreshStatus();};this.clickHandler=function(event){eventsManager.cancelBubbling(event);self.parentComponent.showImage(self.id);};this.mouseEnterHandler=function(){self.hovered=true;self.refreshStatus();};this.mouseLeaveHandler=function(){self.hovered=false;self.refreshStatus();};this.markActive=function(){this.active=true;this.refreshStatus();};this.markInactive=function(){this.active=false;this.refreshStatus();};this.refreshStatus=function(){if(self.active){this.componentElement.style.cursor='auto';self.componentElement.style.border='1px solid #809ECF';}else{this.componentElement.style.cursor='pointer';if(self.hovered){self.componentElement.style.border='1px solid #809ECF';}else{self.componentElement.style.border='1px solid #000000';}}};var self=this;this.id=false;this.active=false;this.hovered=false;this.componentElement=false;this.parentComponent=false;this.init();};window.artWebAuthorLargeImage=function(imageInfo,parentComponent){var preloaded=false;var canvasReplaced=false;this.init=function(){this.componentElement=document.createElement('img');this.componentElement.src=imageInfo.largeImage;this.componentElement.style.maxWidth='100%';this.componentElement.style.position='absolute';this.componentElement.style.left='0';this.componentElement.style.top='0';this.componentElement.style.zIndex='10';this.componentElement.style.cursor='pointer';self.componentElement.style.opacity=0;this.componentElement.style.display='block';this.parentComponent=parentComponent;this.id=imageInfo.id;this.title=imageInfo.title;eventsManager.addHandler(this.componentElement,'click',this.clickHandler);};this.checkPreload=function(){if(!preloaded){if(zxPicturesLogics.getReplaceFlickering()){if(imageInfo.flickering&&!canvasReplaced){canvasReplaced=true;var flickerImage=new FlickerImageComponent(self.componentElement);self.componentElement=flickerImage.getCanvasElement();self.componentElement.style.position='absolute';self.componentElement.style.left='0';self.componentElement.style.top='0';self.componentElement.style.zIndex='10';self.componentElement.style.cursor='pointer';self.componentElement.style.opacity=0;self.componentElement.style.display='block';}}
if(self.componentElement.complete){preloaded=true;}
window.setTimeout(self.checkPreload,100);}else{preloaded=true;self.displayComponent();}};this.displayComponent=function(){zxPicturesLogics.logView(self.id);self.componentElement.style.opacity=0;self.componentElement.style.display='block';self.componentElement.style.zIndex='15';TweenLite.to(self.componentElement,0.2,{'css':{'opacity':1},'onComplete':parentComponent.hidePreviousImage,});};this.hideComponent=function(){self.componentElement.style.display='none';};this.clickHandler=function(event){eventsManager.cancelBubbling(event);self.parentComponent.showNextImage();};var self=this;this.id=false;this.componentElement=false;this.parentComponent=false;this.init();};;window.StagesAnimationComponent=function(gifElement){var canvasElement;var contextObject;var currentFrameNumber;var currentFrame;var nextFrameNumber;var nextFrame;var nextFrameDelay;var transitionOpacity=0;var width;var height;var frames=[];var init=function(){attemptGifSourceDownload();};var attemptGifSourceDownload=function(){gifElement.style.visibility='hidden';if(gifElement.src){ajaxManager.makeRequest({'requestURL':gifElement.src,'requestType':'GET','successCallBack':startParsing,'overrideMimeType':'text/plain; charset=x-user-defined'})}};var startParsing=function(responseText){var parser=new AnimatedGifParser();parser.startParsing(responseText,parseCompletedHandler);};var parseCompletedHandler=function(parsedGifData){width=parsedGifData.width;height=parsedGifData.height;canvasElement=document.createElement('canvas');canvasElement.style.display='block';canvasElement.width=width;canvasElement.height=height;contextObject=canvasElement.getContext('2d');gifElement.parentNode.insertBefore(canvasElement,gifElement);gifElement.parentNode.removeChild(gifElement);gifElement=null;var tmpCanvas=document.createElement('canvas');tmpCanvas.width=width;tmpCanvas.height=height;var tmpContextObject=tmpCanvas.getContext('2d');for(var i=0;i<parsedGifData.frames.length;i++){tmpContextObject.putImageData(parsedGifData.frames[i].data,0,0);var imageElement=document.createElement('img');imageElement.width=width;imageElement.height=height;imageElement.src=tmpCanvas.toDataURL();frames.push({'data':imageElement,'delay':parsedGifData.frames[i].delay*10});}
currentFrameNumber=0;nextFrameNumber=0;displayInstantFrame(currentFrameNumber);window.setTimeout(displayNextFrame,frames[currentFrameNumber].delay);};var displayInstantFrame=function(number){var frame=frames[number];contextObject.drawImage(frame.data,0,0);};var displayNextFrame=function(){currentFrameNumber=nextFrameNumber;nextFrameNumber=currentFrameNumber+1;if(nextFrameNumber>=frames.length){nextFrameNumber=0;}
currentFrame=frames[currentFrameNumber];nextFrame=frames[nextFrameNumber];if(nextFrameNumber==frames.length-1){nextFrameDelay=2500;}
else{nextFrameDelay=nextFrame.delay;}
animateTransition();};var animateTransition=function(){contextObject.globalAlpha=1;contextObject.drawImage(currentFrame.data,0,0);contextObject.globalAlpha=transitionOpacity;contextObject.drawImage(nextFrame.data,0,0);if(transitionOpacity>=1){transitionOpacity=0;window.setTimeout(displayNextFrame,nextFrameDelay);}
else{transitionOpacity=transitionOpacity+0.03;if(window.requestAnimationFrame){window.requestAnimationFrame(animateTransition);}
else{window.setTimeout(animateTransition,17);}}};init();};;window.FlickerImageComponent=function(componentElement){var gifElement;var canvasElement;var contextObject;var currentFrameNumber;var nextFrameNumber;var nextFrame;var width;var height;var frames=[];var init=function(){gifElement=componentElement;canvasElement=document.createElement('canvas');canvasElement.className=gifElement.className;canvasElement.id=gifElement.id;attemptGifSourceDownload();};var attemptGifSourceDownload=function(){if(gifElement.complete){if(gifElement.src){ajaxManager.makeRequest({'requestURL':gifElement.src,'requestType':'GET','successCallBack':startParsing,'overrideMimeType':'text/plain; charset=x-user-defined'})}}
else{window.setTimeout(attemptGifSourceDownload,300);}};var startParsing=function(responseText){var parser=new AnimatedGifParser();parser.startParsing(responseText,parseCompletedHandler);};var parseCompletedHandler=function(parsedGifData){gifElement.style.visibility='hidden';width=parsedGifData.width;height=parsedGifData.height;canvasElement.width=width;canvasElement.height=height;contextObject=canvasElement.getContext('2d');if(gifElement.parentNode){gifElement.parentNode.insertBefore(canvasElement,gifElement);gifElement.parentNode.removeChild(gifElement);}
gifElement=null;var tmpCanvas=document.createElement('canvas');tmpCanvas.width=width;tmpCanvas.height=height;var tmpContextObject=tmpCanvas.getContext('2d');for(var i=0;i<parsedGifData.frames.length;i++){tmpContextObject.putImageData(parsedGifData.frames[i].data,0,0);var imageElement=document.createElement('img');imageElement.width=width;imageElement.height=height;imageElement.src=tmpCanvas.toDataURL();frames.push({'data':imageElement,'delay':parsedGifData.frames[i].delay});}
canvasElement.complete=true;currentFrameNumber=0;nextFrameNumber=0;displayNextFrame();};var displayNextFrame=function(){currentFrameNumber=nextFrameNumber;nextFrameNumber=currentFrameNumber+1;if(nextFrameNumber>=frames.length){nextFrameNumber=0;}
nextFrame=frames[nextFrameNumber];contextObject.drawImage(nextFrame.data,0,0);if(window.requestAnimationFrame){window.requestAnimationFrame(displayNextFrame);}
else{window.setTimeout(displayNextFrame,16.66);}};this.getCanvasElement=function(){return canvasElement;};init();};;window.MusicFullComponent=function(componentElement){var state;var buttonsBlock;var previousButton;var playButton;var stopButton;var nextButton;var progressBlock;var titleBlock;var progressBodyBlock;var currentInfo;var type;var ratingsBlock;var linkElement;var init=function(){if(componentElement.className.indexOf('music_controls_full_static')!=-1){type='static';}
else{type='fixed';}
state='paused';createDomStructure();controller.addListener('musicPlayPaused',musicPlayPausedHandler);controller.addListener('musicPlayResumed',musicPlayResumedHandler);controller.addListener('musicTimeUpdated',musicTimeUpdatedHandler);refreshStatus();};var createDomStructure=function(){buttonsBlock=document.createElement('div');buttonsBlock.className='music_controls_buttons';componentElement.appendChild(buttonsBlock);previousButton=document.createElement('div');previousButton.className='music_controls_button previous';eventsManager.addHandler(previousButton,'click',previousClickHandler);buttonsBlock.appendChild(previousButton);playButton=document.createElement('div');playButton.className='music_controls_button play';eventsManager.addHandler(playButton,'click',playClickHandler);buttonsBlock.appendChild(playButton);stopButton=document.createElement('div');stopButton.className='music_controls_button stop';eventsManager.addHandler(stopButton,'click',stopClickHandler);buttonsBlock.appendChild(stopButton);nextButton=document.createElement('div');nextButton.className='music_controls_button next';eventsManager.addHandler(nextButton,'click',nextClickHandler);buttonsBlock.appendChild(nextButton);progressBlock=document.createElement('div');progressBlock.className='music_controls_progress';eventsManager.addHandler(progressBlock,'click',progressClickHandler);componentElement.appendChild(progressBlock);progressBodyBlock=document.createElement('div');progressBodyBlock.className='music_controls_progress_body';progressBlock.appendChild(progressBodyBlock);titleBlock=document.createElement('div');titleBlock.className='music_controls_title';progressBlock.appendChild(titleBlock);linkElement=document.createElement('a');linkElement.className='music_controls_link';linkElement.addEventListener('click',linkElementClick);componentElement.appendChild(linkElement);ratingsBlock=document.createElement('div');ratingsBlock.className='music_controls_ratings';componentElement.appendChild(ratingsBlock);};var linkElementClick=function(event){event.preventDefault();window.open(linkElement.href);};var musicPlayPausedHandler=function(info){currentInfo=info;state='paused';refreshStatus();};var musicPlayResumedHandler=function(info){currentInfo=info;state='playing';refreshStatus();};var musicTimeUpdatedHandler=function(info){var duration=info.duration;var currentTime=info.currentTime;progressBodyBlock.style.width=(currentTime / duration)*progressBlock.offsetWidth+'px';};var progressClickHandler=function(){var positions=domHelper.getElementPositions(progressBlock);var mousePositionX=mouseTracker.mouseX;var percent=(mousePositionX-positions.x)/ progressBlock.offsetWidth;musicLogics.seekPercent(percent);};var playClickHandler=function(){if(state=='paused'){musicLogics.resume(currentInfo.id);}
else{musicLogics.pause();}};var stopClickHandler=function(){musicLogics.stop();};var previousClickHandler=function(){musicLogics.previous();};var nextClickHandler=function(){musicLogics.next();};var refreshStatus=function(){if(currentInfo){titleBlock.innerHTML=currentInfo.author+' - '+currentInfo.title;componentElement.style.display='block';ratingsBlock.innerHTML='';linkElement.href=currentInfo.url;var voteComponent=new VoteControls(null,currentInfo);ratingsBlock.appendChild(voteComponent.getComponentElement());var playListComponent=new PlaylistControlsComponent(null,currentInfo.id);ratingsBlock.appendChild(playListComponent.getComponentElement());}
else if(type=='fixed'){componentElement.style.display='none';}
if(state=='paused'){domHelper.removeClass(playButton,'pause');domHelper.addClass(playButton,'play');}
else{domHelper.addClass(playButton,'pause');domHelper.removeClass(playButton,'play');}};init();};;window.GroupFormComponent=function(componentElement){var init=function(){var citySelectElements=_('.group_form_city_select',componentElement);for(var i=citySelectElements.length;i--;){new AjaxSelectComponent(citySelectElements[i],'city');}
var countrySelectElement=_('.group_form_country_select',componentElement);for(var i=countrySelectElement.length;i--;){new AjaxSelectComponent(countrySelectElement[i],'country');}
var groupsSelectElement=_('.group_form_subgroup_select',componentElement);for(var i=groupsSelectElement.length;i--;){new AjaxSelectComponent(groupsSelectElement[i],'group');}
var authorSelectElement=_('.author_form_select',componentElement);for(var i=authorSelectElement.length;i--;){new AjaxSelectComponent(authorSelectElement[i],'author,authorAlias');}
var groupAsAliasJoinSelectElement=_('.group_form_joinasalias_select',componentElement);for(i=groupAsAliasJoinSelectElement.length;i--;){new AjaxSelectComponent(groupAsAliasJoinSelectElement[i],'group','public');}
var groupJoinAndDeleteSelectElement=_('.group_form_joinanddelete_select',componentElement);for(i=groupJoinAndDeleteSelectElement.length;i--;){new AjaxSelectComponent(groupJoinAndDeleteSelectElement[i],'group,groupAlias','public');}};init();};;window.AuthorFormComponent=function(componentElement){var init=function(){var i;var citySelectElements=_('.author_form_city_select',componentElement);for(i=citySelectElements.length;i--;){new AjaxSelectComponent(citySelectElements[i],'city','public');}
var countrySelectElement=_('.author_form_country_select',componentElement);for(i=countrySelectElement.length;i--;){new AjaxSelectComponent(countrySelectElement[i],'country','public');}
var authorAsAliasJoinSelectElement=_('.author_form_joinasalias_select',componentElement);for(i=authorAsAliasJoinSelectElement.length;i--;){new AjaxSelectComponent(authorAsAliasJoinSelectElement[i],'author','public');}
var authorJoinAndDeleteSelectElement=_('.author_form_joinanddelete_select',componentElement);for(i=authorJoinAndDeleteSelectElement.length;i--;){new AjaxSelectComponent(authorJoinAndDeleteSelectElement[i],'author,authorAlias','public');}};init();};;window.AuthorAliasFormComponent=function(componentElement){var init=function(){var authorSelectElements=_('.authoralias_form_author_select',componentElement);for(var i=authorSelectElements.length;i--;){new AjaxSelectComponent(authorSelectElements[i],'author','public');}};init();};;window.GroupAliasFormComponent=function(componentElement){var init=function(){var groupSelectElements=_('.groupalias_form_group_select',componentElement);for(var i=groupSelectElements.length;i--;){new AjaxSelectComponent(groupSelectElements[i],'group','public');}};init();};;window.ZxItemFormComponent=function(componentElement){const init=function(){let i;let connectionsSelectElements=componentElement.querySelectorAll('.zxitem_form_authors_select');for(i=connectionsSelectElements.length;i--;){new AjaxSelectComponent(connectionsSelectElements[i],'author,authorAlias','public');}
let prodReleaseSelectElements=componentElement.querySelectorAll('.zxitem_form_prodrelease_select');for(i=prodReleaseSelectElements.length;i--;){new AjaxSelectComponent(prodReleaseSelectElements[i],'zxProd,zxRelease','public');}
let prodSelectElements=componentElement.querySelectorAll('.zxitem_form_prod_select');for(i=prodSelectElements.length;i--;){new AjaxSelectComponent(prodSelectElements[i],'zxProd','public');}
let partySelectElements=componentElement.querySelectorAll('.zxitem_form_party_select');for(i=partySelectElements.length;i--;){new AjaxSelectComponent(partySelectElements[i],'party','public');}
let authorSelectElement=componentElement.querySelectorAll('.author_form_select');for(i=authorSelectElement.length;i--;){new AjaxSelectComponent(authorSelectElement[i],'author,authorAlias');}
let groupsSelectElement=componentElement.querySelectorAll('.zxitem_form_groups_select');for(i=groupsSelectElement.length;i--;){new AjaxSelectComponent(groupsSelectElement[i],'group,groupAlias');}
let publishersSelect=componentElement.querySelectorAll('.zxitem_form_publishers_select');for(i=publishersSelect.length;i--;){new AjaxSelectComponent(publishersSelect[i],'author,authorAlias,group,groupAlias');}};init();};;window.PartyFormComponent=function(componentElement){var init=function(){var citySelectElements=_('.party_form_city_select',componentElement);for(var i=citySelectElements.length;i--;){new AjaxSelectComponent(citySelectElements[i],'city','public');}
var countrySelectElement=_('.party_form_country_select',componentElement);for(var i=countrySelectElement.length;i--;){new AjaxSelectComponent(countrySelectElement[i],'country','public');}};init();};;window.FormHelperComponent=function(componentElement){var self=this;var mark;var tip;var tipWidth;var tipHeight;var init=function(){mark=componentElement.querySelector('.form_helper_mark');tip=componentElement.querySelector('.form_helper_tip');tipWidth=tip.offsetWidth;tipHeight=tip.offsetHeight;eventsManager.addHandler(mark,"mouseover",onMouseOver);eventsManager.addHandler(mark,"mouseout",onMouseOut);};var onMouseOver=function(){tip.style.display='block';tip.style.visibility="visible";findTipPlace(mark);};var onMouseOut=function(){tip.style.visibility="hidden";tip.setAttribute('style','display: none');};var findTipPlace=function(el){var rect=el.getBoundingClientRect();var clientWidth=document.documentElement.clientWidth;var scrollPosY=self.getPageScroll().y;var tipRect=tip.getBoundingClientRect();if((rect.right+10+tipWidth)>clientWidth){var diff_x=tipRect.right-document.documentElement.clientWidth;tip.style.left=(tip.offsetLeft-diff_x-25)+'px';if((scrollPosY>rect.top)){tip.style.top=(tip.offsetTop+35)+'px';}
if((scrollPosY<=rect.top)){tip.style.top=(tip.offsetTop-tipHeight-5)+'px';}}else{tip.style.top=(tip.offsetTop-tipHeight / 2+14)+'px';}};init();};DomHelperMixin.call(FormHelperComponent.prototype);;window.DeleteButtonComponent=function(componentElement){var init=function(){eventsManager.addHandler(componentElement,'click',clickHandler);};var clickHandler=function(event){if(!confirm(translationsLogics.get('controls.delete_confirmation'))){eventsManager.preventDefaultAction(event);}};init();};;window.EditingControlsComponent=function(componentElement){var init=function(){var elements,i;elements=_('.button',componentElement);for(i=elements.length;i--;){new EditingControlsButtonComponent(elements[i]);}
elements=_('.delete_button',componentElement);for(i=elements.length;i--;){new DeleteButtonComponent(elements[i]);}
elements=_('.convert_button',componentElement);for(i=elements.length;i--;){new ConvertButtonComponent(elements[i]);}};init();};window.EditingControlsButtonComponent=function(componentElement){var init=function(){if(window.userName=='anonymous'){var popup=new TipPopupComponent(componentElement,window.translationsLogics.get('controls.registration_required'));popup.setDisplayDelay(100);eventsManager.addHandler(componentElement,'click',clickHandler);}};var clickHandler=function(event){eventsManager.preventDefaultAction(event);};init();};window.ConvertButtonComponent=function(componentElement){var init=function(){eventsManager.addHandler(componentElement,'click',clickHandler);};var clickHandler=function(event){if(!confirm(translationsLogics.get('controls.convert_confirmation'))){eventsManager.preventDefaultAction(event);}};init();};;window.UserPlaylistTableItemComponent=function(componentElement){var deleteButton;var init=function(){if(deleteButton=componentElement.querySelector('.userplaylists_item_delete')){eventsManager.addHandler(deleteButton,'click',deleteButtonClickHandler);}};var deleteButtonClickHandler=function(event){if(!confirm(translationsLogics.get('playlist.confirmdelete'))){eventsManager.preventDefaultAction(event);}};init();};;window.PlaylistControlsComponent=function(componentElement,id){var init=function(){if(!id){id=parseInt(componentElement.className.split('elementid_')[1],10);}
if(id){createDomStructure();}};var createDomStructure=function(){if(!componentElement){componentElement=document.createElement('div');componentElement.className='playlist_controls';}
if(window.userName=='anonymous'){var popup=new TipPopupComponent(componentElement,window.translationsLogics.get('playlist.registration_required'));popup.setDisplayDelay(100);}
else{eventsManager.addHandler(componentElement,'click',clickHandler);}};var clickHandler=function(event){event.preventDefault();eventsManager.cancelBubbling(event);var popup=playlistLogics.getPopup();popup.setReferenceElement(componentElement);popup.setElementId(id);popup.display();};this.getComponentElement=function(){return componentElement;};init();};window.PlaylistControlsPopupComponent=function(){var self=this;var componentElement;var listElement;var bottomElement;var inputElement;var addButtonElement;var referenceElement;var elementId;var listItems;var playlistIds;var init=function(){createDomStructure();self.initAutoAdjustedPopup({'componentElement':componentElement});controller.addListener('playlistsUpdated',playlistsUpdatedHandler);playlistsUpdatedHandler();};var playlistsUpdatedHandler=function(){listItems=[];var playlists=playlistLogics.getPlaylists();while(listElement.firstChild){listElement.firstChild.parentNode.removeChild(listElement.firstChild);}
for(var i=0;i<playlists.length;i++){var listItem=new PlaylistControlsListItemComponent(playlists[i],self);listElement.appendChild(listItem.getComponentElement());listItems.push(listItem);}
if(elementId){self.updateElementPlaylistIds();}};var createDomStructure=function(){componentElement=self.makeElement('div','playlist_controls_popup');listElement=self.makeElement('div','playlist_controls_list',componentElement);bottomElement=self.makeElement('div','playlist_controls_bottom',componentElement);inputElement=self.makeElement('input',{'className':'playlist_controls_input input_components','type':'text','placeholder':translationsLogics.get('playlist.add_placeholder')},bottomElement);addButtonElement=self.makeElement('input',{'type':'button','className':'playlist_controls_button button','value':translationsLogics.get('playlist.add_submit')},bottomElement);document.body.appendChild(componentElement);eventsManager.addHandler(document.body,'click',documentClickHandler);eventsManager.addHandler(componentElement,'click',componentClickHandler);eventsManager.addHandler(addButtonElement,'click',addButtonClickHandler);};var addButtonClickHandler=function(){var title=inputElement.value.trim();if(title!=''){playlistLogics.savePlaylist(title,successfulSaveCallback);}};var successfulSaveCallback=function(){inputElement.value='';};this.display=function(){playlistLogics.requestPlaylistIds(elementId,playlistIdsRequestCallback);};var playlistIdsRequestCallback=function(){self.updateElementPlaylistIds();displayComponent();};this.updateElementPlaylistIds=function(){playlistIds=playlistLogics.getPlaylistIds(elementId);if(playlistIds){for(var i=0;i<listItems.length;i++){if(playlistIds.indexOf(listItems[i].getId())>=0){listItems[i].setAdded();}
else{listItems[i].unsetAdded();}}}};var displayComponent=function(){if(referenceElement){self.adjustPositionAndSize(referenceElement);}
componentElement.style.display='block';inputElement.focus();};this.hide=function(){componentElement.style.display='none';};this.setReferenceElement=function(newReferenceElement){referenceElement=newReferenceElement;};var documentClickHandler=function(){self.hide();};var componentClickHandler=function(event){eventsManager.cancelBubbling(event);};this.getElementId=function(){return elementId;};this.setElementId=function(id){if(elementId!=id){elementId=id;playlistIds=false;}};init();};AutoAdjustedPopup.call(PlaylistControlsPopupComponent.prototype);DomHelperMixin.call(PlaylistControlsPopupComponent.prototype);DomElementMakerMixin.call(PlaylistControlsPopupComponent.prototype);window.PlaylistControlsListItemComponent=function(info,parentObject){var self=this;var componentElement;var titleElement;var iconElement;var descriptionElement;var added=false;var init=function(){componentElement=self.makeElement('div','playlist_controls_item');titleElement=self.makeElement('div','playlist_controls_item_title',componentElement);iconElement=self.makeElement('div','playlist_controls_item_icon',titleElement);descriptionElement=self.makeElement('div','playlist_controls_item_description',titleElement);var titleValueElement=self.makeElement('span','',titleElement);titleValueElement.innerHTML+=info.title;eventsManager.addHandler(componentElement,'click',clickHandler);};this.getComponentElement=function(){return componentElement;};this.getId=function(){return info.id;};this.setAdded=function(){added=true;iconElement.style.display='block';descriptionElement.innerHTML=translationsLogics.get('playlist.remove');};this.unsetAdded=function(){added=false;iconElement.style.display='none';descriptionElement.innerHTML=translationsLogics.get('playlist.add');};var clickHandler=function(){if(added){playlistLogics.removeFromPlaylist(info.id,parentObject.getElementId(),updateCallback);}
else{playlistLogics.addToPlaylist(info.id,parentObject.getElementId(),updateCallback);}};var updateCallback=function(){parentObject.updateElementPlaylistIds();};init();};DomElementMakerMixin.call(PlaylistControlsListItemComponent.prototype);;window.SettingsBlockComponent=function(componentElement){var init=function(){var elements,i;elements=_('.button',componentElement);for(i=elements.length;i--;){new SettingsBlockInput(elements[i]);}};init();};window.SettingsBlockInput=function(componentElement){var init=function(){componentElement.addEventListener('click',clickHandler);};var clickHandler=function(){window.location.href=window.currentElementURL+componentElement.dataset.operation+'/';};init();};;window.ZxMap=function(componentElement){var id;var data;var init=function(){id=componentElement.dataset.id;if(data=zxMapLogics.getData(id)){initLeafLet();}};var initLeafLet=function(){var map=L.map(componentElement);var markers=L.markerClusterGroup({spiderfyOnMaxZoom:false,showCoverageOnHover:false,iconCreateFunction:function(cluster){var amount=0;if(markers=cluster.getAllChildMarkers()){for(var i=0;i<markers.length;i++){amount+=markers[i].zxAmount;}}
return L.divIcon({html:'<div class="map_icon_cluster"><div class="map_icon_cluster_inner">'+amount+'</div></div>'});},});L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',}).addTo(map);for(var i=0;i<data.markers.length;i++){var myIcon=L.divIcon({className:'map_icon',iconSize:[30,38],iconAnchor:[15,19],html:'<div class="map_icon_amount">'+data.markers[i].amount+'</div>',});var marker=L.marker([data.markers[i].latitude,data.markers[i].longitude],{icon:myIcon});marker.zxAmount=data.markers[i].amount;marker.bindPopup(data.markers[i].title).openPopup();marker.on('mouseover',function(e){this.openPopup();});marker.on('mouseout',function(e){this.closePopup();});var url=data.markers[i].url;var clickHandler=function(url){return function(e){document.location.href=url;};}(url);marker.on('click',clickHandler);markers.addLayer(marker);}
map.addLayer(markers);map.setView([data.startLatitude,data.startLongitude],data.zoom);};init();};;